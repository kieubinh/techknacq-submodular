{
  "info": {
    "authors": [
      "Rohit J. Kate",
      "Raymond J. Mooney"
    ],
    "book": "International Conference on Computational Linguistics and Annual Meeting of the Association for Computational Linguistics",
    "id": "acl-P06-1115",
    "title": "Using String-Kernels for Learning Semantic Parsers",
    "url": "https://aclweb.org/anthology/P06-1115",
    "year": 2006
  },
  "references": [
    "acl-C04-1021",
    "acl-H90-1020",
    "acl-J95-2002",
    "acl-N06-1056",
    "acl-P96-1008",
    "acl-W05-0602"
  ],
  "sections": [
    {
      "heading": "Abstract",
      "text": [
        "We present a new approach for mapping natural language sentences to their formal meaning representations using string-kernel-based classifiers.",
        "Our system learns these classifiers for every production in the formal language grammar.",
        "Meaning representations for novel natural language sentences are obtained by finding the most probable semantic parse using these string classifiers.",
        "Our experiments on two real-world data sets show that this approach compares favorably to other existing systems and is particularly robust to noise."
      ]
    },
    {
      "heading": "1 Introduction",
      "text": [
        "Computational systems that learn to transform natural language sentences into formal meaning representations have important practical applications in enabling user-friendly natural language communication with computers.",
        "However, most of the research in natural language processing (NLP) has been focused on lower-level tasks like syntactic parsing, word-sense disambiguation, information extraction etc.",
        "In this paper, we have considered the important task of doing deep semantic parsing to map sentences into their computer-executable meaning representations.",
        "Previous work on learning semantic parsers either employ rule-based algorithms (Tang and Mooney, 2001; Kate et al., 2005), or use statistical feature-based methods (Ge and Mooney, 2005; Zettlemoyer and Collins, 2005; Wong and Mooney, 2006).",
        "In this paper, we present a novel kernel-based statistical method for learning semantic parsers.",
        "Kernel methods (Cristianini and Shawe-Taylor, 2000) are particularly suitable for semantic parsing because it involves mapping phrases of natural language (NL) sentences to semantic concepts in a meaning representation language (MRL).",
        "Given that natural languages are so flexible, there are various ways in which one can express the same semantic concept.",
        "It is difficult for rule-based methods or even statistical feature-based methods to capture the full range of NL contexts which map to a semantic concept because they tend to enumerate these contexts.",
        "In contrast, kernel methods allow a convenient mechanism to implicitly work with a potentially infinite number of features which can robustly capture these range of contexts even when the data is noisy.",
        "Our system, KRISP (Kernel-based Robust Interpretation for Semantic Parsing), takes NL sentences paired with their formal meaning representations as training data.",
        "The productions of the formal MRL grammar are treated like semantic concepts.",
        "For each of these productions, a Support-Vector Machine (SVM) (Cristianini and Shawe-Taylor, 2000) classifier is trained using string similarity as the kernel (Lodhi et al., 2002).",
        "Each classifier then estimates the probability of the production covering different substrings of the sentence.",
        "This information is used to compositionally build a complete meaning representation (MR) of the sentence.",
        "Some of the previous work on semantic parsing has focused on fairly simple domains, primarily, ATIS (Air Travel Information Service) (Price, 1990) whose semantic analysis is equivalent to filling a single semantic frame (Miller et al., 1996; Popescu et al., 2004).",
        "In this paper, we have tested KRISP on two real-world domains in which meaning representations are more complex with richer predicates and nested structures.",
        "Our experiments demonstrate that KRISP compares favor",
        "ably to other existing systems and is particularly robust to noise."
      ]
    },
    {
      "heading": "2 Semantic Parsing",
      "text": [
        "We call the process of mapping natural language (NL) utterances into their computer-executable meaning representations (MRs) as semantic parsing.",
        "These MRs are expressed in formal languages which we call meaning representation languages (MRLs).",
        "We assume that all MRLs have deterministic context free grammars, which is true for almost all computer languages.",
        "This ensures that every MR will have a unique parse tree.",
        "A learning system for semantic parsing is given a training corpus of NL sentences paired with their respective MRs from which it has to induce a semantic parser which can map novel NL sentences to their correct MRs.",
        "Figure 1 shows an example of an NL sentence and its MR from the CLANG domain.",
        "CLANG (Chen et al., 2003) is the standard formal coach language in which coaching advice is given to soccer agents which compete on a simulated soccer field in the RoboCup 1 Coach Competition.",
        "In the MR of the example, bpos stands for “ball position”.",
        "The second domain we have considered is the GEOQUERY domain (Zelle and Mooney, 1996) which is a query language for a small database of about 800 U.S. geographical facts.",
        "Figure 2 shows an NL query and its MR form in a functional query language.",
        "The parse of the functional query language is also shown along with the involved productions.",
        "This example is also used later to illustrate how our system does semantic parsing.",
        "The MR in the functional query language can be read as if processing a list which gets modified by various functions.",
        "From the innermost expression going outwards it means: the state of Texas, the list containing all the states next to the state of Texas and the list of all the rivers which flow through these states.",
        "This list is finally returned as the answer.",
        "KRISP does semantic parsing using the notion of a semantic derivation of an NL sentence.",
        "In the following subsections, we define the semantic derivation of an NL sentence and its probability.",
        "The task of semantic parsing then is to find the most probable semantic derivation of an NL sentence.",
        "In section 3, we describe how KRISP learns the string classifiers that are used to obtain the probabilities needed in finding the most probable semantic derivation."
      ]
    },
    {
      "heading": "2.1 Semantic Derivation",
      "text": [
        "We define a semantic derivation, D, of an NL sentence, s, as a parse tree of an MR (not necessarily the correct MR) such that each node of the parse tree also contains a substring of the sentence in addition to a production.",
        "We denote nodes of the derivation tree by tuples (7r, [i..j]), where 7r is its production and [i.. j ] stands for the substring s [i.. j ] of s (i.e. the substring from the ith word to the jth word), and we say that the node or its production covers the substring s[i..j].",
        "The substrings covered by the children of a node are not allowed to overlap, and the substring covered by the parent must be the concatenation of the substrings covered by its children.",
        "Figure 3 shows a semantic derivation of the NL sentence and the MR parse which were shown in figure 2.",
        "The words are numbered according to their position in the sentence.",
        "Instead of non-terminals, productions are shown in the nodes to emphasize the role of productions in semantic derivations.",
        "Sometimes, the children of an MR parse tree",
        "which gives MR as answer (traverse (nextto (stateid (texas) ) ) ) .",
        "node may not be in the same order as are the substrings of the sentence they should cover in a semantic derivation.",
        "For example, if the sentence was “Through the states that border Texas which rivers run?”, which has the same MR as the sentence in figure 3, then the order of the children of the node “RIVER – * TRAVERS E(S TATE)” would need to be reversed.",
        "To accommodate this, a semantic derivation tree is allowed to contain MR parse tree nodes in which the children have been permuted.",
        "Note that given a semantic derivation of an NL sentence, it is trivial to obtain the corresponding MR simply as the string generated by the parse.",
        "Since children nodes may be permuted, this step also needs to permute them back to the way they should be according to the MRL productions.",
        "If a semantic derivation gives the correct MR of the NL sentence, then we call it a correct semantic derivation otherwise it is an incorrect semantic derivation."
      ]
    },
    {
      "heading": "2.2 Most Probable Semantic Derivation",
      "text": [
        "Let P,r(u) denote the probability that a production 7r of the MRL grammar covers the NL substring u.",
        "In other words, the NL substring u expresses the semantic concept of a production 7r with probability P,r(u).",
        "In the next subsection we will describe how KRISP obtains these probabilities using string-kernel based SVM classifiers.",
        "Assuming these probabilities are independent of each other, the probability of a semantic derivation D of a sentence s is then:",
        "The task of the semantic parser is to find the most probable derivation of a sentence s. This task can be recursively performed using the notion of a partial derivation E,,,, [j.j], which stands for a subtree of a semantic derivation tree with n as the left-hand-side (LHS) non-terminal of the root production and which covers s from index i to j.",
        "For example, the subtree rooted at the node “(STATE – * NEXTTO (STATE),[5..9])” in the derivation shown in figure 3 is a partial derivation which would be denoted as ESTATE,, [5..9].",
        "Note that the derivation D of sentence s is then simply Estart,s [l.. 1s 1] , where start is the start symbol of the MRL’s context free grammar, G. Our procedure to find the most probable partial derivation Ens[i..j] considers all possible subtrees whose root production has n as its LHS nonterminal and which cover s from index i to j.",
        "Mathematically, the most probable partial derivation �� ���������is recursively defined as:",
        "where partition (s[i..j], t) is a function which returns the set of all partitions of s[i..j] with t elements including their permutations.",
        "A partition of a substring s[i..j] with t elements is a t – tuple containing t non-overlapping substrings of s[i..j] which give s[i..j] when concatenated.",
        "For example, ( “the states bordering”, “Texas ?”) is a partition of the substring “the states bordering Texas ?” with 2 elements.",
        "The procedure makeTree(7r, (pi, .., pt)) constructs a partial derivation tree by making 7r as its root production and making the most probable partial derivation trees found through the recursion as children subtrees which cover the substrings according to the partition (pi, .., pt).",
        "The most probable partial derivation En,s[i..j] is found using the above equation by trying all productions 7r = n – * ni..nt in G which have",
        "n as the LHS, and all partitions with t elements of the substring s [i.. j ] (ni to nt are right-hand-side (RHS) non-terminals of 7r, terminals do not play any role in this process and are not shown for simplicity).",
        "The most probable partial derivation EsTATE,9[5_9] for the sentence shown in figure 3 will be found by trying all the productions in the grammar with STATE as the LHS, for example, one of them being “STATE – * NEXTTO STATE”.",
        "Then for this sample production, all partitions, (pi, p2), of the substring s[5..9] with two elements will be considered, and the most probable derivations EN=T_TO,p, and ESTATE,p, will be found recursively.",
        "The recursion reaches base cases when the productions which have n on the LHS do not have any non-terminal on the RHS or when the substring s[i..j] becomes smaller than the length t. According to the equation, a production 7r E G and a partition (pi, .., pt) E partition (s [i..j], t) will be selected in constructing the most probable partial derivation.",
        "These will be the ones which maximize the product of the probability of 7r covering the substring s[i.. j] with the product of probabilities of all the recursively found most probable partial derivations consistent with the partition ��� ���.",
        "A naive implementation of the above recursion is computationally expensive, but by suitably extending the well known Earley’s context-free parsing algorithm (Earley, 1970), it can be implemented efficiently.",
        "The above task has some resemblance to probabilistic context-free grammar (PCFG) parsing for which efficient algorithms are available (Stolcke, 1995), but we note that our task of finding the most probable semantic derivation differs from PCFG parsing in two important ways.",
        "First, the probability of a production is not independent of the sentence but depends on which substring of the sentence it covers, and second, the leaves of the tree are not individual terminals of the grammar but are substrings of words of the NL sentence.",
        "The extensions needed for Earley’s algorithm are straightforward and are described in detail in (Kate, 2005) but due to space limitation we do not describe them here.",
        "Our extended Ear-ley’s algorithm does a beam search and attempts to find the w (a parameter) most probable semantic derivations of an NL sentence s using the probabilities P,(s[i.. j]).",
        "To make this search faster, it uses a threshold, 0, to prune low probability derivation trees."
      ]
    },
    {
      "heading": "3 KRISP’s Training Algorithm",
      "text": [
        "In this section, we describe how KRISP learns the classifiers which give the probabilities P,(u) needed for semantic parsing as described in the previous section.",
        "Given the training corpus of NL sentences paired with their MRs { (Si7 mi) I i = 1..N}, KRISP first parses the MRs using the MRL grammar, G. We represent the parse of MR, mi, by parse(mi).",
        "Figure 4 shows pseudo-code for KRISP’s training algorithm.",
        "KRISP learns a semantic parser iteratively, each iteration improving upon the parser learned in the previous iteration.",
        "In each iteration, for every production 7r of G, KRISP collects positive and negative example sets.",
        "In the first iteration, the set P(7r) of positive examples for production 7r contains all sentences, si, such that parse(mi) uses the production 7r.",
        "The set of negative examples, ,N(7r), for production 7r includes all of the remaining training sentences.",
        "Using these positive and negative examples, an SVM classifier 2, C, is trained for each production 7r using a normalized string subsequence kernel.",
        "Following the framework of Lodhi et al.",
        "(2002), we define a kernel between two strings as the number of common subsequences they share.",
        "One difference, however, is that their strings are over characters while our strings are over words.",
        "The more the two strings share, the greater the similarity score will be.",
        "Normally, SVM classifiers only predict the class of the test example but one can obtain class probability estimates by mapping the distance of the example from the SVM’s separating hyperplane to the range [0, 1] using a learned sigmoid function (Platt, 1999).",
        "The classifier C, then gives us the probabilities P,(u).",
        "We represent the set of these classifiers by C = IC, 17r E G}.",
        "Next, using these classifiers, the extended Earley’s algorithm, which we call EX-TENDEDEARLEY in the pseudo-code, is invoked to obtain the w best semantic derivations for each of the training sentences.",
        "The procedure getMR returns the MR for a semantic derivation.",
        "At this point, for many training sentences, the resulting most-probable semantic derivation may not give the correct MR.",
        "Hence, next, the system collects more refined positive and negative examples to improve the result in the next iteration.",
        "It",
        "function TRAINKRISP(training corpus {(s;, mi) |i = 1..N}, MRL grammar G)",
        "is also possible that for some sentences, none of the obtained w derivations give the correct MR.",
        "But as will be described shortly, the most probable derivation which gives the correct MR is needed to collect positive and negative examples for the next iteration.",
        "Hence in these cases, a version of the extended Earley’s algorithm, EXTENDED _EARLEYCORRECT, is invoked which also takes the correct MR as an argument and returns the best w derivations it finds, all of which give the correct MR.",
        "This is easily done by making sure all subtrees derived in the process are present in the parse of the correct MR. From these derivations, positive and negative examples are collected for the next iteration.",
        "Positive examples are collected from the most probable derivation which gives the correct MR, figure 3 showed an example of a derivation which gives the correct MR. At each node in such a derivation, the substring covered is taken as a positive example for its production.",
        "Negative examples are collected from those derivations whose probability is higher than the most probable correct derivation but which do not give the correct MR.",
        "Figure 5 shows an example of an incorrect derivation.",
        "Here the function “nextto” is missing from the MR it produces.",
        "The following procedure is used to collect negative examples from incorrect derivations.",
        "The incorrect derivation and the most probable correct derivation are traversed simultaneously starting from the root using breadth-first traversal.",
        "The first nodes where their productions differ is detected, and all of the words covered by the these nodes (in both derivations) are marked.",
        "In the correct and incorrect derivations shown in figures 3 and 5 respectively, the first nodes where the productions differ are “(STATE – * NEXTTO(STATE), [5..9])” and “(STATE -* STATEID, [8..9])”.",
        "Hence, the union of words covered by them: 5 to 9 ( “the states bordering Texas?”), will be marked.",
        "For each of these marked words, the procedure considers all of the productions which cover it in the two derivations.",
        "The nodes of the productions which cover a marked word in the incorrect derivation but not in the correct derivation are used to collect negative examples.",
        "In the example, the node “(TRAVERSE-t rave rse,[1..7])” will be used to collect a negative example (i.e. the words 1 to 7 ‘‘which rivers run through the states bordering” will be a negative example for the production TRAVERSE – *t rave r se) because the production covers the marked words “the”, “states” and “bordering” in the incorrect derivation but not in the correct derivation.",
        "With this as a negative example, hopefully in the next iteration, the probability of this derivation will decrease significantly and drop below the probability of the correct derivation.",
        "In each iteration, the positive examples from the previous iteration are first removed so that new positive examples which lead to better correct derivations can take their place.",
        "However, negative examples are accumulated across iterations for better accuracy because negative examples from each iteration only lead to incorrect derivations and it is always good to include them.",
        "To further increase the number of negative examples, every positive example for a production is also included as a negative example for all the other productions having the same LHS.",
        "After a specified number of MAXITR iterations,",
        "the trained classifiers from the last iteration are returned.",
        "Testing involves using these classifiers to generate the most probable derivation of a test sentence as described in the subsection 2.2, and returning its MR.",
        "The MRL grammar may contain productions corresponding to constants of the domain, for e.g., state names like “STATEID – * ‘texas’”, or river names like “RIVERID – * ‘color ado’ ” etc.",
        "Our system allows the user to specify such productions as constant productions giving the NL substrings, called constant substrings, which directly relate to them.",
        "For example, the user may give “Texas” as the constant substring for the production “STATEID – * ‘texas’.",
        "Then KRISP does not learn classifiers for these constant productions and instead decides if they cover a substring of the sentence or not by matching it with the provided constant substrings."
      ]
    },
    {
      "heading": "4 Experiments",
      "text": []
    },
    {
      "heading": "4.1 Methodology",
      "text": [
        "KRISP was evaluated on CLANG and GEOQUERY domains as described in section 2.",
        "The CLANG corpus was built by randomly selecting 300 pieces of coaching advice from the log files of the 2003 RoboCup Coach Competition.",
        "These formal advice instructions were manually translated into English (Kate et al., 2005).",
        "The GEOQUERY corpus contains 880 English queries collected from undergraduates and from real users of a web-based interface (Tang and Mooney, 2001).",
        "These were manually translated into their MRs.",
        "The average length of an NL sentence in the CLANG corpus is 22.52 words while in the GEOQUERY corpus it is 7.48 words, which indicates that CLANG is the harder corpus.",
        "The average length of the MRs is 13.42 tokens in the CLANG corpus while it is 6.46 tokens in the GEOQUERY corpus.",
        "KRISP was evaluated using standard 10-fold cross validation.",
        "For every test sentence, only the best MR corresponding to the most probable semantic derivation is considered for evaluation, and its probability is taken as the system’s confidence in that MR.",
        "Since KRISP uses a threshold, 0, to prune low probability derivation trees, it sometimes may fail to return any MR for a test sentence.",
        "We computed the number of test sentences for which KRISP produced MRs, and the number of these MRs that were correct.",
        "For CLANG, an output MR is considered correct if and only if it exactly matches the correct MR. For GEOQUERY, an output MR is considered correct if and only if the resulting query retrieves the same answer as the correct MR when submitted to the database.",
        "Performance was measured in terms of precision (the percentage of generated MRs that were correct) and recall (the percentage of all sentences for which correct MRs were obtained).",
        "In our experiments, the threshold 0 was fixed to 0.05 and the beam size w was 20.",
        "These parameters were found through pilot experiments.",
        "The maximum number of iterations (MAXITR) required was only 3, beyond this we found that the system only overfits the training corpus.",
        "We compared our system’s performance with the following existing systems: the string and tree versions of SILT (Kate et al., 2005), a system that learns transformation rules relating NL phrases to MRL expressions; WASP (Wong and Mooney, 2006), a system that learns transformation rules using statistical machine translation techniques; SCISSOR (Ge and Mooney, 2005), a system that learns an integrated syntactic-semantic parser; and CHILL (Tang and Mooney, 2001) an ILP-based semantic parser.",
        "We also compared with the CCG-based semantic parser by Zettlemoyer et al.",
        "(2005), but their results are available only for the GEO880 corpus and their experimental set-up is also different from ours.",
        "Like KRISP, WASP and SCISSOR also give confidences to the MRs they generate which are used to plot precision-recall curves by measuring precisions and recalls at vari",
        "ous confidence levels.",
        "The results of the other systems are shown as points on the precision-recall graph."
      ]
    },
    {
      "heading": "4.2 Results",
      "text": [
        "Figure 6 shows the results on the CLANG corpus.",
        "KRISP performs better than either version of SILT and performs comparable to WASP.",
        "Although SCISSOR gives less precision at lower recall values, it gives much higher maximum recall.",
        "However, we note that SCISSOR requires more supervision for the training corpus in the form of semantically annotated syntactic parse trees for the training sentences.",
        "CHILL could not be run beyond 160 training examples because its Prolog implementation runs out of memory.",
        "For 160 training examples it gave 49.2% precision with 12.67% recall.",
        "Figure 7 shows the results on the GEOQUERY corpus.",
        "KRISP achieves higher precisions than WASP on this corpus.",
        "Overall, the results show that KRISP performs better than deterministic rule-based semantic parsers like CHILL and SILT and performs comparable to other statistical semantic parsers like WASP and SCISSOR."
      ]
    },
    {
      "heading": "4.3 Experiments with Other Natural Languages",
      "text": [
        "We have translations of a subset of the GEOQUERY corpus with 250 examples (GEO250 corpus) in",
        "three other natural languages: Spanish, Turkish and Japanese.",
        "Since KRISP’s learning algorithm does not use any natural language specific knowledge, it is directly applicable to other natural languages.",
        "Figure 8 shows that KRISP performs competently on other languages as well."
      ]
    },
    {
      "heading": "4.4 Experiments with Noisy NL Sentences",
      "text": [
        "Any real world application in which semantic parsers would be used to interpret natural language of a user is likely to face noise in the input.",
        "If the user is interacting through spontaneous speech and the input to the semantic parser is coming form the output of a speech recognition system then there are many ways in which noise could creep in the NL sentences: interjections (like um’s and ah’s), environment noise (like door slams, phone rings etc.",
        "), out-of-domain words, grammatically ill-formed utterances etc.",
        "(Zue and Glass, 2000).",
        "As opposed to the other systems, KRISP’s string-kernel-based semantic parsing does not use hard-matching rules and should be thus more flexible and robust to noise.",
        "We tested this hypothesis by running experiments on data which was artificially corrupted with simulated speech recognition errors.",
        "The interjections, environment noise etc.",
        "are likely to be recognized as real words by a speech recognizer.",
        "To simulate this, after every word in a sentence, with some probability Padd, an extra word is added which is chosen with probability proportional to its word frequency found in the British National Corpus (BNC), a good representative sample of English.",
        "A speech recognizer may sometimes completely fail to detect words, so with a probability of Pd,p a word is sometimes dropped.",
        "A speech recognizer could also introduce noise by confusing a word with a high frequency phonetically close word.",
        "We sim",
        "ulate this type of noise by substituting a word in the corpus by another word, w, with probability ped(w) * p(w), where p is a parameter, ed(w) is W’s edit distance (Levenshtein, 1966) from the original word and P(w) is w’s probability proportional to its word frequency.",
        "The edit distance which calculates closeness between words is character-based rather than based on phonetics, but this should not make a significant difference in the experimental results.",
        "Figure 9 shows the results on the CLANG corpus with increasing amounts of noise, from level 0 to level 4.",
        "The noise level 0 corresponds to no noise.",
        "The noise parameters, Padd and pdrop, were varied uniformly from being 0 at level 0 and 0.1 at level 4, and the parameter p was varied uniformly from being 0 at level 0 and 0.01 at level 4.",
        "We are showing the best F-measure (harmonic mean of precision and recall) for each system at different noise levels.",
        "As can be seen, KRISP’s performance degrades gracefully in the presence of noise while other systems’ performance degrade much faster, thus verifying our hypothesis.",
        "In this experiment, only the test sentences were corrupted, we get qualitatively similar results when both training and test sentences are corrupted.",
        "The results are also similar on the GEOQUERY corpus."
      ]
    },
    {
      "heading": "5 Conclusions",
      "text": [
        "We presented a new kernel-based approach to learn semantic parsers.",
        "SVM classifiers based on string subsequence kernels are trained for each of the productions in the meaning representation language.",
        "These classifiers are then used to compositionally build complete meaning representations of natural language sentences.",
        "We evaluated our system on two real-world corpora.",
        "The results showed that our system compares favorably to other existing systems and is particularly robust to noise."
      ]
    },
    {
      "heading": "Acknowledgments",
      "text": [
        "This research was supported by Defense Advanced Research Projects Agency under grant HR0011-04-1-0007."
      ]
    }
  ]
}
