{
  "info": {
    "authors": [
      "Juan-Miguel Vilar",
      "Enrique Vidal"
    ],
    "book": "Workshop on Building and Using Parallel Texts",
    "id": "acl-W05-0835",
    "title": "A Recursive Statistical Translation Model",
    "url": "https://aclweb.org/anthology/W05-0835",
    "year": 2005
  },
  "references": [
    "acl-C96-2141",
    "acl-J03-1002",
    "acl-J04-4002",
    "acl-J93-2003",
    "acl-J97-3002",
    "acl-P03-1019",
    "acl-W93-0301"
  ],
  "sections": [
    {
      "heading": "Abstract",
      "text": [
        "A new model for statistical translation is presented.",
        "A novel feature of this model is that the alignments it produces are hierarchically arranged.",
        "The generative process begins by splitting the input sentence in two parts.",
        "Each of the parts is translated by a recursive application of the model and the resulting translation are then concatenated.",
        "If the sentence is small enough, a simpler model (in our case IBM’s model 1) is applied.",
        "The training of the model is explained.",
        "Finally, the model is evaluated using the corpora from a large vocabulary shared task."
      ]
    },
    {
      "heading": "1 Introduction",
      "text": [
        "Suppose you were to find an English translation for a Spanish sentence.",
        "One possible approach is to assume that every English sentence is a candidate but that different English sentences have different probabilities of being the correct translation.",
        "Then, the translation task can be divided in two parts: define an adequate probability distribution that answers to the question “given this English sentence, which is the probability that it is a good translation of that Spanish sentence?”; and use that distribution in order to find the most likely translation of your input sentence.",
        "This approach is referred to as the statistical approach to machine translation.",
        "The usual approach is to define an statistical model and train its parameters from a training corpus consisting in pairs of sentences that are known to be translation of each other.",
        "Different models have been presented in the literature, see for instance (Brown et al., 1993; Och and Ney, 2004; Vidal et al., 1993; Vogel et al., 1996).",
        "Most of them rely on the concept of alignment: a mapping from words or groups of words in a sentence into words or groups in the other (in the case of (Vidal et al., 1993) the mapping goes from rules in a grammar for a language into rules of a grammar for the other language).",
        "This concept of alignment has been also used for tasks like authomatic vocabulary derivation and corpus alignment (Dagan et al., 1993).",
        "A new statistical model is proposed in this paper, which was initially introduced in (Vilar Torres, 1998).",
        "This model is designed so that the alignment between two sentences can be seen in an structured manner: each sentence is divided in two parts and they are put in correspondence; then each of those parts is similarly divided and related to its translation.",
        "This way, the alignment can be seen as a tree structure which aligns progressively smaller segments of the sentences.",
        "This recursive procedure gives its name to the model: MAR, which comes from “Modelo de Alineamiento Recursivo”, which is Spanish for “Recursive Alignment Model”.",
        "The rest of the paper is structured as follows: after a comment on previous works, we introduce the notation that we will use throughout the paper, then we briefly explain the model 1 from IBM, next we",
        "introduce our model, then we explain the process of parameter estimation, and how to use the model to translate new test sentences.",
        "Finally, we present some experiments and results, together with conclusions."
      ]
    },
    {
      "heading": "2 Previous works",
      "text": [
        "The initial formulation of the proposed model, including the training procedures, was presented in (Vilar Torres, 1998), along with preliminary experiments in a small translation task which provided encouraging results.",
        "This model shares some similarities with the stochastic inversion transduction grammars (SITG) presented by Wu in (Wu, 1997).",
        "The main point in common is the type of possible alignments considered in both models.",
        "Some of the properties of these alignments are studied in (Zens and Ney, 2003).",
        "However, the parametrizations of SITGs and the MAR are completely different.",
        "The generative process of SITGs produces simultaneously the input and output sentences and the parameters of the model refer to the rules of the nonterminals.",
        "This provides a symmetry to both input and output sentences.",
        "In contrast, our model clearly distinguishes the input and output sentences and the parameters are based on observable properties of the strings (their lengths and the words composing them).",
        "On the other hand, the MAR idea of splitting the sentences until a simple structure is found, also appears in the Divisive Clustering approach presented in (Deng et al., 2004).",
        "Again, the main difference lies in the probabilistic modeling of the alignments.",
        "In Divisive Clustering a uniform distribution on the alignments is assumed while MAR uses a explicit parametrization."
      ]
    },
    {
      "heading": "3 Some notation",
      "text": [
        "In the rest of the paper, we use the following notation.",
        "Sentences are taken as concatenations of symbols (words) and represented using a letter and a small bar, like in �x.",
        "The individual words are designed by the name of the sentence and a subindex indicating the position, so x� = x1x2 ... x,.",
        "The length of a sentence is indicated by I�xI.",
        "Segments of a sentence are denoted by �xji = xi ... xj .",
        "For the substrings of the form x��l we use the notation �x.i.",
        "Consistently, x� denotes the input sentence and y� its translation and both are assumed to have at least one word.",
        "The input and output vocabularies are X and Y, respectively.",
        "Finally, we assume that we are presentend a set M for training our models.",
        "The elements of this set are pairs (�x, �y) where y� is a possible translation for �x."
      ]
    },
    {
      "heading": "4 IBM’s model 1",
      "text": [
        "IBM’s model 1 is the simplest of a hierarchy of five statistical models introduced in (Brown et al., 1993).",
        "Each model of the hierarchy can be seen as a refinement of the previous ones.",
        "Although model 1, which we study here, relies on the concept of alignment, its formulation allows an interpretation of it as a relationship between multisets of words (the order of the words is irrelevant in the final formula).",
        "A word of warning is in order here.",
        "The model we are going to present has an important difference with the original: we do not use the empty word.",
        "This is a virtual word which does not belong to the vocabulary of the task and that is added to the beginning of each sentence in order to allow words in the output that cannot be justified by the words in the input.",
        "We have decided not to incorporate it because of the use we are going to make of the model.",
        "As we will see, model 1 is going to be used repeatedly over different substrings of the input sentence in order to analyze their contribution to the total translation.",
        "This means that we would have an empty word in each of these substrings.",
        "We have decided to avoid this “proliferation” of empty words.",
        "Future work may introduce the concept in a more appropriate way.",
        "The model 1 makes two assumptions.",
        "That a stochastic dictionary can be employed to model the probability that word y is the translation of word x and that all the words in the input sentence have the same weight in producing a word in the output.",
        "This leads to:",
        "Where t is the stochastic dictionary and a represents a table that relates the length of the alignment with the length of the input sentence (we assume that there is a finite range of possible lengths).",
        "This explicit relations between the lengths is not present in",
        "the original formulation of the model, but we prefer to include it so that the probabilities are adequately normalized.",
        "Clearly, this model is not adequate to describe complex translations in which complicated patterns and word order changes may appear.",
        "Nevertheless, this model can do a good job to describe the translation of short segments of texts.",
        "For example, it can be adequate to model the translation of the Spanish “gracias” into the English “thank you”."
      ]
    },
    {
      "heading": "5 A Recursive Alignment Model",
      "text": [
        "To overcome that limitation of the model we will take the following approach: if the sentence is complex enough, it will be divided in two and the two halves will be translated independently and joined later; if the sentence is simple, the model 1 will be used.",
        "Let us formalize this intuition for the generative model.",
        "We are given an input sentence x� and the first decission is whether x� is going to be translated by IBM’s model 1 or it is complex enough to be translated by MAR.",
        "In the second case, three steps are taken: a cut point of x� is defined, each of the resulting parts are translated, and the corresponding translations are concatenated.",
        "For the translation of the second step, the same process is recursively applied.",
        "The concatenation of the third step can be done in a “direct” way (the translation of the first part and then the translation of the second) or in an “inverse” way (the translation of the second part and then the translation of the first).",
        "The aim of this choice is to allow for the differences in word order between the input and ouput languages.",
        "So, we are proposing an alignment model in which IBM’s model 1 will account for translation of elementary segments or individual words while translation of larger and more complex segments or whole sentences will rely on a hierarchical alignment pattern in which model 1 alignments will be on the lowest level of the hierarchy.",
        "Following this discussion, the model can be formally described through a series of four random experiments:",
        "• The second is the choice of b, a cut point of �x.",
        "The segment �xb1 will be used to generate one of the parts of the translation, the segment �x.b+1 will generate the other.",
        "It takes values from 1 toI�xI�1.",
        "• The third is the decision about the order of the concatenation.",
        "It has two possible outcomes: D (for direct) and I (for inverse).",
        "• The fourth is the translation of each of the halves of �x.",
        "They take values in Y+.",
        "The translation probability can be approximated as follows:",
        "The value of pJ(�y I �x) corresponds to IBM’s model 1 (Equation 1).",
        "To derive pM(�yI �x), we observe that:",
        "Note that the probability that y� is generated from a pair (�y1, �y2) is 0 if y� =� �y1�y2 and 1 if y� = �y1�y2, so the last two lines can be rewritten as:",
        "• The first is the selection of the model.",
        "It has two possible outcomes: IBM and MAR, with obvious meanings.",
        "where pref (�y) is the set ofprefixes of �y.",
        "And finally:",
        "The number of parameters of this model is very large, so it is necessary to introduce some simplifications in it.",
        "The first one relates to the decision of the translation model: we assume that it can be done just on the basis of the length of the input sentence.",
        "That is, we cat set up two tables, MI and MM, so that",
        "Obviously, for any x� E X+, we will have MI (I�x I) + MM (I �x I) = 1.",
        "On the other hand, since it is not possible to break a one word sentence, we define MI(1) = 1.",
        "This restriction comes in the line mentioned before: the translation of longer sentences will be structured whereas shorter ones can be translated directly.",
        "In order to decide the cut point, we will assume that the probability of cutting the input sentence at a given position b is most influenced by the words around it: xb and xb+1.",
        "We use a table 13 such that:",
        "This can be interpreted as having a weight for each pair of words and normalizing these weights in each sentence in order to obtaing a proper probability distribution.",
        "Two more tables, DD and DI, are used to store the probabilities that the alignment be direct or inverse.",
        "As before, we assume that the decission can be made on the basis of the symbols around the cut point:",
        "Again, we have DD (xb, xb+1) + DI (xb, xb+1) = 1 for every pair of words (xb, xb+1) .",
        "Finally, a probability must be assigned to the translation of the two halves.",
        "Assuming that they are independent we can apply the model in a recursive manner:"
      ]
    },
    {
      "heading": "6 Parameter estimation",
      "text": [
        "Once the model is defined, it is necessary to find a way of estimating its parameters given a training corpus M. We will use maximun likelihood estimation.",
        "In our case, the likelihood of the sample corpus is:",
        "In order to maximize V, initial values are given to the parameters and they are reestimated using repeatedly Baum-Eagon’s (Baum and Eagon, 1967) and Gopalakrishnan’s (Gopalakrishnan et al., 1991) inequalities.",
        "Let P be a parameter of the model (except for those in 13) and let F(P) be its “family” (i.e. the set of parameters such that PQEF(P) Q _ 1).",
        "Then, a new value of P can be computed as follows:"
      ]
    },
    {
      "heading": "7 Some notes on efficiency",
      "text": [
        "Estimating the parameters as discussed above entails high computational costs: computing pT( y x) requires O(mn) arithmetic operations involving the values of pT( yji xk) for every possible value of i, j, k and l, which are O(m2n2).",
        "This results in a global cost of O(m3n3).",
        "On the other hand, computing a p costs as much as computing pT.",
        "So it is interesting to keep the number of computed derivatives low."
      ]
    },
    {
      "heading": "7.1 Reduction of the parameters to train",
      "text": [
        "In the experiments we have followed some heuristics in order not to reestimate certain parameters:",
        "• The values of MI – and, consequently, of Mm – for lengths higher than a threshold are assumed to be 0 and therefore there is no need to estimate them.",
        "QEF(P) above the same threshold, need not be reestimated.",
        "where",
        "are the “counts” of parameter P. This is correct as long as V is a polynomial in P. However, we have a problem for 13 since V is a rational function of these parameters.",
        "We can solve it by assuming, without lose of generality, that PX1,X2EX 13(x1, x2) _ 1.",
        "Then Gopalakrishnan’s inequality can be applied similarly and we get:",
        "where C is an adequate constant.",
        "Now it is easy to design a reestimation algorithm.",
        "The algorithm gives arbitrary initial values to the parameters (typically those corresponding to uniform probabilities), computes the counts of the parameters for the corpus and, using either (4) or (6), gets new values for the parameters.",
        "This cycle is repeated until a stopping criterion (in our case a prefixed number of iterations) is met.",
        "This algorithm can be seen in Figure 1",
        "• The values of t for pairs of words with counts under a certain threshold are not reestimated.",
        "Furthermore, during the computation of counts, the recursion is cut on those substring pairs where the value of the probability for the translation is very small."
      ]
    },
    {
      "heading": "7.2 Efficient computation of model 1",
      "text": [
        "Other source of optimization is the realization that for computing pT( y x), it is necessary to com-ute the value of for each possible air xie oe p pi P P ( ib,yob ) (where ib, ie, ob and oe stand for input begin, input end, output begin and output end, respectively).",
        "Fortunately, it is possible to accelerate this computations.",
        "First, define:"
      ]
    },
    {
      "heading": "Algorithm Maximum likelihood estimation",
      "text": [
        "give initial values to the parameters; repeat initialize the counts to 0;",
        "until the stopping criterion is met;",
        "This leads to",
        "if ob =� oe.",
        "So we can compute all values of I with the algorithm in Figure 2."
      ]
    },
    {
      "heading": "7.3 Splitting the corpora",
      "text": [
        "Another way of reducing the costs of training has been the use of a heuristic to split long sentences into smaller parts with a length less than l words.",
        "Suppose we are to split sentences x� and �y.",
        "We begin by aligning each word in y� to a word in �x.",
        "Then, a score and a translation is assigned to each substring �xz with a length below l. The translation is produced by looking for the substring of y� which has a length below l and which has the largest number of words aligned to positions between i and j.",
        "The pair so obtained is given a score equal to sum of: (a) the square of the length of �xz ; (b) the square of the number of words in the output aligned to the input; and (c) minus ten times the sum of the square of the number of words aligned to a nonempty position out of �xz and the number of words outside the segment chosen that are aligned to �xz .",
        "After the segments of x� are so scored, the partition of x� that maximizes the sum of scores is computed by dynamic programming."
      ]
    },
    {
      "heading": "8 Translating the test sentences",
      "text": [
        "The MAR model can be used to obtain adequate bilingual templates which can be used to translate new test sentences using an appropriate template-based translation system.",
        "Here we have adopted the pharaoh program (Koehn, 2004)."
      ]
    },
    {
      "heading": "8.1 Finding the templates",
      "text": [
        "The parameters of the MAR were trained using the algorithm above: first ten IBM model 1 iterations were used for giving initial values to the dictionary probabilities and then five more iterations for retraining the dictionary together with the rest of the parameters.",
        "The alignment of a pair has the form of a tree similar to the one in Figure 3 (this is one of the sentences from the Spanish-English part of the training corpus).",
        "Each interior node has two children corresponding to the translation of the two parts in which the input sentence is divided.",
        "The leaves of the tree correspond to those segments that were translated by model 1.",
        "The templates generated were those defined by the leaves.",
        "Further templates were obtained by interpreting each pair of words in the dictionary as a template.",
        "Each template was assigned four weights1 in order to use the pharaoh program.",
        "For the templates obtained from the alignments, the first weight was the probability assigned to it by MAR, the second weight was the count for the template, i.e., the number of times that template was found in the corpus, the third weight was the normalized count, i.e., the number of times the template appeared in the corpus divided by the number of times the input part was present in the corpus, finally, the fourth weight was a small constant (10-30).",
        "The intention of this last weight was to ease the combination with the templates from the dictionary.",
        "For these, the first three weights were assigned the same small constant and the fourth was the probability of the translation of the pair obtained from the stochastic dictionary.",
        "This weighting schema allowed to separate the influence of the dictionary in smoothing the templates."
      ]
    },
    {
      "heading": "9 Experiments",
      "text": [
        "In order to test the model, we have decided to participate in the shared task for this workshop."
      ]
    },
    {
      "heading": "9.1 The task",
      "text": [
        "The aim of the task was to translate a set of 2,000 sentences from German, Spanish, Finnish and French into English.",
        "Those sentences were extracted from the Europarl corpus (Koehn, Unpublished).",
        "As training material, four different corpora were provided, one for each language pair, comprising around 700 000 sentence pairs each.",
        "Some details about these corpora can be seen in Table 1.",
        "An automatic alignment for each corpus was also provided.",
        "The original sentence pairs were splitted using the techniques discussed in section 7.3.",
        "The total number of sentences after the split is presented in Table 2.",
        "Two different alignments were used: (a) the one provided in the definition of the task and (b) one obtained using GIZA++ (Och and Ney, 2003) to train an IBM’s model 4.",
        "As it can be seen, the number of parts is very similar in both cases.",
        "The",
        "pair: “Alignment” shows the number of templates derived from the alignments; “dictionary”, those obtained from the dictionary; and “total” is the sum.",
        "(a) Using the alignments provided with the task.",
        "number of pairs after splitting is roughly three times the original.",
        "Templates were extracted as described in section 8.1.",
        "The number of templates we obtained can be seen in Table 3.",
        "Again, the influence of the type of alignment was small.",
        "Except for Finnish, the number of dictionary templates was roughly two thirds of the templates extracted from the alignments."
      ]
    },
    {
      "heading": "9.2 Obtaining the translations",
      "text": [
        "Once the templates were obtained, the development corpora were used to search for adequate values of Table 4: Best weights for each language pair.",
        "The columns are for the probability given by the model, the counts of the templates, the normalized counts and the weight given to the dictionary.",
        "(a) Using the alignments provided with the task.",
        "the weights that pharaoh uses for each template (these are the weights passed to option weight-t, the other weights were not changed as an initial exploration seemed to indicate that they had little impact).",
        "As expected, the best weights differed between language pairs.",
        "The values can be seen in table 4.",
        "It is interesting to note that the probabilities assigned by the model to the templates seemed to be better not taken into account.",
        "The most important feature was the counts of the templates, which sometimes were helped by the use of the dictionary, although that effect was small.",
        "Normalization of counts also had little impact."
      ]
    },
    {
      "heading": "10 Results and discussion",
      "text": [
        "The results over the test sets can be seen in Table 5.",
        "It can be seen that, except for French, the influence of the initial alignment is very small.",
        "Also, the best results are obtained for Spanish and French, which are more similar to English that German or Finnish.",
        "There are still many open questions that deserve more experimentation.",
        "The first is the influence of the split of the original corpora.",
        "Although the similarity of results seem to indicate that it has little influence, this has to be tested.",
        "Two more relevant aspects are whether the weighting schema is the best for the decoder.",
        "In particular, it is surprising that the normalization of counts had so little effect.",
        "Finally, the average number of words per template is below two, which probably is too low.",
        "It is interesting to find alternate ways of obtaining the templates, for instance using internal nodes up to a given height or covering portions of the sentences up to a predefined number of words."
      ]
    },
    {
      "heading": "11 Conclusions",
      "text": [
        "A new translation model has been presented.",
        "This model produces translations in a recursive way: the input sentence is divided in two parts, each is translated using the same procedure recursively and the translations are concatenated.",
        "The model has been used for finding the templates in a large vocabulary translation task.",
        "This involved using several heuristics to improve training time, including a method for splitting the input before training the models.",
        "Finally, the influence of using a stochastic dictionary together with the templates as a means of smoothing has been explored."
      ]
    }
  ]
}
