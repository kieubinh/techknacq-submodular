{
  "info": {
    "authors": [
      "Bo Pang",
      "Sujith Ravi"
    ],
    "book": "EMNLP",
    "id": "acl-D12-1136",
    "title": "Revisiting the Predictability of Language: Response Completion in Social Media",
    "url": "https://aclweb.org/anthology/D12-1136",
    "year": 2012
  },
  "references": [
    "acl-D11-1054",
    "acl-J92-1002",
    "acl-N03-2003",
    "acl-P05-1018"
  ],
  "sections": [
    {
      "heading": "Abstract",
      "text": [
        "The question ?how predictable is English??",
        "has long fascinated researchers.",
        "While prior work has focused on formal English typically used in news articles, we turn to texts generated by users in online settings that are more informal in nature.",
        "We are motivated by a novel application scenario: given the difficulty of typing on mobile devices, can we help reduce typing effort with message completion, especially in conversational settings?",
        "We propose a method for automatic response completion.",
        "Our approach models both the language used in responses and the specific context provided by the original message.",
        "Our experimental results on a large-scale dataset show that both components help reduce typing effort.",
        "We also perform an information-theoretic study in this setting and examine the entropy of user-generated content, especially in conversational scenarios, to better understand predictability of user generated English."
      ]
    },
    {
      "heading": "1 Introduction",
      "text": [
        "How predictable is language?",
        "As early as 1951, long before large quantities of texts (or the means to process them) were easily available, Shannon had raised this question and proceeded to answer it with a set of clever analytical estimations.",
        "He studied the predictability of printed English, or ?how well can the next letter of a text be predicted when the preceding N letters are known?",
        "(Shannon, 1951).",
        "This was quantified as the conditional entropy, which measures the amount of information conveyed from statistics over the preceding context.",
        "In this paper, we discuss a novel application setting which mirrors the predictability study as defined by Shannon.",
        "using Google?",
        "box on a browser, as well as the search box in Amazon and Netflix.",
        "Text completion for user-generated texts: Consider a user who is chatting with her contact or posting to a social media site using a mobile device.",
        "If we can predict the next word given the preceding words that were already typed in, we can help reduce the typing cost by offering users suggestions of possible completions of their partially typed messages (e.g., in a drop-down list).",
        "If the intended word is ranked reasonably high, the user can select the word instead of typing it.",
        "Assuming a lower cost associated with selections, this could lead to less typing effort for the user.",
        "An interface like this would be quite familiar to Web users today.",
        "Providing suggestions of possible completions to partially typed queries, which we will refer to as query completion,1 is a common feature of search boxes (Figure 1).",
        "In spite of the similarity in the interface, the underlying technical challenge can be quite different.",
        "Query completion does not necessarily rely on language models: can-1Note that this feature is often tagged as ?query suggestion?",
        "in the user interface; we avoid that terminology since it is often used to refer to query reformulation (of a completely entered query) in the literature, which is a very different task.",
        "didate completions can be limited to popular queries that were previously submitted to the site or entries in a closed database of available objects, and ranking can be done by overall popularity.",
        "In contrast, our scenario requires generation of unseen texts.",
        "Given the difficulty of generating full-length text, we consider a more realistic setting, where we perform completion on a word-by-word basis.",
        "Each time, we propose candidate completions at the word-level when the user is about to start a new word, or has partially entered the first few letters; once this word is successfully completed, we move on to the next one.",
        "This predict-verify-predict process exactly mirrors the human experiment described by Shannon (1951), except we do this at the word-level rather than the letter-level: having the user examine and verify predictions at the letter level would not be a practical solution for the intended application.",
        "The response completion task: In addition, our task has another interesting difference from Shannon's human experiment.",
        "Consider the mobile-device user mentioned previously.",
        "If the user is replying to a piece of text (e.g., an instant message sent by a contact), we have an additional source of contextual information in the stimulus, or the text which triggered the response that the user is trying to type.",
        "Can we learn from previously observed stimulus-response pairs (which we will refer to as exchanges)?",
        "That is, can we take advantage of this conversational setting and effectively use the information provided by stimulus to better predict the next word in the response?",
        "We refer to this task as the response completion task.",
        "Our task is different from ?chatter-bots?",
        "(Weizen-baum, 1966), where the goal is to generate a response to an input that would resemble a human conversation partner.",
        "Instead, we want to complete a response as the replier intends to.",
        "Recently, Ritter et.",
        "al (2011) experimented with automatic response generation in social media.",
        "They had a similar conversational setting, but instead of completion based on partial input, they attempted to generate a response in its entirety given only the stimulus.",
        "While many of the generated responses are deemed possible replies to the stimulus, they have a low chance of actually matching the real response given by the user: they reported BLEU scores between 0 and 2 for various systems.",
        "This clearly shows the difficulty of the task.",
        "While we are addressing a more modest setting, would the problem prove to be too difficult even in this case?",
        "In this paper, we propose a method for automatic response completion.",
        "Our approach models the generic language used in responses, as well as the contextual information provided by the stimulus.",
        "We construct a large-scale dataset of user-generated textual exchanges, and our experimental results show that both components help reduce typing effort.",
        "In addition, to better understand predictability of user generated English, we perform an information-theoretic study in this conversational setting to investigate the entropy of user-generated content."
      ]
    },
    {
      "heading": "2 Related work",
      "text": [
        "There has been previous work in the area of human-computer interaction that examined text entry for mobile devices (MacKenzie and Soukoreff, 2002).",
        "In particular, one line of work looked into predictive text input, which examined input effort reduction by language prediction.",
        "Previous work in predictive text input had very different focus from our study.",
        "Oftentimes, the focus was to model actual typing efforts using mobile device keypads, examine the speed and cognitive load of different input methods, and evaluate with emprical user studies in lab settings (James and Reischel, 2001; How and Kan, 2005), where the underlying technique for language prediction can be as simple as unigram frequency (James and Reischel, 2001), or restricted to narrow domains such as grocery shopping lists (Nurmi et al., 2009).",
        "In addition, to the best of our knowledge, no previous work in predictive text input addressed the conversationl setting.",
        "As discussed in Section 1, the response generation task (Ritter et al. 2011) also considered the con-verstational setting, but the MT-based technique was not well-suited to produce responses as intended by the user.",
        "There has been extensive previous research in language modeling (Rosenfeld, 2000).",
        "While previous work has explored Web text sources that are ?better matched to a conversational speaking style?",
        "(Bulyko et al. 2003), we are not aware of much previous work that has taken advantage of information in the stimulus for word predictions in responses.",
        "Previous work on entropy of language stems from the field of information theory (Shannon, 1948), starting with Shannon (1951).",
        "An extensive bibliography covering early related work (e.g., insights into the structure of language via information theory, entropy estimates via other techniques and/or for different languages, as well as a broad range of applications of such estimates) can be found in (Cover and King, 1978).",
        "More recently, Brown et.",
        "al (1992) computed an upper bound for the entropy of English with a trigram model, using the Brown corpus.",
        "Some other related works on this topic include (Tea-han and Cleary, 1996; Moradi et al. 1998).",
        "There was also a recent study using entropy in the context of Web search (Mei and Church, 2008).",
        "In other settings, entropy has also been employed as a tool for studying the linguistic properties of ancient scripts (e.g., Indus Script) (Rao et al. 2009).",
        "While this seems like an interesting application of information theory for linguistic studies, it has also generated some controversies (Farmer et al. 2004).",
        "In contrast, our work departs from traditional scenarios significantly.",
        "We perform entropy studies over texts generated in online settings which are more informal in nature.",
        "Additionally, we utilize the properties of language predictability within a novel application for automatically completing responses in conversational settings.",
        "Also, in our case we do not have to worry about issues like ?is this a language or not??",
        "because we work with real English news data which include articles written by professional editors and comments generated by users reading those articles."
      ]
    },
    {
      "heading": "3 Model",
      "text": [
        "In this section, we first state our problem more formally, followed by descriptions of the basicN gram language model we use, as well as two approaches that model both stimulus and preceding words in response as the context for the next-word generation.",
        "Given the intended application, we hope to achieve better prediction without incurring significant increase in model size."
      ]
    },
    {
      "heading": "3.1 Problem definition",
      "text": [
        "Consider a stimulus-response pair, where the stimulus is a sequence of tokens s = (s1, s2, ..., sm), and the response is a sequence of tokens r = (r1, r2, ..., rn).",
        "Let r1..i = (r1, r2, ..., ri), our task is to generate and rank candidates for ri+1 given s and r1..i.",
        "Note the models described in this section do not assume any knowledge of partial input for ri+1.",
        "For the setting where the first c characters of ri+1 were also entered, we can restrict the candidate list to the subset with the matching prefix, and use the same ranking function."
      ]
    },
    {
      "heading": "3.2 Generic Response Language Model",
      "text": [
        "First, we consider an N gram language model trained on all responses in the training data as our generic response language model.",
        "Here we consider N = 3.",
        "Normally, trigram models use back-off to both bigrams and unigrams; in order to compare the effectiveness of trigram models vs. bigram models under comparable model size, we use back-off only to unigrams in both cases:",
        "If we ignore the context provided by texts in the stimulus, we can simply generate and rank candidate words from the dictionary according to the generic response LM: P (ri+1 |r1..i).",
        "As we will discuss in more detail in Section 6.2, modeling s and r1..i jointly in the prediction of ri+1 would be rather expensive.",
        "In the following sections, we follow two main approaches to break this down into separate components: P (ri+1 |r1..i) and P (ri+1 |s), and model each one separately."
      ]
    },
    {
      "heading": "3.3 Translating Stimuli to Responses",
      "text": [
        "As mentioned in Section 1, Ritter et.",
        "al (2011) have considered a related task of generating a response in its entirety given only the text in the stimulus.",
        "They cast the problem as a translation task, where the stimulus is considered as the source language and the response is considered as the target language.",
        "We can adapt this approach for our response completion task.",
        "Consider the noisy channel model used in statistical machine translation: P (r|s) ?",
        "P (r)?P (s|r).",
        "In",
        "order to predict ri+1 given r1..i and s, for each candidate ri+1, in principle one can marginalize over all possible completions of r1..i+1, and rank candidate ri+1 by that.",
        "That is, let P(n) be the distribution of response length, let r?",
        "be a possible completion of r1..i+1 (i.e., a response whose first i + 1 tokens match r1..i+1).",
        "For each possible n > i, we need to marginalize over all possible r?",
        "of length n, and rank ri+1 according to",
        "Clearly this will be computationally expensive.",
        "Instead, we take a greedy approach, and choose ri+1 which yields the optimal partial response (without looking ahead): P (r1..i+1 |s) ?",
        "P (r1..i+1) ?",
        "P (s |r1..i+1) which is equivalent to ranking candidate ri+1 by",
        "Since the first component is our LM model, and the second component is a translation model, we denote this as the LM+TM model.",
        "We use IBM Model-1 to learn the translation table on the training data.",
        "At test time, equal number of candidates are generated by each component, and combined to be ranked by Eq.",
        "1."
      ]
    },
    {
      "heading": "3.4 Mixture Model",
      "text": [
        "One potential concern over applying the translation model is that the response can often contain novel information not implied by the stimulus.",
        "While technically this could be generated from the so-called null token used in machine translation (added to the source text to account for target text with no clear alignment in the source text), significant amount of text corresponding to new information not in the source text is not what null tokens are meant to be capturing.",
        "In general, our problem here is a lack of clear word-to-word or phrase-to-phrase mapping in a stimulus-response pair, at least not what one would expect in clean parallel data.",
        "Alternatively, one can model the response generation process with a mixture model: with probability ?s, we generate a word according to a distribution over s (P (w |s)), and with probability 1 ?",
        "?s, we generate a word using the response language model:",
        "(2) We examine two concrete ways of exploiting the context provided by s. Model 1 ?",
        "LM + Selection model First, we examine a very simple instantiation of P (w |s) where we select a token in s uniformly at random.",
        "This is based on the intuition that to be semantically coherent, a reply often needs to repeat certain content words in the stimulus.",
        "(Similar intuition has been explored in the context of text coherency (Barzilay and Lapata, 2005).)",
        "This is particularly useful for words that are less frequently used: they may not be able to receive enough statistics to be promoted otherwise.",
        "More specifically,",
        "We can take 's to be a constant ?select, which can be estimated in the training data as the probability of a response token being a repetition of a token in the corresponding stimulus.",
        "Model 2 ?",
        "LM + Topic model Another way to incorporate information provided in s is to use it to constrict the topic in r. We can learn a topic model over conversations in the training data using Latent Dirchlet Allocation (LDA) (Blei et al. 2003).",
        "At test time, we identify the most likely topic of the conversation based on s, and expect ri+1 to be generated from this topic.",
        "That is,",
        "where t?",
        "= argmaxtP (topic = t |s) More specifically, we first train a topic model on (s, r) pairs from the training data.",
        "Given a new stimulus s, we then select the highest ranked topic as being representative of s. Note that alternatively we could consider all possible topic assignments; in that case we would have had to sum probabilities over all topics, and that could also introduce noise.",
        "A similar strategy has been previously employed for",
        "other topic modeling applications in information retrieval, where documents are smoothed with their highest ranked topic (Yi and Allan, 2009).",
        "We lower the weight 's if P (t?",
        "|s) is low.",
        "That is, we use 's = ?topic ?",
        "P (t?",
        "|s) in Eq.",
        "2."
      ]
    },
    {
      "heading": "4 Data",
      "text": [
        "In order to investigate text completion in a conversational setting, we need to construct a large-scale dataset with textual exchanges among users.",
        "An ideal dataset would have been a collection of instant messages, but these type of datasets are difficult to obtain given privacy concerns.",
        "To the best of our knowledge, existing SMS (short message service) datasets only contain isolated text spans and do not provide enough information to reconstruct the conversations.",
        "There are, however, a high volume of textual exchanges taking places in public forums.",
        "Many sites with a user comment environment allow other users to reply to existing comments, where the original comment and its reply can form a (stimulus, response) pair for our purposes.",
        "To this end, we extracted (comment, reply) pairs from Yahoo!",
        "News2, where under each news article, a user can post a new comment or reply to an existing comment.",
        "In fact, a popular comment can have a long thread of replies where multi-party discussions take place.",
        "To ensure the reply is a direct response to the original comment, we took only the first reply to a comment, and consider the resulting pair as a textual exchange in the form of a (stimulus, response) pair.",
        "We gathered data from a period of 14 weeks between March and May, 2011.",
        "A random sample yielded a total of 1,487,995 exchanges, representing 237,040 unique users posting responses to stimuli comments authored by 357,811 users.",
        "In the raw dataset (i.e., before tokenization), stimuli average at 59 tokens (332 characters), and responses average at 26 tokens (144 characters).",
        "We took the first 12 weeks of data as training data (1,269,732 exchanges) and the rest 2 weeks of data as test data (218,263 exchanges).",
        "2Note that previous work has used a dataset with 1 million Twitter conversations extracted from a scraping of the site (Ritter et al. 2011), where a status update and its replies in Twitter form ?conversations?.",
        "This dataset is no longer publicly available.",
        "At the time of this writing, we were not able to identify a data source to reconstruct a dataset like that."
      ]
    },
    {
      "heading": "5 Experiments",
      "text": []
    },
    {
      "heading": "5.1 Evaluation measures",
      "text": [
        "Recall@k : Here, we follow a standard evaluation strategy used to assess ranking quality in information retrieval applications.",
        "For each word, we check if the correct answer is one of the top-k tokens being suggested.",
        "We then compute the recall at different values of k. While this is a straightforward measure to assess the overall quality of different top-k lists, it is not tailored to suit our specific task of response completion.",
        "In particular, this measure (a) does not distinguish between (typing) savings for a short word versus a long one, and (b) does not distinguish between the correct answer being higher up in the list versus lower as long as the word is present in the top-k list.",
        "TypRed : Our main evaluation measure is based on ?reduction in typing effort for a user of the system?, which is a more informative measure for our task.",
        "We estimate the typing reduction via a hypothetical typing model3 in the following manner: Suppose we show top k predictions for a given setting.",
        "Now, there are two possible scenarios: 1. if the user does not find the correct answer in the top-k list, he/she gives up on this word and will have to type the entire word.",
        "The typing cost is then estimated to be the number of characters in the word lw; 2. if the user spots the correct answer in the list, the cost for choosing the word is proportional to the rank of the word rankw, with a fixed cost ratio c0.",
        "Suppose the user scrolls down the list using the down-arrow (?)",
        "to reach the intended word (instead of typing), then rankw ?",
        "c0 reflects the scrolling effort required, where c0 is the relative cost of scrolling down versus typing a character.",
        "In general, pressing a fixed key can have a lower cost than typing a new one, in addition, we can imagine a virtual keyboard where navigational keys occupy bigger real-estate, and thus incur less cost to press.",
        "As a result, it's reasonable to assume c0 value that is smaller than 1.",
        "In all our experiments,",
        "System TypRed (c = 0) TypRed (c = 1) TypRed (c = 2) 1.",
        "Generic Response LM (trigram) 15.10 22.57 14.29 2.",
        "Generic Response LM (trigram) + TM 9.03 17.53 11.56 3.",
        "Mixture Model 1: 15.18?",
        "23.43?",
        "15.13?",
        "Generic Response LM (trigram) + Selection 4.",
        "Mixture Model 2: 15.10 22.57 14.33 Generic Response LM (trigram) + Topic Model",
        "pairs from a large test collection (218,263 exchanges) when the first c characters of each word are typed in by the user.",
        "A higher score indicates better performance.",
        "?",
        "indicates statistical significance (p < 0.05) over the baseline score.",
        "typing model assumes a user selects the intended word using an interface that is similar to a mousing device, the cost may increase with rankw at a sub-linear rate; in that case, our measure will be overestimating the cost.",
        "In order to have a consistent measure that always improves as the ranking improves, we assume a clever user who will choose to finish the word by typing or by selecting, depending on which cost is lower.",
        "Combining these two cases under the clever-user model, we estimate the reduction in typing cost for every word as follows:",
        "where w is the correct word, lw is the length of w, and rankw is the rank of w in the top-k list.",
        "A higher value of TypRed implies higher savings achieved in typing cost and thereby better prediction performance."
      ]
    },
    {
      "heading": "5.2 Experimental setup",
      "text": [
        "We run experiments using the models described in Section 3 under two different settings: (1) previous words from the response are provided, and (2) previous words from response + first c characters of the current word are provided.",
        "During the candidate generation phase, for every position in the response message we present the top 1,000 candidates (as scored by the generic response language model or mixture models).",
        "We reserve a small subset of (?1,000) exchanges as development data for tuning parameters from our models.",
        "For the generic response language models, we set the interpolation weight ?1 = 0.9.",
        "For the selection-based mixture model, we estimate the mixture weights on the training data and set ?select (0.09).",
        "For the topic-based mixture model, we ran a grid search with different parameter settings for ?topic on the held-out development set and chose the value (0.01) that gave the best performance (in terms of TypRed)."
      ]
    },
    {
      "heading": "5.3 Results",
      "text": [
        "Previous words from response observed: We first present results for the setting where only previous words from the response are provided as context.",
        "We use TypRed scores as our evaluation measure here (higher TypRed implies more savings in typing effort).",
        "Even with a unigram LM we achieve a small but non-negligible reduction (TypRed=2.15) in the typing cost.",
        "But a bigram LM significantly improves performance (TypRed=11.91), and with trigram LM we observe even better performance (TypRed=15.10).",
        "Since the trigram LM yields a high performance, we set this as our default LM for all other models.",
        "Recall that in all experiments, we set c0, the cost ratio of selecting a candidate from the ranked top-k list (via scrolling) versus typing a character to a value of 0.5.",
        "But we also experimented with a hypothetical setting where c0 = 1 and noticed that the trigram LM achieves a slightly lower but still significant typing reduction (TypRed score of 9.58 versus 15.10 for the earlier case).",
        "The first column of Table 1 (c = 0) compares the performance of other models for this setting.",
        "We find that adding a translation model (LM+TM) does not help for this task; in fact, it results in lower scores than using the LM alone.",
        "This suggests that a translation-based generative approach may not be suitable, if the goal is to predict text as intended by the user.",
        "This is consistent with previous observations on a related task (Ritter et al. 2011), as we",
        "discussed in Section 1.",
        "In contrast, the mixture models do much better.",
        "In fact, LM+Selection model produces better results than trigram LM alone.",
        "We also note that estimating the mixture parameter on the training data rather than using a fixed value increases TypRed scores: 14.02 with a fixed ?select = 0.5 versus 15.18 with ?",
        "?select = 0.09.",
        "This comparison also holds for c > 0 ?",
        "that is, a naive version of LM+Selection that selects a word from the stimulus whenever the prefix allows would not have worked well.",
        "In principle the LM+Topic model is potentially more powerful in that P (w |s) is not limited to the words in s. However, in our experiments it does not yield any considerable improvement over the original LM.",
        "We postulate that this could be due to the following reason: once the context provided by s is reduced to the topic level, it is not specific enough to provide additional information over pro-ceding words in the response.",
        "Previous words from response + first c characters of current word observed: Table 1 also compares the TypRed performance of all the models under settings where c > 0.",
        "We notice striking improvements in performance for c = 1 which is consistent across all models.",
        "Our best model is able to save the user approximately 23% in terms of typing effort (according to TypRed scores).",
        "Interestingly a lot less reduction was observed for c = 2: the second character, on average, does not improve the ranking enough to justify the cost of typing this extra character.",
        "Next, we pick our best model (Mixture Model 1) and perform some further analysis.",
        "We examine the effect of providing longer list (shown in Table 2) and notice little further improvement beyond k = 10.",
        "We also note that the TypRed improvement achieved over the baseline (LM) model at rank 10 is more than twice the gain achieved at rank 5.",
        "We also evaluated its performance using a standard measure (Recall@k).",
        "Figure 2 plots the recall achieved by the system at different ranks k. An increasing recall at even high ranks (k = 100) suggests that the quality of the candidate list retrieved by this model is good.",
        "This also suggests that there is still room for improvements, and we leave that as interesting future work.",
        "of characters) for Mixture Model 1 when the first c characters of the word is typed in by the user.",
        "Finally, in Figure 3, we plot the average TypRed scores against individual token (word) length.",
        "Figure 3 indicates that the model is able to achieve a higher reduction for shorter words compared to very long ones.",
        "This demonstrates the utility of such a response completion system, especially since shorter words are predominant in conversational settings.",
        "We also compared the average reduction achieved on messages of different lengths (number of words).",
        "Overall we observe consistent reduction for different message lengths.",
        "This suggests our system can",
        "topics generated by the LDA topic model trained on news comment data.",
        "be useful for both Tweet-like short messages as well as more lengthy exchanges in detailed discussions."
      ]
    },
    {
      "heading": "5.4 Discussion",
      "text": [
        "Table 3 displays some sample translations learned using the TM model described in Section 3.3.",
        "Interestingly, emoticons and informal expressions like :) or lmao in the stimulus tend to evoke similar type of expressions in the response (as seen in Table 3).",
        "Some translations (e.g., feeling?",
        "better) are indicative of question/answer type of exchanges in our data.",
        "But most of the other translations are noisy or uninformative (e.g., Are?",
        ".).",
        "This provides further evidence as to why a translation-based approach is not well suited for this particular task and hence does not perform as well as other methods.",
        "Finally, in Table 4, we provide a few sample topics generated by the LDA topic model (which is used by Mixture Model 2 described in Section 3.4).",
        "We find that while a few topics display some semantic coherence (e.g., political figures), many of them are noisy (or too generic) which further supports our earlier observation that they are not useful enough to help in the prediction task.",
        "6 Entropy of user comments We adapt the notion of predictability of English as examined by Shannon (1951) from letter-prediction to token-prediction, and define the predictability of English as how well can the next token be predicted when the precedingN tokens are known.",
        "How much does the immediate context in the response help reduce the uncertainty?",
        "How does user-generated content compare with more formal English in this respect?",
        "And how about the corresponding stimuli ?",
        "given the preceding N tokens, does the knowledge of stimulus further reduce the uncertainty?",
        "These questions motivated a series of studies over entropy in different datasets.4"
      ]
    },
    {
      "heading": "6.1 Comparison of N gram entropy",
      "text": [
        "Following Shannon (1951), we consider the following function FN , which can be called the N gram entropy, as the measure of predictability:",
        "p(bi, j) log2 p(j |bi) where bi is a block of N ?",
        "1 tokens, j is an arbitrary token following bi, and p(j |bi) is the conditional probability of j given bi.",
        "This conditional entropy reflects how much is the uncertainty of the next token reduced by knowing the precedingN?1 tokens.",
        "Under this measure, is user-generated content more predictable or less predictable than the more formal ?printed?",
        "English examined by Shannon?",
        "Maybe it is more predictable, since most users in informal settings use simpler English, which may contain fewer variations than the complex structures observed in more formal English.",
        "Or perhaps it is less predictable ?",
        "variations among different users (who may not follow proper grammar) may lead to more uncertainty in the prediction of ?the next word?.",
        "Which would be the case?",
        "To answer this question empirically, we construct a reference dataset written in more formal English (Df ) to be compared against the user comments dataset described in Section 4 (Du).",
        "If Df covers very different topics fromDu, then even if we do observe differences in entropy, it could be due to topi",
        "split, in this section, we focus on the variability of language usage in a corpus.",
        "This also avoids having to control for ?comparable?",
        "training/test splits in different types of datasets.",
        "the Brown Corpus (Kucera and Francis, 1967) may not be ideal in this sense (e.g., it contains fiction categories such as ?Romance and Love Story?, which may not be represented in our Du).",
        "Instead, we obtained a sample of news articles on Yahoo!",
        "News during March - May, 2011, and extracted unique sentences from these articles.",
        "This yields a Df with more comparable subject matters to Du.5 Next, we compare both the entropy over unigrams and N gram entropy in three datasets: the news article dataset described above, and comments data (Section 4) separated into stimuli and responses.",
        "We also report corresponding numbers computed on the Brown Corpus as references.",
        "Note that datasets with different vocabulary size can lead to different entropy: the entropy of picking a word from the vocabulary uniformly at random would have been different.",
        "Thus, we sample each dataset at different rates, and plot the (conditional) entropy in the sample against the corresponding vocabulary size.",
        "As shown in Figure 4(a), the entropy of unigrams in Du (both stimuli and responses) is consistently lower than in Df .6 On the other hand, both stimuli and responses exhibit higher uncertainty in bigram entropy (Figure 4(b)) and trigram entropy (Figure 4(c)).",
        "That is, when no contexts are provided, word choices (from similarly-sized vocabularies) in Df is more evenly distributed than in Du; but once the proceeding words are given, the next word is more predictable in Df than in Du.",
        "We postulate that the difference in unigram entropy could be due to (a) more balanced topic coverage in Df vs. more skewed topic coverage in Du, or (b) professional reporters mastering a more balanced use of the vocabulary.",
        "If (b) is the main reason, however, the lower trigram entropy in Df would seem unexpected ?",
        "shouldn't professional journalists also have a more balanced use of different phrases?",
        "Upon further contemplation, what we hypothesized earlier could be true: professional writers use the ?proper?",
        "English expected in news coverage, which could limit",
        "glish to be 11.82 bits per word, due to an incorrect calculation of a 8727-word vocabulary given Zipf distribution.",
        "The correct number should be 9.27 bits per word for a vocabulary size of",
        "their trigram uncertainties; on the other hand, users are not bound by conventions (or even grammars), which could lead to higher variations.",
        "Interestingly, distributions in the stimulus dataset are closer to news articles: they have a higher unigram entropy than responses, but a lower trigram entropy at comparable vocabulary sizes.",
        "In particular, recall from Section 4 that our comments dataset contains roughly 237K repliers and 357K original com",
        "menters.",
        "If higher trigram entropy is due to variance among different users, the stimulus dataset should have had a higher trigram entropy.",
        "We leave an explanation of this interesting behavior as future work."
      ]
    },
    {
      "heading": "6.2 Information in stimuli",
      "text": [
        "We now examine the next question: does knowing words in the stimulus further reduce the uncertainty of the next word in the response?",
        "For simplicity, we model the stimulus as a collection of unigrams.",
        "Consider the following conditional entropy:",
        "p(bi, j, sk) log2 p(j |bi, sk) where bi is a block of N ?",
        "1 tokens in a response r, j is an arbitrary token following bi, and skis an arbitrary token in the corresponding stimulus s for r. Note that for each bi, we consider every token in the corresponding s. That is, a (stimulus, response) pair withm and n tokens respectively generatesm?(n?",
        "N +1) observations of (bi, j, sk) tuples.",
        "We refer to this as the N -gram+stimulus entropy.",
        "If knowing skin addition to bi does not provide extra information, then p(j |bi, sk) = p(j |bi), and GN = FN .",
        "Figure 5 plots GN for N = 2.",
        "Interestingly, we observe F2 > G2 > F3 (this trend holds for larger values ofN , omitted here for clarity).",
        "That is, knowing both the preceding N ?",
        "1 tokens and tokens in the stimulus results lowers the uncertainty over the next token in response (bigram+stimulus entropy < bigram entropy); on the other hand, this is not as effective as knowing one more token in the preceding block (trigram entropy< bigram+stimulus entropy).",
        "Note that from the model size perspective, modeling p(j |bi, sk) as in GN would have been much more expensive than p(j |bi) in FN+1.",
        "Take the case of G2 vs. F3.",
        "Let V be the vocabulary of user comments (ignore for now differences in responses and stimuli).",
        "While both seem to require computations over V ?",
        "V ?",
        "V , the number of unique observed (bi, j, sk) tuples for G2 (i.e., number of unique bigrams in responses paired up with unigrams in corresponding stimuli) is 725,458,892, whereas the number of unique observed (bi, j) pairs for F3 (i.e., number of unique trigrams) is only 14,692,952.",
        "This means modeling trigrams would result in a model 2% the size of bigram+stimulus, yet it could achieve better reduction in uncertainty.",
        "Note that in order to reduce model complexity, the models proposed in Section 3 all broke down P (ri+1 |s, r1..i) into independent components P (ri+1 |s) and P (ri+1 |r1..i), rather than modeling the effect of s and r1..i jointly as the underlying model corresponding to GN .",
        "Indeed, it would have been impractical to model p(j |bi, sk) directly.",
        "Our studies confirmed the validity of this choice: even if we look at the performance on the training data itself (i.e., igoring data sparseness issues), the smaller trigram model would have yielded better results than the significantly more expensive bigram+stimulus model.",
        "Still, since GN shows a consistent improvement over FN , there could be more information in the stimulus that we are not yet fully utilizing, which can be interesting future work."
      ]
    },
    {
      "heading": "7 Conclusions",
      "text": [
        "In this paper, we examined a novel application: automatic response completion in conversational settings.",
        "We investigated the effectiveness of several models that incorporate contextual information provided by the partially typed response as well as the stimulus.",
        "We found that the partially typed response provides strong signals.",
        "In addition, using a mixture model which also incorporates stimulus content yielded the best overall result.",
        "We also performed empirical studies to examine the predictability of user-generated content.",
        "Our analysis (entropy estimates along with upper-bound numbers observed from experiments) suggest that there can be interesting future work to explore the contextual information provided by the stimulus more effectively and further improve the response completion task."
      ]
    }
  ]
}
