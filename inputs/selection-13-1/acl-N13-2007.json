{
  "info": {
    "authors": [
      "Mohammad Salameh",
      "Colin Cherry",
      "Grzegorz Kondrak"
    ],
    "book": "NAACL",
    "id": "acl-N13-2007",
    "title": "Reversing Morphological Tokenization in English-to-Arabic SMT",
    "url": "https://aclweb.org/anthology/N13-2007",
    "year": 2013
  },
  "references": [
    "acl-N07-1047",
    "acl-P02-1040",
    "acl-P06-1001",
    "acl-P07-2045",
    "acl-P08-1103",
    "acl-P08-2039"
  ],
  "sections": [
    {
      "heading": "Abstract",
      "text": [
        "Morphological tokenization has been used in machine translation for morphologically complex languages to reduce lexical sparsity.",
        "Unfortunately, when translating into a morphologically complex language, recombining segmented tokens to generate original word forms is not a trivial task, due to morphological, phonological and orthographic adjustments that occur during tokenization.",
        "We review a number of detokenization schemes for Arabic, such as rule-based and table-based approaches and show their limitations.",
        "We then propose a novel detokenization scheme that uses a character-level discriminative string transducer to predict the original form of a segmented word.",
        "In a comparison to a state-of-the-art approach, we demonstrate slightly better detokenization error rates, without the need for any hand-crafted rules.",
        "We also demonstrate the effectiveness of our approach in an English-to-Arabic translation task."
      ]
    },
    {
      "heading": "1 Introduction",
      "text": [
        "Statistical machine translation (SMT) relies on tokenization to split sentences into meaningful units for easy processing.",
        "For morphologically complex languages, such as Arabic or Turkish, this may involve splitting words into morphemes.",
        "Throughout this paper, we adopt the definition of tokenization proposed by Habash (2010), which incorporates both morphological segmentation as well as orthographic character transformations.",
        "To use an English example, the word tries would be morphologically tokenized as ?try + s?, which involves orthographic changes at morpheme boundaries to match the lexical form of each token.",
        "When translating into a tokenized language, the tokenization must be reversed to make the generated text readable and evaluable.",
        "Detokenization is the process of converting tokenized words into their original orthographically and morphologically correct surface form.",
        "This includes concatenating tokens into complete words and reversing any character transformations that may have taken place.",
        "For languages like Arabic, tokenization can facilitate SMT by reducing lexical sparsity.",
        "Figure 1 shows how the morphological tokenization of the Arabic word ???",
        "J?J ??",
        "?and he will prevent them?",
        "simplifies the correspondence between Arabic and English tokens, which in turn can improve the quality of word alignment, rule extraction and decoding.",
        "When translating from Arabic into English, the tokenization is a form of preprocessing, and the output translation is readable, space-separated English.",
        "However, when translating from English to Arabic, the output will be in a tokenized form, which cannot be compared to the original reference without detokenization.",
        "Simply concatenating the tokenized morphemes cannot fully reverse this process, because of character transformations that occurred during tokenization.",
        "The techniques that have been proposed for the detokenization task fall into three categories (Badr et al., 2008).",
        "The simplest detokenization approach concatenates morphemes based on token markers without any adjustment.",
        "Table-based detokenization maps tokenized words into their surface form with a lookup table built by observing the tokenizer's in",
        "??",
        "and its English translation.",
        "put and output on large amounts of text.",
        "Rule-based detokenization relies on hand-built rules or regular expressions to convert the segmented form into the original surface form.",
        "Other techniques use combinations of these approaches.",
        "Each approach has its limitations: rule-based approaches are language specific and brittle, while table-based approaches fail to deal with sequences outside of their tables.",
        "We present a new detokenization approach that applies a discriminative sequence model to predict the original form of the tokenized word.",
        "Like table-based approaches, our sequence model requires large amounts of tokenizer input-output pairs; but instead of building a table, we use these pairs as training data.",
        "By using features that consider large windows of within-word input context, we are able to intelligently transition between rule-like and table-like behavior.",
        "Our experimental results on Arabic text demonstrate an improvement in terms of sentence error rate1 of 11.9 points over a rule-based approach, and"
      ]
    },
    {
      "heading": "1.1 points over a table-based approach that backs",
      "text": [
        "off to rules.",
        "More importantly, we achieve a slight improvement over the state-of-the-art approach of El Kholy and Habash (2012), which combines rules and tables, using a 5-gram language model to disambiguate conflicting table entries.",
        "In addition, our detokenization method results in a small BLEU improvement over a rule-based approach when applied to English-to-Arabic SMT.",
        "1Sentence error rate is the percentage of sentences containing at least one error after detokenization."
      ]
    },
    {
      "heading": "2 Arabic Morphology",
      "text": [
        "Compared to English, Arabic has rich and complex morphology.",
        "Arabic base words inflect to eight features.",
        "Verbs inflect for aspect, mood, person and voice.",
        "Nouns and adjectives inflect for case and state.",
        "Verbs, nouns and adjectives inflect for both gender and number.",
        "Furthermore, inflected base words can attract various optional clitics.",
        "Clitical prefixes include determiners, particle proclitics, conjunctions and question particles in strict order.",
        "Clitical suffixes include pronominal modifiers.",
        "As a result of clitic attachment, morpho-syntactic interactions sometimes cause changes in spelling or pronunciations.",
        "Several tokenization schemes can be defined for Arabic, depending on the clitical level that the tokenization is applied to.",
        "In this paper, we use Penn Arabic Treebank (PATB) tokenization scheme, which El Kholy and Habash (2012) report as producing the best results for Arabic SMT.",
        "The PATB scheme detaches all clitics except for the definite article Al ?@.",
        "Multiple prefix clitics are treated as one token.",
        "Some Arabic letters present further ambiguity in text.2 For example, the different forms of Hamzated",
        "?",
        "are usually written without the Hamza ?Z?.",
        "Likewise, when the letter Ya ?Y?",
        "?",
        "is present at theend of the word, it is sometimes written in the form of ?Alif Maqsura?",
        "letter ???",
        "?.",
        "Also, short vowels in Arabic are represented using diacritics, which are usually absent in written text.",
        "In order to deal with these ambiguities in SMT, normalization is often performed as a preprocessing step, which usually involves converting different forms of Alif and Ya to a single form.",
        "This decreases Arabic's lexical sparsity and improves SMT performance."
      ]
    },
    {
      "heading": "3 Related Work",
      "text": [
        "Sadat and Habash (2006) address the issue of lexical sparsity by presenting different preprocessing schemes for Arabic-to-English SMT.",
        "The schemes include simple tokenization, orthographic normalization, and decliticization.",
        "The combination of these schemes results in improved translation out",
        "put.",
        "This is one of many studies on normalization and tokenization for translation from Arabic, which we will not attempt to review completely here.",
        "Badr et al. (2008) show that tokenizing Arabic also has a positive influence on English-to-Arabic SMT.",
        "They apply two tokenization schemes on Arabic text, and introduce detokenization schemes through a rule-based approach, a table-based approach, and a combination of both.",
        "The combination approach detokenizes words first using the table, falling back on rules for sequences not found in the table.",
        "El Kholy and Habash (2012) extend Badr's work by presenting a larger number of tokenization and detokenization schemes, and comparing their effects on SMT.",
        "They introduce an additional detokenization schemes based on the SRILM disambig utility (Stolcke, 2002), which utilizes a 5-gram untokenized language model to decide among different alternatives found in the table.",
        "They test their schemes on naturally occurring Arabic text and SMT output.",
        "Their newly introduced detokenization scheme outperforms the rule-based and table-based approaches introduced by Badr et al. (2008), establishing the current state-of-the-art."
      ]
    },
    {
      "heading": "3.1 Detokenization Schemes in Detail",
      "text": [
        "Rule-based detokenization involves manually defining a set of transformation rules to convert a sequence of segmented tokens into their surface form.",
        "For example, the noun ?llry?ys?",
        "?",
        "KQ??",
        "?to the president?",
        "is tokenized as ?l+ Alry?ys?",
        "( l+ ?to?",
        "Alry?ys ?the president?)",
        "in the PATB tokenization scheme.",
        "Note that the definite article ?Al?",
        "?",
        "@ is kept attached to the noun.",
        "In this case, detokenization requires a character-level transformation after concatenation, which we can generalize using the rule: l+Al ?",
        "ll.",
        "Table 1 shows the rules provided by El Kholy and Habash (2012), which we employ throughout this paper.",
        "There are two principal problems with the rule-based approach.",
        "First, rules fail to account for unusual cases.",
        "For example, the above rule mishandles cases where ?Al?",
        "?",
        "@ is a basic part of the stem and not the definite article ?the?.",
        "Thus, ?l+ Al?Ab?",
        "(l+ ?to?",
        "Al?Ab ?games?)",
        "is erroneously detokenized to"
      ]
    },
    {
      "heading": "Rule Input Output",
      "text": [
        "(2012), with examples.",
        "pron stands for pronominal clitic.",
        "llEAb H.",
        "A???",
        "instead of the correct form is ?lAl?Ab?",
        "H.",
        "A??B.",
        "Second, rules may fail to handle sequences produced by tokenization errors.",
        "For example, the word ?bslT??",
        "????.",
        "?with power?",
        "can be erroneously tokenized as ?b+slT+h?, while the correct tokenizations is ?b+slT??.",
        "The erroneous tokenization will be incorrectly detokenized as ?bslTh?.",
        "The table-based approach memorizes mappings between words and their tokenized form.",
        "Such a table is easily constructed by running the tokenizer on a large amount of Arabic text, and observing the input and output.",
        "The detokenization process consults this table to retrieve surface forms of tokenized words.",
        "In the case where a tokenized word has several observed surface forms, the most frequent form is selected.",
        "This approach fails when the sequence of tokenized words is not in the table.",
        "In morphologically complex languages like Arabic, an inflected base word can attrract many optional clitics, and tables may not include all different forms and inflections of a word.",
        "The SRILM-disambig scheme introduced by El Kholy and Habash (2012) extends the table-based approach to use an untokenized Arabic language model to disambiguate among the different alternatives.",
        "Hence, this scheme can make context-dependent detokenization decisions, rather than always producing the most frequent surface form.",
        "Both the SRILM-disambig scheme and the table-based scheme have the option to fall back on either rules or simple concatenation for sequences missing from the table."
      ]
    },
    {
      "heading": "4 Detokenization as String Transduction",
      "text": [
        "We propose to approach detokenization as a string transduction task.",
        "We train a discriminative transducer on a set of tokenized-detokenized word pairs.",
        "The set of pairs is initially aligned on the character level, and the alignment pairs become the operations that are applied during transduction.",
        "For detokenization, most operations simply copy over characters, but more complex rules such as l+ Al ?",
        "ll are learned from the training data as well.",
        "The tool that we use to perform the transduction is DIRECTL+, a discriminative, character-level string transducer, which was originally designed for letter-to-phoneme conversion (Jiampojamarn et al., 2008).",
        "To align the characters in each training example.",
        "DIRECTL+ uses an EM-based M2M-ALIGNER (Ji-ampojamarn et al., 2007).",
        "After alignment is complete, MIRA training repeatedly decodes the training set to tune the features that determine when each operation should be applied.",
        "The features include both n-gram source context and HMM-style target transitions.",
        "DIRECTL+ employs a fully discriminative decoder to learn character transformations and when they should be applied.",
        "The decoder resembles a monotone phrase-based SMT decoder, but is built to allow for hundreds of thousands of features.",
        "The following example illustrates how string transduction applies to detokenization.",
        "The segmented and surface forms of bbrA?thm ??",
        "D?@Q.",
        "K. ?with their skill?",
        "constitute a training instance: b+_brA?",
        "?_+hm ?",
        "bbrA?thm The instance is aligned during the training phase as:",
        "The underscore ?_?",
        "indicates a space, while ??",
        "denotes an empty string.",
        "The following operations are extracted from the alignment: b+ ?",
        "b, _b ?",
        "b, r ?",
        "r, A ?",
        "A, E ?",
        "E, p_ ?",
        "t, + ?",
        ", h ?",
        "h, m ?",
        "m During training, weights are assigned to features that associate operations with context.",
        "In our running example, the weight assigned to the b+ ?",
        "b operation accounts for the operation itself, for the fact that the operation appears at the beginning of a word, and for the fact that it is followed by an underscore; in fact, we employ a context window of 5 characters to the left or right of the source substring ?b+?, creating a feature for each n-gram within that window.",
        "Modeling the tokenization problem as string transduction has several advantages.",
        "The approach is completely language-independent.",
        "The context-sensitive rules are learned automatically from examples, without human intervention.",
        "The rules and features can be represented in a more compact way than the full mapping table required by table-based approaches, while still elegantly handling words that were not seen during training.",
        "Also, since the training data is generalized more efficiently than in simple memorization of complete tokenized-detokenized pairs, less training data should be needed to achieve good accuracy."
      ]
    },
    {
      "heading": "5 Experiments",
      "text": [
        "This section presents two experiments that evaluate the effect of the detokenization schemes on both naturally occurring Arabic and SMT output."
      ]
    },
    {
      "heading": "5.1 Data",
      "text": [
        "To build our data-driven detokenizers, we use the Arabic part of 4 Arabic-English parallel datasets from the Linguistic Data Consortium as train",
        "filtering punctuation marks, Latin words and numbers (refer to Table 2 for detailed counts).",
        "For training the SMT system's translation and reordering models, we use the same 4 datasets from LDC.",
        "We also use 200 Million words from LDC Arabic Gigaword corpus (LDC2011T11) to generate a 5-gram language model using SRILM toolkit (Stolcke, 2002).",
        "We use NIST MT 2004 evaluation set for tuning (1075 sentences), and NIST MT 2005 evaluations set for testing (1056 sentences).",
        "Both MT04 and MT05 have multiple English references in order to evaluate Arabic-to-English translation.",
        "As we are translating into Arabic, we take the first English",
        "translation to be our source in each case.",
        "We also use the Arabic halves of MT04 and MT05 as development and test sets for our experiments on naturally occurring Arabic.",
        "The tokenized Arabic is our input, with the original Arabic as our gold-standard detokenization.",
        "The Arabic text of the training, development, testing set and language model are all tokenized using MADA 3.2 (Habash et al., 2009) with the Penn Arabic Treebank tokenization scheme.",
        "The English text in the parallel corpus is lower-cased and tokenized in the traditional sense to strip punctuation marks."
      ]
    },
    {
      "heading": "5.2 Experimental Setup",
      "text": [
        "To train the detokenization systems, we generate a table of mappings from tokenized forms to surface forms based on the Arabic part of our 4 parallel datasets, giving us complete coverage of the output vocabulary of our SMT system.",
        "In the table-based approaches, if a tokenized form is mapped to more than one surface form, we use the most frequent surface form.",
        "For out-of-table words, we fall back on concatenation (in T) or rules (in T+R).",
        "For SRILM-Disambig detokenization, we maintain ambiguous table entries along with their frequencies, and we introduce a 5-gram language model to disambiguate detokenization choices in context.",
        "Like the table-based approaches, the Disambig approach can back off to either simple concatenation (T+LM) or rules (T+R+LM) for missing entries.",
        "The latter is a reimplementation of the state-of-the-art system presented by El Kholy and Habash (2012).",
        "We train our discriminative string transducer using word types from the 4 LDC catalogs.",
        "We use M2M-ALIGNER to generate a 2-to-1 character alignments between tokenized forms and surface forms.",
        "For the decoder, we set Markov order to one, joint n-gram features to 5, n-gram size to 11, and context size to 5.",
        "This means the decoder can utilize contexts up to 11 characters long, allowing it to",
        "schemes on the Arabic reference text of NIST MT05.",
        "BLEU score refers to English-Arabic SMT output.",
        "effectively memorize many words.",
        "We found these settings using grid search on the development set, NIST MT04.",
        "For the SMT experiment, we use GIZA++ for the alignment between English and tokenized Arabic, and perform the translation using Moses phrase-based SMT system (Hoang et al., 2007), with a maximum phrase length of 5.",
        "We apply each detokenization scheme on the SMT tokenized Arabic output test set, and evaluate using the BLEU score (Pap-ineni et al., 2002)."
      ]
    },
    {
      "heading": "5.3 Results",
      "text": [
        "Table 3 shows the performance of several detokenization schemes.",
        "For evaluation, we use the sentence and word error rates on naturally occurring Arabic text, and BLEU score on tokenized Arabic output of the SMT system.",
        "The baseline scheme, which is a simple concatenation of morphemes, introduces errors in over a third of all sentences.",
        "The table-based approach outperforms the rule-based approach, indicating that there are frequent exceptions to the rules in Table 1 that require memorization.",
        "Their combination (T+R) fares better, lever-aging the strengths of both approaches.",
        "The addition of SRILM-Disambig produces further improvements as it uses a language model context to disambiguate the correct detokenized word form.",
        "Our system outperforms SRILM-Disambig by a very slight margin, indicating that the two systems are roughly equal.",
        "This is interesting, as it is able to do so by using only features derived from the tokenized word itself; unlike SRILM-Disambig, it has no access to the surrounding words to inform its decisions.",
        "In ad",
        "dition, it is able to achieve this level of performance without any manually constructed rules.",
        "Improvements in detokenization do contribute to the BLEU score of our SMT system, but only to a point.",
        "Table 3 shows three tiers of performance, with no detokenization being the worst, the rules being better, and the various data-driven approaches performing best.",
        "After WER dips below 0.2, further improvements seem to no longer affect SMT quality.",
        "Note that BLEU scores are much lower overall than one would expect for the translation in the reverse direction, because of the morphological complexity of Arabic, and the use of one (as opposed to four) references for evaluation."
      ]
    },
    {
      "heading": "5.4 Analysis",
      "text": [
        "The sentence error rate of 2.1 represents only 21 errors that our approach makes.",
        "Among those 21, 11 errors are caused by changing p to h and vice versa.",
        "This is due to writing p and h interchangeably.",
        "For example, ?AjmAly+h?",
        "was detokenized as ?AjmAly??",
        "?J ?A?g.",
        "@ instead of ?AjmAlyh?",
        "?J ?A?g.",
        "@.Another 4 errors are caused by the lack of dia-critization, which affects the choice of the Hamza form.",
        "For example,?bnAw?h?",
        "?",
        "?A JK.",
        ", ?bnAy?h?",
        "?",
        "KA JK.",
        "and ?bnA?h?",
        "?ZA JK.",
        "(?its building?)",
        "are 3 different forms of the same word where the choice of Hamza Z is dependent on its diacritical mark or the mark of the character that precedes it.",
        "Another 3 errors are attributed to the case of the nominal which it inflects for.",
        "The case is affected by the context of the noun which DIRECTL+ has no access to.",
        "For example, ?mfkry+hm?",
        "(?thinkers/Dual-Accusative?)",
        "was detokenized as ?mfkrAhm?",
        "??@Q?",
        "??",
        "(Dual-Nominative) instead of ?mfkryhm?",
        "?",
        "?E Q?",
        "??.",
        "The last 3 errors are special cases of ?An +y?",
        "which can be detokenized correctly as either ?Any?",
        "?",
        "The table-based detokenization scheme fails in 54 cases.",
        "Among these instances, 44 cases are not in the mapping table, hence resolving back to simple concatenation ended with an error.",
        "Our transduction approach succeeds in detokenizing 42 cases out of the 54.",
        "The majority of these cases involves changing p to h and vice versa, and changing l+Al to ll.",
        "The only 2 instances where the tokenized word is in the mapping table but DIRECTL+ incorrectly detokenizes it are due to hamza case and p to h case described above.",
        "There are 4 instances of the same word/case where both the table scheme and DIRECTL+ fails due to error of tokenization by MADA, where the proper name qwh ???",
        "is erroneously tokenized as qw+p.",
        "This shows that DIRECTL+ handles the OOV words correctly.",
        "The Disambig(T+R+LM) erroneously detok-enizes 27 instances, where 21 out of them are correctly tokenized by DIRECTL+.",
        "Most of the errors are due to the Hamza and p to h reasons.",
        "It seems that even with a large size language model, the SRILM utility needs a large mapping table to perform well.",
        "Only 4 instances were erroneously detokenized by both Disambig and DIRECTL+ due to Hamza and the case of the nominal.",
        "The analysis shows that using small size training data, DIRECTL+ can achieve slightly better accuracy than SRILM scheme.",
        "The limitations of using table and rules are handled with DIRECTL+ as it is able to memorize more rules."
      ]
    },
    {
      "heading": "6 Conclusion and Future Work",
      "text": [
        "In this paper, we addressed the detokenization problem for Arabic using DIRECTL+, a discriminative training model for string transduction.",
        "Our system performs the best among the available systems.",
        "It manages to solve problems caused by limitations of table-based and rule-based systems.",
        "This allows us to match the performance of the SRILM-disambig approach without using a language model or hand-crafted rules.",
        "In the future, we plan to test our approach on other languages that have morphological characteristics similar to Arabic."
      ]
    }
  ]
}
