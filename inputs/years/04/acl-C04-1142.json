{
  "info": {
    "authors": [
      "Ashwin Tengli",
      "Yiming Yang",
      "Nian Li Ma"
    ],
    "book": "International Conference on Computational Linguistics",
    "id": "acl-C04-1142",
    "title": "Learning Table Extraction from Examples",
    "url": "https://aclweb.org/anthology/C04-1142",
    "year": 2004
  },
  "references": [
    "acl-A97-1032",
    "acl-C00-1025",
    "acl-C00-1049"
  ],
  "sections": [
    {
      "heading": "Abstract",
      "text": [
        "Information extraction from tables in web pages is a challenging problem due to the diverse nature of table formats and the vocabulary variants in attribute names.",
        "This paper presents a new approach to automated table extraction that exploits formatting cues in semi-structured HTML tables, learns lexical variants from training examples and uses a vector space model to deal with non-exact matches among labels.",
        "We conducted experiments with this method on a set of tables collected from 157 university web sites, and obtained the information extraction performance of 91.4% in the F1-measure, showing the effectiveness of the combined use of structural table parsing and example-based label learning."
      ]
    },
    {
      "heading": "1. Introduction",
      "text": [
        "Tables are an important means of presenting information and are widely used on the web for the reason that they show relational data in a form concise and easy to read by human eyes.",
        "Automatic extraction of tables has applications in information retrieval, knowledge acquisition, summarization and web mining.",
        "A table is made of cells.",
        "Each cell is either a label cell (attribute name) or a data cell (attribute value).",
        "The task of table extraction involves differentiating between the two types of cells and identifying the associations between labels and data.",
        "Automatic information extraction from tables is a challenging problem since tables are designed for viewing by humans and not for understanding by computers.",
        "A table which is unambiguous for humans may still be difficult to parse by a computer.",
        "Figure 1 shows such an example: a table of student enrollment statistics (in a particular year) provided by a university.",
        "The layout of the table, the positions of the labels and the data, the meaning of the words, the shaded areas, and the contrasts between empty and non-empty cells together make the table readable and unambiguous for human understanding.",
        "However, it is not so obvious how a system can identify which cells are the attribute labels and which cells are the attribute values.",
        "The nested structure of labels makes the problem further complicated.",
        "For example, \"Undergraduates\" and \"Degree-seeking, first-time freshmen\" together define the row coordinate of a data cell, while \"Full-Time\" and \"Men\" together define the column coordinate of the data cell.",
        "Clearly, for tables as in the given example, relying on HTML tags along will not be sufficient to parse a table and to interpret the meanings of its cells.",
        "A better approach is to jointly use layout information (including HTML tags) and lexical constraints in the parsing of a table, and to learn those constraints automatically from training examples.",
        "Another challenging issue in table extraction is dealing with the formatting differences and lexical variants in the tables that have the same semantic structures.",
        "The Common Data Set (CDS) tables available on different university web sites are a good example.",
        "The Common Data Set (CDS) initiative is a collaborative effort among data providers in the higher education community and publishers to define a standard format for university data.",
        "However, the tables that appear on the university web sites differ greatly in terms of HTML formatting, lexical variants of labels, extra or missing portions in those tables, etc.",
        "Mapping the various forms of those tables in distributed web sites to the unified underlying structures (predefined) is indeed a non-trivial problem.",
        "We propose a simple and yet effective learning algorithm that learns lexical variants of attribute names from training examples, and that employs a vector space model to support \"fuzzy\" match between lexical variants and canonical forms of attribute names.",
        "In our view this is the first work which provides a complete solution for extraction from HTML tables.",
        "We have not encountered any experimental evaluation of table extraction in the literature that can be used as a reference of comparison with our work.",
        "Therefore we have defined our own evaluation methodology.",
        "The research questions we address here for table extraction are: 1) how to use the layout information provided by the HTML tags, 2) how to learn from existing tables and predefined structures, 3) how to deal with lexical constraints of labels to improve the efficiency, and 4) how to evaluate the effectiveness of table extraction.",
        "The rest of the paper has been organized as follows: In section 2 we discuss the related work done in this area.",
        "Section 3 describes our algorithm and Section 4 describes our experimental setup and evaluation results.",
        "In Section 5 we present the conclusions."
      ]
    },
    {
      "heading": "2. Related Work",
      "text": [
        "Previous work in table extraction has addressed open domain tasks such as table extraction from ASCII, OCR and HTML documents plus closed domain tasks such as table detection, table merging and classifying rows in tables.",
        "Approaches such as deep understanding of the table structure and shallow parsing of the content have been used.",
        "Knowledge engineering techniques like heuristics based on the formatting cues and machine learning techniques like decision trees, SVM and conditional random fields have been explored previously.",
        "Most work was concentrated on extraction from ASCII tables with some work on extraction from images like OCR texts and from semi-structured formats like HTML.",
        "The challenge in plain text ASCII tables is in interpreting structural information from spaces, tabs and ASCII character sequences like the `-` or `#' used for creating lines.",
        "While in the HTML tables the cells are already demarcated by the <td> tags.",
        "(Hurst and Nasukawa, 2000; Hurst and Douglas, 1997; Hurst, 2000; Pyreddy and Croft, 1997) describe methods for table extraction from plain and OCR scanned texts.",
        "The features used for extracting from tables in HTML are different and features such as spaces or tabs need not be used to identify structure.",
        "There has been work done in the past on the task of table detection (Chen et al., 2000; Wang and Hu, 2002; Hu et al., 2000).",
        "The table detection task involves separating tables that contain logical and relational information from those that are used for formatting the layout.",
        "The input to a table detection system is documents containing both real tables and tables used for layout formatting.",
        "The output is a classification of the data into real tables and non-real tables.",
        "The task of table detection is sometimes the first step for performing table extraction because it needs real tables.",
        "However it not a necessary step as detection could be combined in the extraction algorithm.",
        "Heuristics and machine learning based approaches have been generally used to perform table detection.",
        "(Chen et al., 2000) presents work on table detection and extraction on HTML tables.",
        "The table detection algorithm uses string, named entity and number category similarity to decide if it is a real or non-real table.",
        "Based on cell similarity the table extraction algorithm identifies whether the table is to be read row wise or column wise.",
        "They split the cells which span over multiple cells into individual cells.",
        "The table extraction algorithm presented in this work is simple and works only if spanning cells are used for nested labels.",
        "The paper did not provide evaluation results for their table extraction algorithm.",
        "The problem of merging different tables which are about the same type of information has been addressed in (Yoshida et al., 2001).",
        "The merging task as defined in the paper considers combining different tables into one large table.",
        "They define different structures for tables based on the arrangement of the labels and use Expectation Maximization to classify the tables to one of the defined structures.",
        "The structure recognition task is similar to the classification task.",
        "However structure recognition or merging does not solve the table extraction problem.",
        "Table extraction by wrapper learning has been explored in (Cohen et al., 2002).",
        "Wrappers learn rules based on examples.",
        "The rules are composed of tokens made of HTML tags or the content itself.",
        "The rules tend to be specific and can be applied only to those documents whose structure is similar to the training documents.",
        "The use of tokens to compose rules makes it difficult to generalize across distributed websites.",
        "Hence wrappers learned for one website cannot be used on another website.",
        "No clear evaluation for table extraction has been described this work.",
        "Conditional random fields for table extraction from ASCII tables have been described in (Pinto et al., 2003).",
        "However the system described does not perform a complete table extraction task â€“ it only classifies the rows of the table into a type such as \"datarow\", \"sectionheader\" or \"superheader\".",
        "They used a set of 12 types (classes) and achieve a precision of 93.5% for the classification task.",
        "Work presented in (Pyreddy and Croft, 1997; Pinto et al., 2002) also focused on the task of classifying table rows."
      ]
    },
    {
      "heading": "3. Methodology",
      "text": [
        "The HTML format is a hierarchical markup language where the markup tags define the layout of the information.",
        "The <TABLE> tag is used in HTML documents to construct tables.",
        "The following tags are used in HTML to define tables:",
        "â€¢ <table> .... </table> - the tag enclosing the whole table.",
        "â€¢ <tr> ....</tr> - the tag that defines a row in the table.",
        "â€¢ <td> ... </td> - the tag that defines a column in each row.",
        "It identifies a cell in the table.",
        "â€¢ <th> ... </th> - the tag used instead of <td> to define that the information in the cell is a header information.",
        "â€¢ <caption> ... <caption> - the tag used to put caption for the table.",
        "Often the <TABLE> tag is used for formatting the content in the web pages too.",
        "Therefore we use a table detection system to filter out the real tables from those used for formatting the layout.",
        "The program is developed by our group and uses decision trees to learn rules using features like cell similarity, number of cells and type of cells.",
        "It is a simplified version of the table detection algorithm using decision trees described in (Wang and Hu, 2002).",
        "In spite of tags demarcating a cell boundary in HTML tables, it is still difficult to automatically identify the labels for each data cell, as the tables are designed for visual interpretation and not for automatic extraction.",
        "Figure 1 shows example of a table with hierarchical labels for the rows and spanning cells for column labels.",
        "Such tables though easy to read, are difficult to automatically assign correct labels for each data cell.",
        "Our algorithm processes the tables and brings it to a form where it is in a uniform two dimensional structure.",
        "There is no nesting of labels in the processed structure.",
        "In this form the data cells are separated from the label cells and are associated only with labels in the same row or columns.",
        "One of the important contributions of our work is learning labels and using them for structure recognition.",
        "In Section 3.1 we describe the method for learning the labels and in the next section we present our algorithm."
      ]
    },
    {
      "heading": "3.1 Learning Labels",
      "text": [
        "Tables have two types of information: the label information and the data.",
        "The labels are the attributes of the data.",
        "If the some of the labels of these tables are known, then this information can be used to identify the structure of the tables, which in turn will help assign the right labels to the data cells.",
        "Since tables are a semi-structured form of representing data, the labels are present in a regular format where consecutive label cells appear either in a row or a column.",
        "Locating the known labels in a table will help differentiating the label rows and columns from the data rows and columns.",
        "Our system is provided with tables as examples with labels in them marked.",
        "The label learning algorithm proceeds as follows:",
        "1.",
        "The labels from the example tables are extracted and indexed.",
        "2.",
        "Labels whose relative string edit distance is less than 0.09 are merged together.",
        "Relative edit distance is the ratio of number of edit operations (Levenstein, 1966) and the length of the string.",
        "Relative edit distance measure is not symmetric; therefore we consider the larger of the two relative edit distances.",
        "3.",
        "A ranked list of these labels, obtained by thresholding on term frequency, is used by the extraction algorithm.",
        "Use of relative edit distance limits the merging of lexical variants in labels to those whose edit distance to string length ratio is less than the threshold.",
        "The threshold for the relative edit distance is empirically set to a value that maximizes the performance.",
        "Identifying labels in a table will help separating the data cells from the label cells.",
        "For example, if 50% of the cells in a column are identified as labels then the rest of the cells in the column are also labels.",
        "This heuristic is used because there is a regularity in appearance of labels in tables, which implies that if most of the cells in a column are labels, then rest of the cells are labels too."
      ]
    },
    {
      "heading": "3.2 Algorithm for Table Extraction",
      "text": [
        "The algorithm starts by parsing the content in the <TABLE> tag.",
        "It uses a set of heuristics in conjunction with the labels learnt from the examples, to recognize the structure.",
        "The examples of some of these heuristics are shown in the Figure 1.",
        "The heuristics used to recognize the structure are given below:",
        "â€¢ Span tag: The <td> tags in HTML can contain the attribute `span' which specifies the number of row cells or column cells that the current cell spans.",
        "We recognize the span attribute in the tags and use this information to assign the spanning cell to multiple rows and columns.",
        "â€¢ Rows with empty data cells: After separating the label cells from the data cells, we identify rows with empty data cells.",
        "If the previous",
        "data row is not empty and the next data row is also not empty, then the label of the current row is a super row label.",
        "A super-row label is one which spans over the row labels below it.",
        "Examples of super-row labels are shown in Figure 1.",
        "â€¢ Single row cell in a row: If there is only one row cell in a row and that cell contains a label, then naturally the label is a super row label.",
        "â€¢ Single empty data cell: If there is only one data cell in a row and the cell is empty then the label for that row is a super row label.",
        "The algorithm proceeds as below: 1.",
        "Parse the table and read the contents into a array.",
        "Also store the attributes of the cell like `span' etc into another array.",
        "The cell iJ of the array corresponds to the cell iJ in the table.",
        "Use HTML Tidy or any other similar tool to handle errors in HTML.",
        "We use modules built in the Perl HTML parser to handle this.",
        "2.",
        "For each cell process the HTML attributes like the `span' attribute.",
        "Split the spanning cell into as many cells as it spans.",
        "3.",
        "Use the labels learnt to identify data cells and label cells.",
        "The vector space model is used for matching non-exact labels by considering each label as a vector of terms.",
        "To identify column labels parse each row.",
        "Match the contents of the cells in the row with the column labels learnt.",
        "If the similarity is greater than the threshold then set that row as containing column labels.",
        "Perform similar operation on the columns of the table to identify the columns containing the row labels.",
        "A threshold of 0.45 was used in our experiments.",
        "Separate the data cells from the labels cells and split the label cells into row label cells and column label cells.",
        "4.",
        "Identify super-rows using the heuristics described previously.",
        "Perform partial matching with the super-row labels learnt.",
        "A relative string edit distance of less than or equal to 0.25 was considered as the threshold.",
        "Concatenate the super label with the label",
        "cells below it until another super label is found or the end of the table is reached.",
        "Delete the row which contained the super label.",
        "5.",
        "For each data cell extract the corresponding column labels and row labels.",
        "Output the results in XML format.",
        "The extraction algorithm first separates the data cells from the label cells.",
        "It then expands the spanning cells.",
        "The super labels are identified and expanded appropriately.",
        "Then the result is outputted in XML format.",
        "Figure 2 shows extraction results from a table similar to the one in Figure 1. tables.",
        "In Section 4.1 we describe the evaluation methodology.",
        "The experiments conducted and the results achieved are described in section 4.2."
      ]
    },
    {
      "heading": "4.1 Evaluation Methodology",
      "text": [
        "The evaluation set consisted of 55 tables of 7 different types and 193 tables of the type B1 from the Common data Set.",
        "A user interface was created to annotate the tables manually.",
        "All the data cells in the tables were identified and each data cell was annotated with corresponding labels.",
        "The unit for evaluation is a data cell.",
        "The evaluation methodology is described in Figure 3.",
        "In Figure 3, a `yes' by the system or the human annotation means that all the labels for the data cell were identified correctly.",
        "The cell \"a\" is incremented by one if the human annotation and the system result agree completely on all the labels for a data cell.",
        "The cell \"b\" is added a score of one if the system extracted data cell is incorrect or its labels are incorrect.",
        "The cell \"c\" is incremented by one if the system misses a data cell identified by the human annotator.",
        "The cell \"d\" is ignored in the evaluation measure.",
        "The formulas for Precision, Recall and F1-measure are given in the Figure 3."
      ]
    },
    {
      "heading": "4. Experiments",
      "text": [
        "Since there has not been significant work in the area of table extraction from HTML, there have been no clear baselines.",
        "We define the baseline for our experiments as an algorithm which does not learn from examples and does not use the heuristics defined.",
        "For our experiments we collected from 157 university web sites HTML pages that contained tables.",
        "These tables are part of the Common Data Set and are semantically similar across websites.",
        "The Common Data Set organization defines specific format for data from universities in Unites States of America.",
        "The table detection program was used to identify the real tables from the non-real tables in the webpages.",
        "We used eight different types of tables and had two evaluation sets consisting of 193 and 55",
        "The baseline used in our experiments does not use the heuristics and the labels learnt.",
        "This system identifies the first row and the first column of a table as label rows and columns respectively.",
        "The rest of the cells are assigned as data cells.",
        "For each of the data cells the cells in the beginning of the same row and column are selected as label cells.",
        "For example if the data cell is given by the index i,j then column label is the cell I,j and the row label is the cell i,I.",
        "If the cells I,j or i, I is empty then no label is assigned to the data cell."
      ]
    },
    {
      "heading": "4.2 Experiments Conducted",
      "text": [
        "The first experiment was conducted on seven types of tables from the Common Data Set.",
        "The types of tables selected were B2, C1, C5, C9-1, C9-2, C9-3 and H1.",
        "The tables of type C and B are simple tables with just the first row being labels or both the first row and first column being labels.",
        "The tables of type H1 were the most complicated type which had super labels for rows.",
        "These tables at times had lot of empty data cells which made recognition of super labels for the rows difficult.",
        "There were also unwanted labels that were not part of CDS and hence were not annotated.",
        "In our experiments we removed such labels.",
        "For this experiment the labels were learnt from the CDS definition.",
        "Table 1 shows the results of performance of the baseline system and our table extraction system.",
        "It can be seen that though the baseline system performs well on simple tables, the performance on complicated tables is poor.",
        "On the tables of type C1 the performance of the baseline was poor because there were no column labels but it assumed the first row to contain column labels.",
        "Our system achieved a combined recall of 87.84%, precision of 95.31% and F1-measure of 91.42%, based on the evaluation measure described in the previous section.",
        "Our system performed significantly better than the baseline which had a combined F 1 score of 48.0%.",
        "The second experiment was conducted on the 193 B 1 tables to evaluate the advantage of learning from examples.",
        "The B 1 tables (example shown in Figure 1) have a complicated structure.",
        "They have nested column labels and super-row labels.",
        "In this experiment the precision, recall and F1 values were measured while increasing the number of examples.",
        "A pool of 10 examples was used for the experiments.",
        "The results of the experiments are shown in Figure 4.",
        "Each point on the x-axis corresponds to the number of training examples used for learning.",
        "The y-value is the mean of the scores of ten trails of randomly chosen examples from the set of 10Cx possible combinations.",
        "Almost all the tables in our dataset had the complete label information.",
        "Therefore we induced incomplete label information into the ten examples by randomly removing some labels.",
        "This represents a real world example where a single example table may not have complete label information and complete information is available by increasing the number of examples.",
        "Figure 4 shows the values of recall, precision and F1-measure for this experiment.",
        "The variance of the precision and recall has also been plotted separately in Figure 5.",
        "The performance of the system improves as the number of examples are increased.",
        "The performance saturates to the best performance.",
        "The best performance has a precision of 94.29%, recall of 80.04% and F 1 measure of 86.76% when complete label information has been used.",
        "An extraction performance with high precision and good recall can be used to input the results of the extraction into a relational database.",
        "The results also show that the precision of our algorithm converges quickly and has low variance.",
        "Such a system is well suited to extract data that can be used as input to relational databases.",
        "Our system was used to extract data from the web pages of the 157 universities and store it into a relational database."
      ]
    },
    {
      "heading": "5. Conclusion",
      "text": [
        "The work presented in this paper provides a simple and yet effective algorithm for performing the complete task of automatic table extraction, including the differentiation between labels and data, and the association of each data cell with the correct labels.",
        "Our approach leverages the formatting cues present in HTML tags, the knowledge about the semantic structures of tables, and the power of example-based learning.",
        "Our evaluation on a set of tables from 157 university web sites shows a performance level of 91.4% in the F1 measure.",
        "To our knowledge, this is the first evaluation on the complete task of table extraction, and the effectiveness of this approach is evident."
      ]
    },
    {
      "heading": "6. References",
      "text": []
    }
  ]
}
