{
  "info": {
    "authors": [
      "Anil Kumar Singh"
    ],
    "book": "Workshop on Linguistic Distances",
    "id": "acl-W06-1109",
    "title": "Study of Some Distance Measures for Language and Encoding Identification",
    "url": "https://aclweb.org/anthology/W06-1109",
    "year": 2006
  },
  "references": [
    "acl-C96-2110",
    "acl-W97-0907"
  ],
  "sections": [
    {
      "heading": "Abstract",
      "text": [
        "To determine how close two language models (e.g., n-grams models) are, we can use several distance measures.",
        "If we can represent the models as distributions, then the similarity is basically the similarity of distributions.",
        "And a number of measures are based on information theoretic approach.",
        "In this paper we present some experiments on using such similarity measures for an old Natural Language Processing (NLP) problem.",
        "One of the measures considered is perhaps a novel one, which we have called mutual cross entropy.",
        "Other measures are either well known or based on well known measures, but the results obtained with them vis-a-vis one-another might help in gaining an insight into how similarity measures work in practice.",
        "The first step in processing a text is to identify the language and encoding of its contents.",
        "This is a practical problem since for many languages, there are no universally followed text encoding standards.",
        "The method we have used in this paper for language and encoding identification uses pruned character n-grams, alone as well augmented with word n-grams.",
        "This method seems to give results comparable to other methods."
      ]
    },
    {
      "heading": "1 Introduction",
      "text": [
        "Many kinds of models in NLP can be seen as distributions of a variable.",
        "For various NLP problems, we need to calculate the similarity of such models or distributions.",
        "One common example of this is the n-grams model.",
        "We might have several reference data sets and then we may want to find out which of those matches most closely with a test data set.",
        "The problem of language and encoding identification can be represented in these terms.",
        "One of the most important questions then is which similarity measure to use.",
        "We can expect that the performance obtained with the similarity measure will vary with the specific problem and the kind of model used or some other problem specific details.",
        "Still, it will be useful to explore how these measures relate to each other.",
        "The measures we are going to focus on in this paper are all very simple ones and they all try to find the similarity of two models or distributions in a (more or less) information theoretic way, except the out of rank measure proposed by Cavnar and Trenkle (Cavnar and Trenkle, 1994).",
        "This work had started simply as an effort to build a language and encoding identification tool specifically for South Asian languages.",
        "During the course of this work, we experimented with various similarity measures and some of the results we obtained were at least a bit surprising.",
        "One of the measures we used was something we have called mutual cross entropy and its performance for the current problem was better than other measures.",
        "Before the content of a Web page or of any kind of text can be processed for computation, its language and encoding has to be known.",
        "In many cases this language-encoding is not known beforehand and has to be determined automatically.",
        "For languages like Hindi, there is no standard encoding followed by everyone.",
        "There are many well known web sites using their own proprietary encoding.",
        "This is one of the biggest problems in actually using the Web as a multilingual corpus and for enabling a crawler to search the text in lan",
        "guages like Hindi.",
        "This means that the content in these languages, limited as it is, is invisible not just to people (which could be just due to lack of display support or unavailability of fonts for a particular encoding) but even to crawlers.",
        "The problem of language identification is similar to some other problems in different fields and the techniques used for one such problem have been found to be effective for other problems too.",
        "Some of these problems are text categorization (Cavnar and Trenkle, 1994), cryptanalysis (Beesley, 1988) and even species identification (Dunning, 1994) from genetic sequences.",
        "This means that if something works for one of these problems, it is likely to work for these other problems.",
        "It should be noted here that the identification problem here is that of identifying both language and encoding.",
        "This is because (especially for South Asian languages) the same encoding can be used for more than one languages (ISCII for all Indian languages which use Brahmi-origin scripts) and one language can have many encodings (ISCII, Unicode, ISFOC, typewriter, phonetic, and many other proprietary encodings for Hindi).",
        "In this paper we describe a method based mainly on character n-grams for identifying the language-encoding pair of a text.",
        "The method requires some training text for each language-encoding, but this text need not have the same content.",
        "A few pages (2500-10000 words) of text in a particular language-encoding is enough.",
        "A pruned character based n-grams model is created for each language-encoding.",
        "A similar model is created for the test data too and is compared to the training models.",
        "The best match is found using a similarity measure.",
        "A few (5-15) words of test data seems to be enough for identification in most cases.",
        "The method has been evaluated using various similarity measures and for different test sizes.",
        "We also consider two cases, one in which the pruned character n-grams model is used alone, and the other in which it is augmented with a word n-gram model."
      ]
    },
    {
      "heading": "2 Previous Work",
      "text": [
        "Language identification was one of the first natural language processing (NLP) problems for which a statistical approach was used.",
        "Ingle (Ingle, 1976) used a list of short words in various languages and matched the words in the test data with this list.",
        "Such methods based on lists of words or letters (unique strings) were meant for human translators and couldn’t be used directly for automatic language identification.",
        "They ignored the text encoding, since they assumed printed text.",
        "Even if adapted for automatic identification, they were not very effective or scalable.",
        "However, the earliest approaches used for automatic language identification were based on the above idea and could be called ‘translator approaches’.",
        "Newman (Newman, 1987), among others, used lists of letters, especially accented letters for various languages and identification was done by matching the letters in the test data to these lists.",
        "Beesley’s (Beesley, 1988) automatic language identifier for online texts was based on mathematical language models developed for breaking ciphers.",
        "These models basically had characteristic letter sequences and frequencies (‘orthographical features’) for each language, making them similar to n-grams models.",
        "The insights on which they are based, as Beesley points out, have been known at least since the time of Ibn ad-Duraihim who lived in the 14th century.",
        "Beesley’s method needed 6-64 K of training data and 10-12 words of test data.",
        "It treats language and encoding pair as one entity.",
        "Adams and Resnik (Adams and Resnik, 1997) describe a client-server system using Dunning’s n-grams based algorithm (Dunning, 1994) for a variety of tradeoffs available to NLP applications like between the labelling accuracy and the size and completeness of language models.",
        "Their system dynamically adds language models.",
        "The system uses other tools to identify the text encoding.",
        "They use 5-grams with add-k smoothing.",
        "Training size was 1-50 K and test size above 50 characters.",
        "Some pruning is done, like for frequencies up to 3.",
        "Some methods for language identification use techniques similar to n-gram based text categorization (Cavnar and Trenkle, 1994) which calculates and compares profiles of n-gram frequencies.",
        "This is the approach nearest to ours.",
        "Such methods differ in the way they calculate the likelihood that the test data matches with one of the profiles.",
        "Beesley’s method simply uses word-wise probabilities of ‘digram’ sequences by multiplying the probabilities of sequences in the test string.",
        "Others use some distance measure between training and test profiles to find the best match.",
        "Cavnar also mentions that top 300 or so n-grams are almost always highly correlated with the language, while the lower ranked n-grams give more specific indication about the text, namely the topic.",
        "The distance measure used by Cavnar is called ‘out-of-rank’ measure and it sums up the differences in rankings of the n-grams found in the test data as compared to the training data.",
        "This is among the measures we have tested.",
        "The language model used by Combrinck and Botha (Combrinck and Botha, 1994) is also based on bigram or trigram frequencies (they call them ‘transition vectors’).",
        "They select the most distinctive transition vectors by using as measure the ratio of the maximum percentage of occurrences to the total percentage of occurrences of a transition vector.",
        "These distinctive vectors then form the model.",
        "Dunning (Dunning, 1994) also used an n-grams based method where the model selected is the one which is most likely to have generated the test string.",
        "Giguet (Giguet, 1995b; Giguet, 1995a) relied upon grammatically correct words instead of the most common words.",
        "He also used the knowledge about the alphabet and the word morphology via syllabation.",
        "Giguet tried this method for tagging sentences in a document with the language name, i.e., dealing with multilingual documents.",
        "Another method (Stephen, 1993) was based on ‘common words’ which are characteristic of each language.",
        "This methods assumes unique words for each language.",
        "One major problem with this method was that the test string might not contain any unique words.",
        "Cavnar’s method, combined with some heuristics, was used by Kikui (Kikui, 1996) to identify languages as well as encodings for a multilingual text.",
        "He relied on known mappings between languages and encodings and treated East Asian languages differently from West European languages.",
        "Kranig (Muthusamy et al., 1994) and (Simon, 2005) have reviewed and evaluated some of the well known language identification methods.",
        "Martins and Silva (Martins and Silva, 2005) describe a method similar to Cavnar’s but which uses a different similarity measure proposed by Jiang and Conrath (Jiang and Conrath, 1997).",
        "Some heuristics are also employed.",
        "Poutsma’s (Poutsma, 2001) method is based on Monte Carlo sampling of n-grams from the beginning of the document instead of building a complete model of the whole document.",
        "Sibun and Reynar (Sibun and Reynar, 1996) use mutual information statistics or relative entropy, also called Kullback-Leibler distance for language identification.",
        "Souter et al.",
        "(Souter et al., 1994) compared unique character string, common word and ’tri-graph’ based approaches and found the last to be the best.",
        "Compression based approaches have also been used for language identification.",
        "One example of such an approach is called Prediction by Partial Matching (PPM) proposed by Teahan (Teahan and Harper, 2001).",
        "This approach uses cross entropy of the test data with a language model and predicts a character given the context."
      ]
    },
    {
      "heading": "3 Pruned Character N-grams",
      "text": [
        "Like in Cavnar’s method, we used pruned n-grams models of the reference or training as well as test data.",
        "For each language-encoding pair, some training data is provided.",
        "A character based n-gram model is prepared from this data.",
        "N-grams of all orders are combined and ranked according to frequency.",
        "A certain number of them (say 1000) with highest frequencies are retained and the rest are dropped.",
        "This gives us the pruned character n-grams model, which is used for language-encoding identification.",
        "As an attempt to increase the performance, we also tried to augment the pruned character n-grams model with a word n-gram model."
      ]
    },
    {
      "heading": "4 Distance Measures",
      "text": [
        "Some of the measures we have experimented with have already been mentioned in the section on previous work.",
        "The measures considered in this work range from something as simple as log probability difference to the one based on Jiang and Conrath (Jiang and Conrath, 1997) measure.",
        "Assuming that we have two models or distributions P and Q over a variable X, the measures (sim) are defined as below (p and q being probabilities and r and s being ranks in models P and Q:",
        "Another measure we tried was DL measure (based on Dekang Lin’s measure, on which the JC measure is based):",
        "4.",
        "RE measure (based on relative entropy or Kullback-Leibler distance – see note below):",
        "5.",
        "JC measure (based on Jiang and Conrath’s measure) (Jiang and Conrath, 1997):",
        "6.",
        "Out of rank measure (Cavnar and Trenkle, 1994):",
        "7.",
        "MRE measure (based on mutual or symmetric relative entropy, the original definition of KL-distance given by Kullback and Leibler):",
        "As can be noticed, all these measures, in a way, seem to be information theoretic in nature.",
        "However, our focus in this work is more on the presenting empirical evidence rather than discussing mathematical foundation of these measures.",
        "The latter will of course be interesting to look into.",
        "NOTE: We had initiallly experimented with relative entropy or KL-distance as defined below (instead of the RE measure mentioned above):",
        "where A and B are as given above.",
        "The results for the latter measure were not very good (below 50% in all cases) and the RE measure defined above performed better than relative entropy.",
        "These results have not been reported in this paper."
      ]
    },
    {
      "heading": "5 Mutual Cross Entropy",
      "text": [
        "Cross entropy is a well known distance measure used for various problems.",
        "Mutual cross entropy can be seen as bidirectional or symmetric cross entropy.",
        "It is defined simply as the sum of the cross entropies of two distributions with each other.",
        "Our motivation for using ‘mutual’ cross entropy was that many similarity measures like cross entropy and relative entropy measure how similar one distribution is to the other.",
        "This will not necessary mean the same thing as measuring how similar two distributions are to each other.",
        "Mutual information measures this bidirectional similarity, but it needs joint probabilities, which means that it can only be applied to measure similarity of terms within one distribution.",
        "Relative entropy or Kullback-Leibler measure is applicable, but as the results show, it doesn’t work as well as expected.",
        "Note that some authors treat relative entropy and mutual information interchangeably.",
        "They are very similar in nature except that one is applicable for one variable in two distributions and the other for two variables in one distribution.",
        "Our guess was that symmetric measures may give better results as both the models give some information about each other.",
        "This seems to be supported by the results for cross entropy, but (asymmetric) cross entropy and RE measures also gave good results."
      ]
    },
    {
      "heading": "6 The Algorithm",
      "text": [
        "The foundation of the algorithm for identifying the language and encoding of a text or string has already been explained earlier.",
        "Here we give a summary of the algorithm we have used.",
        "The parameters for the algorithm and their values used in our experiments reported here have also been listed.",
        "These parameters allow the algorithm to be tuned",
        "or customized for best performance.",
        "Perhaps they can even be learned by using some approach as the EM algorithm.",
        "1.",
        "Train the system by preparing character based and word based (optional) n-grams from the training data.",
        "2.",
        "Combine n-grams of all orders (O, for characters and O,,, for words).",
        "3.",
        "Sort them by rank.",
        "4.",
        "Prune by selecting only the top N, charac",
        "ter n-grams and N,,, word n-grams for each language-encoding pair.",
        "1.",
        "Character based n-gram models P, and Q, 2.",
        "Word based n-gram models P,,, and Q,,, 3.",
        "Orders O, and O,,, of n-grams models 4.",
        "Number of retained top n-grams N, and N,,,",
        "(pruning ranks for character based and word based n-grams, respectively)",
        "5.",
        "Number t of character based models to be disambiguated by word based models 6.",
        "Weight a of word based models",
        "Parameters 3 to 6 can be used to tune the per-formace of the identification system.",
        "The results reported in this paper used the following values of these parameters:",
        "1.",
        "O,=4 2.",
        "O,,, = 3 3.",
        "N, = 1000 4.",
        "N,,, = 500 5. t=5 6. a=1",
        "There is, of course, the type of similarity score, which can also be used to tune the performance.",
        "Since MCE gave the best overall performance in our experiments, we have selected it as the default score type."
      ]
    },
    {
      "heading": "7 Implementation",
      "text": [
        "ce of the system:",
        "1.",
        "Whether the data should be read as text or as a binary file.",
        "text, both for training an",
        "d testing.",
        "For example, if we read UTF8 data as ISO-8859-1, there will be errors.",
        "3.",
        "Whether the tranining models should be read every time they are needed or be kept in memory.",
        "The language and encoding tool has been implemented as a small API in Java.",
        "This API uses another API to prepare pruned character and word n-grams which was developed as part of another project.",
        "A graphical user interface (GUI) has also been implemented for identifying the languages and encodings of texts, files, or batches of files.",
        "The GUI also allows a user to easily train the tool for a new language-encoding pair.",
        "The tool will be modified to work in client-server mode for documents from the Internet.",
        "From implementation point of view, there are some issues which can significantly affect the per-forman 2.",
        "The assumed encoding used for reading the 4.",
        "If training models are stored (even if they are only read at the beginning and then kept in memory), as will have to be done for practical applications, how should they be stored: as text or in binary files?",
        "To take care of these issues, we adopted the following policy: 1.",
        "For preparing character based models, we read the data as binary files and the characters are read as bytes and stored as numbers.",
        "For word based models, the data is read as text and the encoding is assumed to be UTF8.",
        "This can cause errors, but it seems to be the best (easy) option as we don’t know the actual encoding.",
        "A slightly more difficult option to implement would be to use character based models to guess the encoding and then build word based models using that as the assumed encoding.",
        "The problem with this method will be that no programming environment supports all possible encodings.",
        "Note that since we are reading the text as bytes rather than characters for preparing ‘character based n-grams’, technically we should say that we are using byte based n-grams models, but since we have not tested on multi-byte encodings, a byte in our experiments was almost always a character, except when the encoding was UTF8 and the byte represented some meta-data like the script code.",
        "So, for practical purposes, we can say that we are using character based n-grams.",
        "2.",
        "Since after pruning, the size of the models (character as well as word) is of the order of 50K, we can afford to keep the training models in memory rather than reading them every time we have to identify the language and encoding of some data.",
        "This option is naturally faster.",
        "However, for some applications where language and encoding identification is to be done rarely or where there is a memory constraint, the other option can be used.",
        "3.",
        "It seems to be better to store the training models in binary format since we don’t know the actual encoding and the assumed encoding for storing may be wrong.",
        "We tried both options and the results were worse when we stored the models as text.",
        "Our identification tool provides customizability with respect to all the parameters mentioned in this and the previous section."
      ]
    },
    {
      "heading": "8 Evaluation",
      "text": [
        "Evaluation was performed for all the measures listed earlier.",
        "These are repeated here with a code for easy reference in table-3.",
        "• LPD: Log probability difference • ALPD: Absolute log probability difference • CE: Cross entropy • RE: RE measure based on relative entropy • JC: JC measure (based on Jiang and Con-rath’s measure) • CT: Cavnar and Trenkle’s out of rank measure • MRE: MRE measure based on mutual (symmetric) relative entropy • MCE: Mutual (symmetric) cross entropy",
        "We tested on six different sizes in terms of characters, namely 100, 200, 500, 1000, 2000, and all the available test data (which was not equal for various language-encoding pairs).",
        "The number of language-encoding pairs was 53 and the minimum number of test data sets was 840 when we used all available test data.",
        "In other cases, the number was naturally larger as the test files were split in fragments (see table-2).",
        "The languages considered ranged from Esperanto and Modern Greek to Hindi and Telugu.",
        "For Indian languages, especially Hindi, several encodings were tested.",
        "Some of the pairs had UTF8 as the encoding, but the information from UTF8 byte format was not explicitly used for identification.",
        "The number of languages tested was 39 and number encodings was 19.",
        "Total number of language-encoding pairs was 53 (see table-1).",
        "The test and training data for about half of the pairs was collected from web pages (such as Gutenberg).",
        "For Indian languages, most (but not all) data was from what is known as the CIIL corpus.",
        "We didn’t test on various training data sizes.",
        "The size of the training data ranged from 2495 to 102377 words, with more on the lower side than on the higher.",
        "Note that we have considered the case where both the language and the encoding are unknown, not where one of them is known.",
        "In the latter case, the performance can only improve.",
        "Another point worth mentioning is that the training data was not very clean, i.e., it had noise (such as words or sentences from other languages).",
        "Error details have been given in table-4."
      ]
    },
    {
      "heading": "9 Results",
      "text": [
        "The results are presented in table-3.",
        "As can be seen almost the measures gave at least moderately good results.",
        "The best results on the whole were obtained with mutual cross entropy.",
        "The JC measure gave almost equally good results.",
        "Even a simple measure like log probability difference gave surprisingly good results.",
        "It can also be observed from table-3 that the size of the test data is an important factor in performance.",
        "More test data gives better results.",
        "But this does not always happen, which too is surprising.",
        "It means some other factors also come into play.",
        "One of these factors seem to whether the training data for different models is of equal size or not.",
        "Another factor seems to be noise in the data.",
        "This seems to affect some measures more than the others.",
        "For example, LPD gave the worst performance when all the available test data was used.",
        "For smaller data sets, noise is likely to get isolated in some data sets, and therefore is less likely to affect the results.",
        "Using word n-grams to augment character n-grams improved the performance in most of the cases, but for measures like JC, RE, MRE and MCE, there wasn’t much scope for improvement.",
        "In fact, for smaller sizes (100 and 200 characters), word models actually reduced the performance for these better measures.",
        "This means either that word models are not very good for better measures, or we have not used them in the best possible way, even though intuitively they seem to offer scope for improvement when character based models don’t perform perfectly."
      ]
    },
    {
      "heading": "10 Issues and Enhancements",
      "text": [
        "Although the method works very well even on little test and training data, there are still some issues and possible enhancements.",
        "One major issue is that Web pages quite often contain text in more than one language-encoding.",
        "An ideal language-encoding identification tool should be able to mark which parts of the page are in which language-encoding.",
        "Another possible enhancement is that in the case of Web pages, we can also take into account the language and encoding specified in the Web page (HTML).",
        "Although it may not be correct for non-standard encodings, it might still be useful for differentiating between very close encodings like ASCII and ISO-8859-1 which might seem identical to our tool.",
        "If the text happens to be in Unicode, then it might be possible to identify at least the encoding (the same encoding might be used for more than one languages, e.g., Devanagari for Hindi, Sanskrit and Marathi) without using a statistical method.",
        "This might be used for validating the result from the statistical method.",
        "Since every method, even the best one, has some limitations, it is obvious that for practical applications we will have to combine several approaches in such a way that as much of the available information is used as possible and the various approaches complement each other.",
        "What is left out by one approach should be taken care of by some other approach.",
        "There will be some issues in combining various approaches like the order in which they have to used, their respective priorities and their interaction (one doesn’t nullify the gains from another).",
        "It will be interesting to apply the same method or its variations on text categorization or topic identification and other related problems.",
        "The distance measures can also be tried for other problems."
      ]
    },
    {
      "heading": "11 Conclusion",
      "text": [
        "We have presented the results about some distance measures which can be applied to NLP problems.",
        "We also described a method for automatically identifying the language and encoding of a text using several measures including one called ‘mutual cross entropy’.",
        "All these measures are applied on character based pruned n-grams models created from the training and the test data.",
        "There is one such model for each of the known language-encoding pairs.",
        "The character based models may be augmented with word based models, which increases the performance for not so good measures, but doesn’t seem to have much effect for better measures.",
        "Our method gives good performance on a few words of test data and a few pages of training data for each language-encoding pair.",
        "Out of the measures considered, mutual cross entropy gave the best results, but RE, MRE and JC measures also performed almost equally well."
      ]
    },
    {
      "heading": "12 Acknowledgement",
      "text": [
        "The author wishes to thank Preeti Pradhan, Nan-dini Upasani and Anita Chaturvedi of Language",
        "Technologies Research Centre, International Institute of Information Technology, Hyderabad, India for helping in preparing the data for some of the language-encoding pairs.",
        "The comments of reviewers also helped in improving the paper."
      ]
    }
  ]
}
