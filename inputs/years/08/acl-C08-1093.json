{
  "info": {
    "authors": [
      "Stefan Riezler",
      "Yi Liu",
      "Alexander Vasserman"
    ],
    "book": "International Conference on Computational Linguistics",
    "id": "acl-C08-1093",
    "title": "Translating Queries into Snippets for Improved Query Expansion",
    "url": "https://aclweb.org/anthology/C08-1093",
    "year": 2008
  },
  "references": [
    "acl-D07-1090",
    "acl-J03-1002",
    "acl-J04-4002",
    "acl-J93-2003",
    "acl-P03-1003",
    "acl-P07-1059"
  ],
  "sections": [
    {
      "text": [
        "User logs of search engines have recently been applied successfully to improve various aspects of web search quality.",
        "In this paper, we will apply pairs of user queries and snippets of clicked results to train a machine translation model to bridge the \"lexical gap\" between query and document space.",
        "We show that the combination of a query-to-snippet translation model with a large n-gram language model trained on queries achieves improved contextual query expansion compared to a system based on term correlations."
      ]
    },
    {
      "heading": "1. Introduction",
      "text": [
        "In recent years, user logs of search engines have attracted considerable attention in research on query clustering, query suggestions, query expansion, or general web search.",
        "Besides the sheer size of these data sets, the main attraction of user logs lies in the possibility to capitalize on users' input, either in form of user-generated query reformulations, or in form of user clicks on presented search results.",
        "However noisy, sparse, incomplete, and volatile these data may be, recent research has presented impressive results that are based on simply taking the majority vote of user clicks as a signal for the relevance of results.",
        "In this paper we will apply user logs to the problem of the \"word mismatch\" or \"lexical chasm\" (Berger et al., 2000) between user queries and documents.",
        "The standard solution to this problem, query expansion, attempts to overcome this mismatch in query and document vocabularies by adding terms with similar statistical properties to those in the original query.",
        "This will increase the chances of matching words in relevant documents and also decrease the ambiguity of the overall query that is inherent to natural language.",
        "A successful approach to this problem is local feedback, or pseudo-relevance feedback (Xu and Croft, 1996), where expansion terms are extracted from the topmost documents that were retrieved in an initial retrieval round.",
        "Because of irrelevant results in the initial retrieval, caused by ambiguous terms or retrieval errors, this technique may cause expansion by unrelated terms, leading to query drift.",
        "Furthermore, the requirement of two retrieval steps is computationally expensive.",
        "Several approaches have been presented that deploy user query logs to remedy these problems.",
        "One set of approaches focuses on user reformulations of queries that differ only in one segment (lones et al., 2006; Fonseca et al., 2005; Huang et al., 2003).",
        "Such segments are then identified as candidate expansion terms, and filtered by various signals such as cooccurrence in similar sessions or log-likelihood ratio of original and expansion phrases.",
        "Other approaches focus on the relation of queries and retrieval results, either by deploying the graph induced by queries and user clicks in calculating query similarity (Beeferman and Berger, 2000; Wen et al., 2002; Baeza-Yates and Tiberi, 2007), or by leveraging top results from past queries to provide greater context in finding related queries (Raghavan and Sever, 1995; Fitzpatrick and Dent, 1997; Sahami and Heilman, 2006).",
        "Cui et al.",
        "(2002) present an all together different way to deploy user clickthrough data by extracting expansion terms directly from clicked results.",
        "They claim significant improvements over the local feedback technique of Xu and Croft (1996).",
        "Cui et al.",
        "'s (2002) work is the closest to ours.",
        "We follow their approach in extracting expansion terms directly from clicked results, however, with a focus on high precision of query expansion.",
        "While expansion from the domain of document terms has the advantage that expansion terms are guaranteed to be in the search domain, expansion precision may suffer from the noisy and indirect \"approval\" of retrieval results by user clicks.",
        "Thus expansion terms from the document domain are more likely to be generalizations, specifications, or otherwise related terms, than terms extracted from query substitutions that resemble synonyms more closely.",
        "Furthermore, if the model that learns to correlate document terms to query terms is required to ignore context in order to generalize, finding appropriate expansions for ambiguous query terms is difficult.",
        "Our approach is to look at the \"word mismatch\" problem as a problem of translating from a source language of queries into a target language of documents, represented as snippets.",
        "Since both queries and snippets are arguably natural language, statistical machine translation technology (SMT) is readily applicable to this task.",
        "In previous work, this has been done successfully for question answering tasks (Riezler et al., 2007; Soricut and Brill, 2006; Echihabi and Marcu, 2003; Berger et al., 2000), but not for web search in general.",
        "Cui et al.",
        "'s (2002) model is to our knowledge the first to deploy query-document relations for direct extraction of expansion terms for general web retrieval.",
        "Our SMT approach has two main advantages over Cui et al.",
        "'s model: Firstly, Cui et al.",
        "'s model relates document terms to query terms by using simple term frequency counts in session data, without considering smoothing techniques.",
        "Our approach deploys a sophisticated machine learning approach to word alignment, including smoothing techniques, to map query phrases to snippet phrases.",
        "Secondly, Cui et al.",
        "'s model only indirectly uses context information to disambiguate expansion terms.",
        "This is done by calculating the relationship of an expansion term to the whole query by multiplying its contributions to all query terms.",
        "In our SMT approach, contextual disambiguation is done by deploying an n-gram language model trained on queries to decide about the appropriateness of an expansion term in the context of the rest of the query terms.",
        "As shown in an experimental evaluation, together the orthogonal information sources of a translation model and a language model provide significantly better contextual query expansion than Cui et al.",
        "'s (2002) correlation-based approach.",
        "In the following, we recapitulate the essentials of Cui et al.",
        "'s (2002) model, and contrast it with our SMT-based query expansion system.",
        "Furthermore, we will present a detailed comparison of the two systems on a real-world query expansion task."
      ]
    },
    {
      "heading": "2. Query-Document Term Correlations",
      "text": [
        "The query expansion model of Cui et al.",
        "(2002) is based on the principle that if queries containing one term often lead to the selection of documents containing another term, then a strong relationship between the two terms is assumed.",
        "Query terms and document terms are linked via clicked documents in user sessions.",
        "Formally, Cui et al.",
        "(2002) compute the following probability distribution of document words wd given query words wq from counts over clicked documents D:",
        "The first term in the righthandside of equation 1 is a normalized tfidf weight of the the document term in the clicked document, and the second term is the relative cooccurrence of document and query term in sessions.",
        "Since equation 1 calculates expansion probabilities for each term separately, Cui et al.",
        "(2002) introduce the following cohesion formula that respects the whole query Q by aggregating the expansion probabilities for each query term:",
        "In contrast to local feedback techniques (Xu and Croft, 1996), Cui et al.",
        "'s algorithm allows to precompute term correlations offline by collecting counts from query logs.",
        "This reliance on pure frequency counting is both a blessing and a curse: On the one hand it allows for efficient non-iterative estimation, on the other hand it makes the implicit assumption that data sparsity will be overcome by counting from huge dafasets.",
        "The only attempt at smoothing that is made in this approach is a recurrence to words in query context, using equation 2, when equation 1 assigns zero probability to unseen pairs."
      ]
    },
    {
      "heading": "3. Query-Snippet Translation",
      "text": [
        "The SMT system deployed in our approach is an implementation of the alignment template approach of Och and Ney (Och and Ney, 2004).",
        "The basic features of the model consist of a translation model and a language model which go back to the noisy channel formulation of machine translation in Brown et al.",
        "(1993).",
        "Their \"fundamental equation of machine translation\" defines the job of a translation system as finding the English string e that is a translation of a foreign string f such that",
        "Equation 3 allows for a separation of a language model P(e), and a translation model P(f |e).",
        "Och and Ney (2004) reformulate equation 3 as a linear combination of feature functions hm(e,f) and weights Xm, including feature functions for translation models hi(e,f) = P(f|e) and language models hj(e) = P(e):",
        "The translation model used in our approach is based on the sequence of alignment models described in Och and Ney (2003).",
        "The relationship of translation model and alignment model for source language string f = ff and target string e = e{ is via a hidden variable describing an alignment mapping from source position j to target position",
        "The alignment af contains so-called null-word alignments cij = 0 that align source words to the empty word.",
        "The different alignment models described in Och and Ney (2003) each parameterize equation 5 differently so as to capture different properties of source and target mappings.",
        "All models are based on estimating parameters 6 by maximizing the likelihood of training data consisting of sentence-aligned, but not word-aligned strings {(fs, es) : s = 1,... ,S}.",
        "Since each sentence pair is linked by a hidden alignment variable a = af, the optimal 6 is found using unlabeled-data log-likelihood estimation techniques such as",
        "The final translation model is calculated from relative frequencies of phrases, i.e. consecutive sequences of words occurring in text.",
        "Phrases are extracted via various heuristics as larger blocks of aligned words from best word alignments, as described in Och and Ney (2004).",
        "Language modeling in our approach deploys an n-gram language model that assigns the following probability to a string w\\ of words (see Brants et al.",
        "(2007)):",
        "Estimation of n-gram probabilities is done by counting relative frequencies of n-grams in a corpus of user queries.",
        "Remedies against sparse data problems are achieved by various smoothing techniques, as described in Brants et al.",
        "(2007).",
        "For applications of the system to translate unseen queries, a standard dynamic-programming beam-search decoder (Och and Ney, 2004) that tightly integrates translation model and language model is used.",
        "Expansion terms are taken from those terms in the 5-best translations of the query that have not been seen in the original query string.",
        "In our opinion, the advantages of using an alignment-based translation model to correlate document terms with query terms, instead of relying on a term frequency counts as in equation 1, are as follows.",
        "The formalization of translation models as involving a hidden alignment variable allows us to induce a probability distribution that assigns some probability of being translated into a target word to every source word.",
        "This is a crucial step towards solving the problem of the \"lexical gap\" described above.",
        "Furthermore, various additional smoothing techniques are employed in alignment to avoid overfitting and improved coping with rare words (see Och and Ney (2003)).",
        "Lastly, estimation of hidden-variable models can be based on the well-defined framework of statistical estimation via the EM algorithm.",
        "Similar arguments hold for the language model: N-gram language modeling is a well-understood problem, with a host of well-proven smoothing techniques to avoid data sparsity problems (see Brants et al.",
        "(2007).)",
        "In combination, translation model and language model provide orthogonal sources of information to the overall translation quality.",
        "While the translation model induces a smooth probability distribution that relates source to target words, the language model deploys probabilities of target language strings to assess the adequacy of a target word as a translation in context.",
        "Reliance on ordering information of the words in the context of a source word is a huge advantage over the bag-of-words aggregation of context information in Cui et al's (2002) model.",
        "Furthermore, in the SMT model used in our approach, translation model and language model are efficiently integrated in a beam-search decoder.",
        "In our application of SMT to query expansion, queries are considered as source language sentences and snippets of clicked result documents as target sentences.",
        "A parallel corpus of sentence-aligned data is created by pairing each query with each snippet of its clicked results.",
        "Further adjustments to system parameters were applied in order to adapt the training procedure to this special data set.",
        "For example, in order to account for the difference in sentence length between queries and snippets, we set the null-word probability to 0.9.",
        "This allows us to improve precision of alignment of noisy data by concentrating the alignment to a small number of key words.",
        "Furthermore, extraction of phrases in our approach is restricted to the intersection of alignments from both translation directions, thus favoring precision over recall also in phrase extraction.",
        "The only major adjustment of the language model to the special case of query-snippet translation is the fact that we train our n-gram model on queries taken from user logs, instead of on standard English text.",
        "Table 3: Comparison of SMT-based expansion with correlation-based expansion on 7-point Likert-type scale."
      ]
    },
    {
      "heading": "4. Experimental Evaluation",
      "text": [
        "The training data for the translation model and the correlation-based model consist of pairs of queries and snippets for clicked results taken from anonymized query logs.",
        "Using snippets instead of full documents makes iterative training feasible and also reduces noise considerably.",
        "This parallel corpus of query-snippet pairs is fed into a standard SMT training pipeline (modulo the adjustments to word and phrase alignment discussed above).",
        "The parallel corpus consists of 3 billion query-snippet pairs that are input to training of word and phrase alignment models.",
        "The resulting phrase translation table that builds the basis of the translation model consists 700 million query-snippet phrase translations.",
        "A collection of data statistics for the training data is shown in table 1.",
        "The language model used in our experiment is a trigram language model trained on English queries in user logs.",
        "N-grams were cut off at a minimum frequency of 4.",
        "Data statistics for resulting unique n-grams are shown in table 2.",
        "Our experimental setup for query expansion deploys a real-world search engine, google.com, for a comparison of expansions from the SMT-based system and the correlation-based system.",
        "The experimental evaluation was done as direct comparison of search results for queries where both experimental systems suggested expansion terms.",
        "Since expansions from both experimental systems are done on top of the same underlying search engine, this allows us to abstract away from interactions with the underlying system.",
        "The queries used for evaluation were extracted randomly from 3+ word queries in user logs in order to allow the systems to deploy context information for expansion.",
        "sentence pairs",
        "source words",
        "target words",
        "tokens",
        "3 billion",
        "8 billion",
        "25 billion",
        "avg.",
        "length",
        "-",
        "2.6",
        "8.3",
        "1 -grams",
        "2-grams",
        "3-grams",
        "9 million",
        "1.5 billion",
        "5 billion",
        "items w/ agreement",
        "disagreements included",
        "# items",
        "102",
        "125",
        "mean item score",
        "0.333",
        "0.279",
        "95% conf.",
        "int.",
        "[0.216, 0.451]",
        "[0.176, 0.381]",
        "In order to evaluate Cui et al.",
        "'s (2002) correlation-based system in this setup, we required the system to assign expansion terms to particular query terms.",
        "This could be achieved by using a linear interpolation of scores in equation 2 and equation 1.",
        "Equation 1 thus introduces a preference for a particular query term to the whole-query score calculated by equation 2.",
        "Our reimplementation uses unigram and bigram phrases in queries and expansions.",
        "Furthermore, we use Okapi BM25 instead of tfidf in the calculation of equation 1 (see Robertson et al.",
        "(1998)).",
        "Query expansion for the SMT-based system is done by extracting terms introduced in the 5-best list of query translations as expansion terms for the respective query terms.",
        "The evaluation was performed by three independent raters.",
        "The raters were given task-specific rating guidelines, and were shown queries and 10-best search results from both systems, anonymized, and presented randomly on left or right sides.",
        "The raters' task was to evaluate the results on a 7-point Likert-type scale, defined as:",
        "-0.5: slightly worse",
        "^ikert's (1932) original rating system is a 5-point scale using integer scores 1 through 5.",
        "Our system uses average scores over three raters for each item, and uses a 7-point instead of a 5-point scale.",
        "See Dawes (2008) on the comparability of 5-, 7-, or 10-point scales.",
        "0: about the same 0.5: slightly better 1.0: better 1.5: much better",
        "Results on 125 queries where both systems suggested expansion terms are shown in table 3.",
        "For each query, rating scores are averaged over the scores assigned by three raters.",
        "The overall mean item score for a comparison of SMT-based expansion against correlation-based expansion was 0.333 for 102 items with rater agreement, and 0.279 for 125 items including rater disagreements.",
        "All result differences are statistically significant.",
        "Examples for SMT-based and correlation-based expansions are given in table 4.",
        "The first five examples are losses for the SMT-based system.",
        "In the first example, passport is replaced by the related, but not synonymous term visa in the SMT-based expansion.",
        "The second example is a loss for SMT-based expansion because of a replacement of the specific term debian by the more general term linux.",
        "The correlation-based expansions tv 30 rock in the third example, lampasas county sheriff home in the fourth example, and weakerthans tabs in the fifth example directly hit the title of relevant web pages, while the SMT-based expansion terms do not improve retrieval results.",
        "However, even from these negative examples it becomes apparent that the SMT-based expansion terms are clearly related to the query terms, and for a majority cases this has a positive effect.",
        "Such examples are shown in",
        "query",
        "SMT-based expansions",
        "corr-based expansions",
        "score",
        "applying U.S. passport",
        "passport - visa",
        "applying - home",
        "-1.0",
        "configure debian to use dhcp",
        "debian - linux configure - install",
        "configure - configuring",
        "-1.0",
        "how many episodes of 30 rock?",
        "episodes - season episodes - series",
        "how many episodes - tv many episodes - wikipedia",
        "-0.83",
        "lampasas county sheriff department",
        "department - office",
        "department - home sheriff - office",
        "-0.83",
        "weakerthans cat virtue chords",
        "chords - guitar chords - lyrics chords - tab",
        "cat - tabs chords - tabs",
        "-0.83",
        "Henry VIII Menu Portland, Maine",
        "menu - restaurant menu - restaurants",
        "Portland - six menu - england",
        "1.3",
        "ladybug birthday parties",
        "parties - ideas parties - party",
        "ladybug - kids",
        "1.3",
        "political cartoon calvin coolidge",
        "cartoon - cartoons",
        "political cartoon - encyclopedia",
        "1.3",
        "top ten dining, Vancouver",
        "dining - restaurants",
        "dining Vancouver - 10",
        "1.3",
        "international communication",
        "communication - communications",
        "international communication - college",
        "1.3",
        "in veterinary medicine",
        "communication - skills",
        "Table 5: Unique 5-best phrase-level translations of queries herbs for chronic constipation and herbs for mexican cooking.",
        "Table 6: Correlation-based expansions for queries herbs for chronic constipation and herbs for mexican cooking.",
        "the second set of expansions.",
        "SMT-based expansions such as henry viii restaurantportland, maine, or ladybug birthday ideas, or top ten restaurants, Vancouver achieve a change in retrieval results that does not result in a query drift, but rather in improved retrieval results.",
        "In contrast, the terms introduced by the correlation-based system are either only vaguely related or noise."
      ]
    },
    {
      "heading": "5. Discussion",
      "text": [
        "We attribute the experimental result of a significant preference for SMT-based expansions over correlation-based expansions to the fruitful combination of translation model and language model provided by the SMT system.",
        "The SMT approach can be viewed as a combined system that proposes candidate expansion via the translation model, and filters them by the language model.",
        "Thus we may find a certain amount of nonsensical expansion candidates at the phrase translation level.",
        "This can be seen from inspecting table 7 which shows the most probable phrase translations that are applicable to the queries herbs for chronic constipation and herbs for mexican cooking.",
        "The phrase table includes identity translations and closely related terms as most probable translations for nearly every phrase, however, it also clearly includes noisy and non-related terms.",
        "More importantly, an extraction of expansion terms from the phrase table alone would not allow to choose the appropriate term for the given query context.",
        "This can be attained by combining the phrase translations with a language model: As shown in table 5, the 5-best translations of the full queries attain a proper disambiguation of the senses of herbs by replacing the term by remedies, medicine, and supplements for the first query, and with spices for the second query.",
        "Expansion terms highlighted in bold face.",
        "The fact that the most probable translation for the whole query mostly is the identity translation can be seen as a feature, not as a bug, of the SMT-based approach: By the option to prefer identity translations or word reorderings over translations of source words, the SMT model effectively can choose not to generate any expansion terms.",
        "This will happen if none of the candidate phrase translations fit with high enough probability into the context of the whole query, as assessed by the language model.",
        "In contrast to the SMT model, the correlation-based model cannot fall back onto the ordering information of the language model, but aggregates information for the whole query from a bag-of-words of query terms.",
        "Table 6 shows the top three correlation-based expansion terms assigned to uni-grams and bigrams in the queries herbs for chronic constipation and herbs for mexican cooking.",
        "Expansion terms are chosen by overall highest weight and shown in bold face.",
        "Relevant expansion terms such as treatment or recipes that would disambiguate the meaning of herbs are in fact proposed by the correlation-based model, however, the cohesion score also promotes terms such as interpret or comas best whole-query expansions, thus leading to query drift.",
        "query terms",
        "n-best expansions",
        "herbs",
        "com",
        "treatment",
        "encyclopedia",
        "chronic",
        "interpret",
        "treating",
        "com",
        "constipation",
        "interpret",
        "treating",
        "com",
        "herbs for",
        "medicinal",
        "support",
        "women",
        "for chronic",
        "com",
        "gold",
        "encyclopedia",
        "chronic constipation",
        "interpret",
        "treating",
        "herbs",
        "cooks",
        "recipes",
        "com",
        "mexican",
        "recipes",
        "com",
        "cooks",
        "cooking",
        "cooks",
        "recipes",
        "com",
        "herbs for",
        "medicinal",
        "women",
        "support",
        "for mexican",
        "cooks",
        "com",
        "allrecipes"
      ]
    },
    {
      "heading": "6. Conclusion",
      "text": [
        "We presented an approach to contextual query expansion that deploys natural language technology in form of statistical machine translation.",
        "The key idea of our approach is to consider the problem of the \"lexical gap\" between queries and documents from a linguistic point of view, and attempt to bridge this gap by translating from the query language into the document language.",
        "Using search engine user logs, we could extract large amounts of parallel data of queries and snippets from clicked documents.",
        "These data were used to train an alignment-based translation model, and an n-gram based language model.",
        "The same data were used to train a reimplementation of Cui et al.",
        "'s (2002) term-correlation based query expansion system.",
        "An experimental comparison of the two systems showed a considerable preference for SMT-based expansions over correlation-based expansion.",
        "Our explanation for this result is the fruitful combination of the orthogonal information sources from translation model and language model.",
        "While in the SMT approach expansion candidates proposed by the translation model are effectively filtered by ordering information on the query context from the language model, the correlation-based approach resorts to an inferior bag-of-word aggregation of scores for the whole query.",
        "Furthermore, each component of the SMT model takes great care to avoid sparse data problems by various sophisticated smoothing techniques.",
        "In contrast, the correlation-based model relies on pure counts of term frequencies.",
        "An interesting task for future work is to dissect the contributions of translation model and language model, for example, by combining a correlation-based system with a language model filter.",
        "The challenge here is a proper integration of n-gram lookup into correlation-based expansion.",
        "herbs",
        "herbs herbal medicinal spices",
        "supplements remedies",
        "herbs for",
        "herbs for herbs herbs and with herbs",
        "herbs for chronic",
        "herbs for chronic and herbs for chronic herbs for",
        "for",
        "for",
        "for chronic",
        "for chronic chronic of chronic",
        "for chronic constipation",
        "for chronic constipation chronic constipation for constipation",
        "chronic",
        "chronic acute patients treatment",
        "chronic constipation",
        "chronic constipation of chronic constipation with chronic constipation",
        "constipation",
        "constipation bowel common symptoms",
        "for mexican",
        "for mexican mexican the mexican of mexican",
        "for mexican cooking",
        "mexican food mexican food and mexican glossary",
        "mexican",
        "mexican mexico the mexican",
        "mexican cooking",
        "mexican cooking mexican food mexican cooking",
        "cooking",
        "cooking",
        "culinary",
        "recipes",
        "cook",
        "food",
        "recipe"
      ]
    }
  ]
}
