{
  "info": {
    "authors": [
      "Stefan Schoenmackers",
      "Oren Etzioni",
      "Daniel S. Weld"
    ],
    "book": "Conference on Empirical Methods in Natural Language Processing",
    "id": "acl-D08-1009",
    "title": "Scaling Textual Inference to the Web",
    "url": "https://aclweb.org/anthology/D08-1009",
    "year": 2008
  },
  "references": [
    "acl-C00-1043",
    "acl-C92-2082",
    "acl-P06-2105",
    "acl-W02-1033",
    "acl-W07-1431"
  ],
  "sections": [
    {
      "text": [
        "Stefan Schoenmackers, Oren Etzioni, and Daniel S. Weld",
        "Q/A systems work by find-mtain an explicit answer to e systems are helpless if the inferred from multiple senn different pages.",
        "To solve introduce the Holmes sys- Figure 1: The architecture of Holmes.",
        "Most Web-based ing pages that c a question.",
        "Thes answer has to be tences, possibly this problem, we tem, which utilizes textual inference (TI) over tuples extracted from text.",
        "Whereas previous work on TI (e.g., the literature on textual entailment) has been applied to paragraph-sized texts, Holmes utilizes knowledge-based model construction to scale TI to a corpus of 117 million Web pages.",
        "Given only a few minutes, Holmes doubles recall for example queries in three disparate domains (geography, business, and nutrition).",
        "Importantly, Holmes's runtime is linear in the size of its input corpus due to a surprising property of many textual relations in the Web corpus – they are \"approximately\" functional in a well-defined sense."
      ]
    },
    {
      "heading": "1. Introduction and Motivation",
      "text": [
        "Numerous researchers have identified the Web as a rich source of answers to factual questions, e.g., (Kwok et al., 2001; Brill et al., 2002), but often the desired information is not stated explicitly even in a textual corpus as massive as the Web.",
        "Consider the question \"What vegetables help prevent osteoporosis?\"",
        "Since there is likely no sentence on the Web directly stating \"Kale prevents osteoporosis\", a system must infer that kale is an answer by combining facts from multiple sentences, possibly from different pages, which justify that conclusion: i.e., that kale is a vegetable, kale contains calcium, and calcium helps prevent osteoporosis.",
        "Textual Inference (TI) methods have advanced in recent years.",
        "For example, textual entailment techniques aim to determine whether one textual fragment (the hypothesis) follows from another (the text) (Dagan et al., 2005).",
        "While most TI researchers have focused on high-quality inferences from a small source text, we seek to utilize sizable chunks of the Web corpus as our source text.",
        "In order to do this, we must confront two major challenges.",
        "The first is uncertainty: TI is an imperfect process, particularly when applied to the Web corpus, hence probabilistic methods help to assess the confidence in inferences.",
        "The second challenge is scalability: how does inference time scale given increasingly large corpora as input?",
        "This paper describes Holmes, an implemented system, which addresses both challenges by carrying out scalable, probabilistic inference over ground assertions extracted from the Web.",
        "The input to Holmes is a conjunctive query, a set of inference rules expressed as Horn clauses, and large sets of ground assertions extracted from the Web, WordNet, and other knowledge bases.",
        "As shown in Figure 1, Holmes chains backward from the query, using the inference rules to construct a forest of proof trees from the ground assertions.",
        "This forest is converted",
        "Proceedings of the 2008 Conference on Empirical Methods in Natural Language Processing, pages 79-88, Honolulu, October 2008.",
        "©2008 Association for Computational Linguistics",
        "into a Markov network (a form of Knowledge-Based Model Construction (KBMC) (Wellman et al., 1992)) and evaluated using approximate probabilistic inference.",
        "Holmes operates in an anytime fashion – if desired it can keep iterating: searching for more proofs, and elaborating the Markov network.",
        "Holmes makes some important simplifying assumptions.",
        "Specifically, we use simple ground tuples to represent extracted assertions (e.g., contains(kale, calcium)).",
        "Syntacticproblems (e.g., anaphora, relative clauses) and semantic challenges (e.g., quantification, counterfactuals, temporal qualification) are delegated to the extraction system or simply ignored.",
        "This paper focuses on scalability for this subset of the TI task.",
        "We tested Holmes on 183 million distinct ground assertions extracted from the Web by the Tex-tRunner system (Banko et al., 2007), coupled with 159 thousand ground assertions from WordNet (Miller et al., 1990), and a compact set of hand-coded inference rules.",
        "Given a total of 55 to 145 seconds, Holmes was able to produce high-quality inferences that doubled the number of answers to example queries in three disparate domains: geography, business, and nutrition.",
        "We also evaluated how the speed of Holmes scaled with the size of its input corpus.",
        "In the general case, logical inference over a Horn theory (needed in order to produce the probabilistic network) is polynomial in the number of ground assertions, and hence in the size of the textual corpus.Unfortunately, this is prohibitive, since even low-order polynomial growth is fatal on a 117 millionpage corpus, let alone the full Web.",
        "Fortunately, the Web's long tail works in our favor.",
        "The relations we extract from text are approximately pseudo-functional (APF), as we formalize in Section 3, and this property leads to runtime that scales linearly with the corpus.",
        "To see the underlying intuition, consider the APF relation denoted by the phrase \"is married to;\" most of the time it maps a person's name to a small number of spousal names so this relation is APF.",
        "Section 3 shows why this APF property ensures linear scaling, and Section 4 demonstrates linear scaling in practice."
      ]
    },
    {
      "heading": "2. An Overview of H OLMES",
      "text": [
        "Holmes is a system designed to answer complex queries over large, noisy knowledge bases.",
        "As a motivating example, we consider the question \"What vegetables help prevent osteoporosis?\"",
        "As of this writing, Google has no pages explicitly stating 'kale helps prevent osteoporosis', making it challenging to return \"kale\" as an answer.",
        "However, there are numerous web pages stating that \"kale is high in calcium\" and others declaring that \"calcium helps prevent osteoporosis\".",
        "If we could combine those facts we could easily infer that \"kale\" is an answer to the question \"What vegetables help prevent osteoporosis?\"",
        "Holmes was designed to make such inferences while accounting for uncertainty in the process.",
        "Given a query, expressed as a conjunctive Datalog rule, Holmes generates a probabilistic model using knowledge-based model construction (KBMC) (Wellman et al., 1992).",
        "Specifically, Holmes utilizes fast, logical inference to find the subset of ground assertions and inference rules that may influence the answers to the query – enabling the construction of a small and focused Markov network.",
        "Since this graphical model is much smaller than one incorporating all ground assertions, probabilistic inference will be much faster than if naive compilation were used.",
        "Figure 1 summarizes the operation of Holmes.",
        "As with many theorem provers or KBMC systems, Holmes takes three inputs:",
        "1.",
        "A set of knowledge bases – databases of ground relational assertions, each with an estimate of its probability, which can be generated by TextRunner (Banko et al., our example, we would extract the assertions IsHighIn(kale, calcium) and Prevents(calcium, osteoporosis) from those sentences.",
        "2.",
        "A domain theory - A set of probabilistic inference rules written as Markov logic Horn clauses, which can be used to derive new assertions.",
        "The weight associated with each clause specifies its reliability.",
        "kale matches the query broccoli matches the query",
        "itive-ThroughBB^ high in .^T^",
        "Figure 2: Partial proof 'tree' (DAG) for the query \"What vegetables help prevent osteoporosis?\"",
        "Rectangles depict ground assertions from a knowledge base, rounded boxes are inferred assertions, and shaded squared represent the application of inference rules.",
        "Holmes converts this DAG into a Markov network in order to estimate the probability of each node.",
        "In Section 2.3 we identify several domain-independent rules, but a user may (optionally) specify additional, domain-specific rules if desired.",
        "In our example, we assume we are given the domain-specific rule: Prevents(X,Z) IsHighIn(X,Y) APrevents(Y,Z)",
        "3.",
        "A conjunctive query is specified as a Datalog rule.",
        "For example, the question \"What vegetables help prevent osteoporosis?\"",
        "could be writtenas: query(X) IS-A(X,Vegetable) A Prevents(X,osteoporosis) and returns a set of answers to the query, each with an associated probability.",
        "To find these answers and their associated probabilities, Holmes first finds all ground assertions in the knowledge bases that are potentially relevant to the query.",
        "This is efficiently done using the inference rules to chain backwards from the query.",
        "Note that the generated candidate answers, themselves, are less important than the associated proof trees.",
        "Furthermore, since Holmes uses these 'trees' (actually, DAGs) to generate a probabilistic graphical model, Holmes seeks to find as many proof trees as possible for each query result – each may influence the final belief in that result.",
        "Figure 2 shows a partial proof tree for our example query.",
        "To handle uncertainty, Holmes now constructs a ground Markov network from the proof trees and the Markov-logic-encoded inference rules.",
        "Markov networks (Pearl, 1988) model the joint distribution of a set of variables by creating an undirected graph with one node for each random variable, and representing dependencies between variables with cliques in the graph.",
        "Each clique has a corresponding potential function <<k, which returns a non-negative value based on the state of variables in the clique.",
        "The probability of a state, x, is given by where the partition function Z is a normalizing term, and X{k} denotes the state of all the variables in clique k.",
        "Holmes converts the proof trees into a Markov network in a manner pioneered by the Markov Logic framework of Richardson and Domingos (2006).",
        "A Boolean variable is created to represent the truth of each assertion in the proof forest.",
        "Next, Holmes adds edges to the Markov network to create a clique corresponding to each application of an inference rule in the proof forest.",
        "Following the Markov Logic framework, the potential function of a clique has form <<(x) = ew if all member nodes are true (w denotes the weight of the inference rule), and <<(x) = 1 otherwise.",
        "The probabilities of leaf nodes are derived from the underlying knowledge base, and inferred nodes are biased with an exponential prior.",
        "Finally, Holmes computes the approximate probability of each answer by running a variant of loopy belief propagation (Pearl, 1988) over the Markov network.",
        "In our experience this method performs well on networks derived from our Horn clause proof forest, but one could use Monte Carlo techniques or even exact methods if desired.",
        "Note that this architecture allows Holmes to combine information from multiple web pages to infer assertions not explicitly seen in the textual corpus.",
        "Because this inference is done using a Markov network, it correctly handles uncertain extractions and probabilistic dependencies.",
        "By using KBMC to create a custom, focused network for each query, the amount of probabilistic inference is reduced to manageable proportions.",
        "1 Query Result",
        "Query Result",
        "kale",
        "kale",
        "broccoli",
        "broccoli",
        "IS-A",
        "helps prevent",
        "IS-A",
        "helps prevent",
        "vegetable",
        "osteoporosis",
        "vegetable",
        "osteoporosis",
        "(WordNet : 0.9)",
        "t (Inferred :,0.88) ,",
        "(WordNet : 0.9)",
        "(Inferred : 0.49) A",
        "kale",
        "magnesium",
        "kale",
        "calcium",
        "broccoli",
        "is high in",
        "helps prevent",
        "is high in",
        "helps prevent",
        "is high in",
        "magnesium",
        "osteoporosis",
        "calcium",
        "osteoporosis",
        "calcium",
        "(TextRunner 0 39)",
        "(TextRunner : 0.39)",
        "(TextRunner : 0.39)",
        "(TextRunner 0 68)",
        "(TextRunner : 0.39)",
        "Because exact probabilistic inference is #P-complete, Holmes uses approximate methods, but even these techniques have problems if the Markov network gets too large.",
        "As a result, Holmes creates the network incrementally.",
        "After the first proof trees are generated, Holmes creates the model and performs approximate probabilistic inference.",
        "If more time is available then Holmes searches for additional proof trees and updates the network (Figure 1).",
        "This incremental process allows Holmes to return initial results (with preliminary probability estimates) as soon as they are discovered.",
        "For efficiency, Holmes exploits standard Datalog optimizations (e.g., it only expands proofs of recently added nodes and it uses an approximation to magic sets (Ullman, 1989), rather than simple backwards chaining).",
        "For tractability, we also allow the user to limit the number of transitive inference steps for any inference rule.",
        "Holmes also includes a few enhancements for dealing with information extracted from natural language.",
        "For example, Holmes's inference rules support substring/regex matching of ground assertions, to accommodate simple variations in text.",
        "Holmes also can be restricted to only operate over proper nouns, which is useful for queries involving named entities.",
        "Holmes is given the following set of six domain-independent rules, which are similar to the upward monotone rules introduced by (MacCartney and Manning, 2007)."
      ]
    },
    {
      "heading": "1.. Observed relations are likely to be true:",
      "text": []
    },
    {
      "heading": "2.. Synonym substitution preserves meaning:",
      "text": []
    },
    {
      "heading": "4.. Generalizations preserve meaning:",
      "text": []
    },
    {
      "heading": "6.. Transitivity of Part Meronyms:",
      "text": [
        "where Rtr matches '* in' (e.g., 'born in').",
        "and we know from WordNet that Paris is in France, then by inference rule 6, we know that BornIn(x,'Paris') will yield valid results for Q(X) .",
        "Although all of these rules contain at most two relations in the body, Holmes allows an arbitrary number of relations in the query and rule bodies.",
        "However, we have found that even simple rules can dramatically improve some queries.",
        "We set the rule weights to capture the intuition that deeper inferences decrease the likelihood (as there are more chances to make mistakes), whereas additional, independent proof trees increase the likelihood (as there is more supporting evidence).",
        "Specifically, in our experiments we set the prior on inferred facts to -0.75, the weight on rule 1 to 1.5, and the weights on all other rules to 0.6.",
        "At present, we define these weights manually, but we expect to learn the parameter values in the future."
      ]
    },
    {
      "heading": "3. Scaling Inference to the Web",
      "text": [
        "If TI is applied to a corpus containing hundreds of millions or even billions of pages, its run time has to be at most linear in the size of the corpus.",
        "This section shows that under some reasonable assumptions inference does scale linearly.",
        "We start our analysis with two simplifications.",
        "First, we assume that the number of distinct, ground assertions in the KBs, grows at most linearly with the size of the textual corpus.",
        "This is certainly true for assertions extracted by TextRunner and Kylin, and follows from our exclusion of texts with complex quantified sentences.",
        "Our analysis now proceeds to consider scaling with respect to |A| for a fixed query and set of inference rules.",
        "Our second assumption is that the size of every proof tree is bounded by some constant, m. This is a strong assumption and one that depends on the precise set of inference rules and pattern of ground assertions.",
        "However, it holds in our experience, and if necessary could be enforced by terminating the search for proof trees at a certain depth, e.g., log(m).",
        "Holmes's knowledge-based model construction has two parts: construction of the proof forest and conversion of the forest into a Markov network.",
        "Since the Markov network is essentially isomorphic to the proof forest, the conversion will be if the forest is linear in size, which is ensured if the time to construct the proof trees is O(| We show this in the remainder of this section.",
        "Recall that Holmes requires inference rules to be function-free Horn clauses.",
        "While this limits expressivity to some degree, it provides a huge speed benefit – logical inference over Horn clauses can be done in polynomial time, whereas general propositional inference (i.e., from grounded first-order rules) is NP-complete.",
        "Alas, even low-order polynomial blowup is unacceptable when the textual corpus reaches Web scale; we seek linear growth.",
        "Intuitively, there are two places where polynomial expansion could cause trouble.",
        "First, the number of different types of proofs (i.e., first order proofs) could grow too quickly, and secondly, a given type of proof tree might apply to too many ground assertions (\"tuples\" in database lingo).",
        "We treat these issues in turn.",
        "Under our assumptions, each proof tree can be represented as an expression in relational algebra with at most m equijoins (Ullman, 1989), each stemming from the application of an inference rule.",
        "Since the number of rules is fixed, as is m, there are a constant number of possible first-order proof trees.",
        "The bigger concern is that any one of these firstorder trees might result in a polynomial number of ground trees; if so, the size of the ground forest (and corresponding Markov network) could grow too quickly.",
        "In fact, polynomial growth is a common phenomena in database query evaluation.",
        "Luckily, most relations in the Web corpus behave more favorably.",
        "We introduce a property of relations that ensures m-way joins, and therefore all proof trees up to size m, can be computed in O(| A|) time.",
        "The intuition is that most relations derived from large corpora have a 'heavy-tailed' distribution, wherein a few objects appear many times in a relation, but most appear only once or twice, thus joins involving rare objects lead to a small number of results, and so the main limitation on scalability is common objects.",
        "We now prove that if these common objects account for a small enough fraction of the relation, then joins will still scale linearly.",
        "We focus on binary relations, but these results can easily be extended to relations of larger arity.",
        "Definition 1 A relation, R = {(x^y^)} ç X x Y, is pseudo-functional (PF) in x with degree k, if Vx G X : |{y|(x,y) G R}| < k. When the precise variable and degree is irrelevant to discussion, we simply say \"R is PF.\"",
        "An m-way equijoin over relations that are PF in the join variables will have at most km * |R| results.",
        "Since km is constant for a given join and |R| scales linearly in the size of the textual corpus, proof tree construction over PF relations also scales linearly.",
        "However, due to their heavy-tailed distributions, most relations extracted from the Web fit the pseudo-functional definition in most, but not all values of X. Fortunately, it turns out that in most cases these \"bad\" values of X are rare and hence don't influence the join size significantly.",
        "We formalize this intuition by defining a class of approximately pseudo-functional (APF) relations and proving that joining two APF relations produces at most a linear number of results.",
        "Definition 2 A relation, R, is approximately pseudo-functional (APF) in x with degree k, ifX can be partitioned into two sets XG and XB such that for all x G XG R is PF with degree k and Theorem 1.",
        "If relation R\\ is APF in y with degree k\\ and R2 is APF in y with degree k2 then the relation Q = Rim R2 has size at most O(max(|Ri|, |R2|)).",
        "Proof.",
        "Since Ri and R2 are APF, we know that Y can be partitioned into four groups: YBB =",
        "Ygg = YG1 fl YG2.",
        "We can show that each group leads to at most entries in Q.",
        "For y g Ybb",
        "This theorem and proof can easily be extended to",
        "Yb b are the \"doubly bad\" values of y that violate the PF definition for both relations, Ygg are the values that do not violate the PF definition for either relation, and YBG and YGB are the values that violate it in only R1 or R2, resp.",
        "an m-way equijoin, as long as each relation is APF in all arguments that are being joined.",
        "Theorem 2.",
        "If Q is the relation obtained by an equi-join over m relations Ri..m, each having size at most and if all Ri_m are APF in all arguments that they are joined in with degree at most kmax, and if H 1og(|Ri|) < then |Q| is",
        "The inequality in Theorem 2 relates the sizes of the relations (| R| ), the join (m) and the number of ground assertions (| However, in many cases we are interested in much smaller values of m than the inequality enables.",
        "We can relax the APF definition to allow a broader, but still scalable, class of m-way-APF relations.",
        "Corollary 3.",
        "IfQ is the relation obtained by an m-way join, and if each participating relation is APF in their joined variables with a bound of ki * |Rj| instead of ki * 1og(|Ri|), then the join is",
        "The final step in our scaling argument concerns probabilistic inference, which is #P-Complete if performed exactly.",
        "This is addressed in two ways.",
        "First, Holmes uses approximate methods, e.g., loopy belief propagation, which avoids the cost of exact inference – at the cost of reduced precision.",
        "Secondly, at a practical level, Holmes's incremental construction of the graphical model (Figure 1) allows it to bound the size of the network by terminating the search for additional proofs."
      ]
    },
    {
      "heading": "4. Experimental Results",
      "text": [
        "This section reports on measurements that confirm that linear scaling with |A| occurs in practice, and that Holmes's inference is not only scalable but also improves precision/recall on sample queries in a diverse set of domains.",
        "After describing the experimental domains and queries, Section 4.2 reports on the boost to the area under the precision/recall curve for a set of example queries in three domains: geography, business, and nutrition.",
        "Section 4.3 then shows that APF relations are very common in the Web corpus, and finally Section 4.4 demonstrates empirically that Holmes's inference time scales linearly with the number of pages in the corpus.",
        "Holmes utilized two knowledge bases in these experiments: TextRunner and WordNet.",
        "TextRunner contains approximately 183 million distinct ground assertions extracted from over 117 million web pages, and WordNet contains 159 thousand manually created IS-A, Part-Of, and Synonym assertions.",
        "In all queries, Holmes utilizes the domain-independent inference rules described in Section 2.3.",
        "Holmes additionally makes use of two domain-specific inference rules in the Nutrition domain, to demonstrate the benefits of including domain-specific information.",
        "Estimating the precision and relative recall of Holmes requires extensive and careful manual tagging of Holmes output.",
        "To make this feasible, we restricted ourselves to a set of twenty queries in three domains, but made the domains diverse to illustrate the broad scope of the system.",
        "We now describe each domain briefly.",
        "Geography: the query issued is: \"Who was born in one of the following countries?\"",
        "More formally, is bound to each of the following nine countries in turn {France, Germany, China, Thailand, Kenya, Morocco, Peru, Columbia, Guatemala}, yielding a total of nine queries.",
        "Because Web text often refers to a person's birth city rather than birth country, this query illustrates how combining an ground assertion (e.g.,",
        "BornIn(Alberto Fujimori, Lima)) with background knowledge (e.g., LocatedIn(Lima, Peru) )",
        "enables the system to draw new conclusions (e.g.,",
        "BornIn(Alberto Fujimori, Peru) ).",
        "Business: we issued the following two queries.",
        "1) Which companies are acquiring software companies?",
        "Formally, Q(X) :- Acquired(X, Y) A Develops(Y, 'software') This query tests Holmes's ability to scalably join a large number of assertions from multiple pages.",
        "2) Which companies are headquartered in the",
        "Answering this query comprehensively requires Holmes to combine a join (over the relations Head-quarteredIn and IS-A) with transitive inference on PartOf (e.g., Seattle is PartOf Washington which is PartOf the USA) and on IS-A (e.g., Microsoft IS-A software company which IS-A company).",
        "The ISA assertions came from both TextRunner (using patterns from (Hearst, 1992)) and WordNet.",
        "Figure 3: PR Curve for BornIn(X, {country}).",
        "Inference boosts the Area under the PR Curve (AuC) by 102 %.",
        "Table 1: Improvement in the AuC of Holmes over the Baseline and total inference time taken by Holmes.",
        "Results are summed over all queries in the geography, business, and nutrition domains.",
        "Inference time measured on unoptimized prototype.",
        "Nutrition: the nine queries issued are instances of \"What foods prevent disease?\"",
        "Where a food is a member of one of the classes: fruit, vegetable, or grain, and a disease is one of: anemia, scurvy, or osteoporosis.",
        "More formally, Q(X, {disease}) :-",
        "Our experiments in the nutrition domain utilized two domain-specific inference rules in addition to the ones presented in Section 2.3:",
        "Prevents(X,Y):-HighIn(X,Z) A Prevents(Z,Y) Prevents(X,Y):-Contains(X,Z) A Prevents(Z,Y)",
        "To measure the cost and benefit of Holmes's inference we need to define a baseline for comparison.",
        "Answering the conjunctive queries in the business and nutrition domains requires computing joins, which TextRunner does not do.",
        "Thus, we defined a baseline system, Baseline, which has access to the underlying Knowledge Bases (KBs) (TextRunner and WordNet), and the ability to compute joins using information explicitly stated in either KB, but does not have the ability to infer new assertions.",
        "We compared Holmes with Baseline in all three domains.",
        "Figure 3 depicts the combined precision/relative recall curves for the nine Geography queries.",
        "Holmes yields substantially higher recall (the shaded region) at modestly lower precision, doubling the area under the precision/recall curve (AuC).",
        "The other precision/recall curves also showed a slight drop in precision for substantial gains in recall.",
        "Table 1 summarizes the results, along with the total runtime needed for inference.",
        "Because relations in the business domain are much larger than in the other domains (i.e., 100x ground assertions), inference is slower in this domain.",
        "We note that inference is particularly helpful with rarely mentioned instances.",
        "However, inference can lead to errors when the proof tree contains joins on generic terms (e.g., \"company\") or common extraction errors (e.g., \"LLC\" as a company name).",
        "This is a key area for future work.",
        "To determine the prevalence of APF relations in Web text, we examined a sample of 500 binary relations selected randomly from TextRunner's ground assertions.",
        "The surface forms of the relations and arguments may misrepresent the true properties of the underlying concepts, so to better estimate the true properties we merged synonymous values as given by Resolver (Yates and Etzioni, 2007) or the most frequent sense of the word in WordNet.",
        "For example, we would consider BornIn(baby, hospital) and BornAt(infant, infirmary) to represent the same concept, and so would merge them into one instance of the 'Born In' relation.",
        "The largest two relations had over 1.25 million unique instances each, and 52% of the relations had more than 10,000 instances.",
        "For each relation R, we first found all instances of R extracted by TextRunner and merged all synonymous instances as described above.",
        "Then, for each argument of R we computed the smallest value, Kmin, such that R is APF with degree Since many interesting assertions can be inferred by simply joining two relations, we also considered the special case of 2-way joins using Corollary 3.",
        "We computed the smallest value, K2txl, such that the relation is two-way-APF with degree K2txl.",
        "Domain",
        "Increase",
        "Total Inference",
        "in AuC",
        "Time",
        "Geography",
        "+102%",
        "55 s",
        "Business",
        "+2,643%",
        "145 s",
        "Nutrition",
        "+5,595%",
        "64 s",
        "Figure 4: Prevalence of APF relations in Web text.",
        "The x-axis depicts the degree of pseudo-functionality, e.g., Kmin and K2M, (see definition 2); the y-axis lists the percent of relations that are APF with that degree.",
        "Results are averaged over both arguments.",
        "values of K. The results are averaged over both arguments of each binary relation.",
        "For arbitrary joins in this KB, 80% of the relations are APF with degree less than 496; for 2-way joins (like the ones in our inference rules and test queries), 80% of the relations are APF with degree less than 65.",
        "These results indicate that the majority of relations TextRunner extracted from text are APF, and so we can expect Holmes's techniques will allow efficient inference over most relations.",
        "While Theorem 2 guarantees that joins over those relations will be O(|R|), that notation hides a potentially large constant factor of Kminm.",
        "Fortunately the constant factor is significantly smaller in practice.",
        "To see why, we re-examine the proof: the large factor comes from assuming that all of R's first arguments which meet the PF definition are associated with exactly Kmin distinct second arguments.",
        "However, in our corpus 83% of first arguments are associated with only one second argument.",
        "Clearly, our worst-case analysis substantially overestimates inference time for most queries.",
        "Moreover, in additional experiments (omitted due to space limitations), measured join sizes grew linearly in the size of the corpus, but were on average two to three orders of magnitude smaller than the bounds given in the theory.",
        "This observation held across relations with different sizes and values of Kmin.",
        "While the results in Figure 4 may vary for other sets of relations, we believe the general trends hold.",
        "This is promising for Question Answering and Textual Inference systems, since if true it implies",
        "♦ Geography ■ Business i Nutrition",
        "Figure 5: The effects of corpus size on total inference time.",
        "We see approximately linear growth in all domains, and display the best fit lines and coefficient of determination (R) of each.",
        "that combining information from multiple difference source is feasible, and can allow such systems to infer answers not explicitly seen in any source.",
        "Since the previous subsection showed that most relations are APF in their arguments, our theory predicts Holmes's inference will scale linearly.",
        "We tested this hypothesis empirically by running inference over the test queries in our three domains, while varying the number of pages in the textual corpus.",
        "Figure 5 shows how the inference time Holmes used to answer all queries in each domain scales with KB size.",
        "For these queries, and several others we tested (not shown here), inference time grows linearly with the size of the KB.",
        "Based on these results we believe that Holmes can provide scalable inference over a wide variety of domains."
      ]
    },
    {
      "heading": "5. Related Work",
      "text": [
        "Textual Entailment systems are given two textual fragments, text T and hypothesis H, and attempt to decide if the meaning of H can be inferred from the meaning of T (Dagan et al., 2005).",
        "While many approaches have addressed this problem, our work is most closely related to that of (Raina et al., 2005; MacCartney and Manning, 2007; Tatu and Moldovan, 2006; Braz et al., 2005), which convert the inputs into logical forms and then attempt to 'prove' H from T plus a set of axioms.",
        "For instance, (Braz et al., 2005) represents T, H, and a set of rewrite rules in a description logic framework, and determines entailment by solving an integer linear program derived from that representation.",
        "f------",
        "s",
        "/",
        "/",
        "1",
        "1 1",
        " – APF",
        " – APF for two-way join",
        "160",
        "140",
        "S",
        "<a 120",
        "E",
        "i-",
        "100",
        "<D",
        "Ü",
        "80",
        "c",
        "s?",
        "_c",
        "60",
        "40",
        "o",
        "H",
        "20",
        "0",
        "These approaches and related ones (e.g., (Van Durme and Schubert, 2008)) use highly expressive representations, enabling them to express negation, temporal information, and more.",
        "Holmes's representation is much simpler – Markov Logic Horn Clauses for inference rules coupled with a massive database of ground assertions.",
        "However, this simplification allows Holmes to tackle a \"text\" of enormously larger size: 117 million Web pages versus a single paragraph.",
        "A second, if smaller, difference stems from the fact that instead of determining whether a single hypothesis sentence, H, follows from the text, Holmes tries to find all consequents that match a conjunctive query.",
        "Holmes is also related to open-domain question-answering systems such as Mulder (Kwok et al., (Harabagiu et al., 2000; Brill et al., 2001).",
        "However, these Q/A systems attempt to find individual documents or sentences containing the answer.",
        "They often perform deep analysis on promising texts, and back off to shallower, less reliable methods if those fail.",
        "In contrast, Holmes utilizes TI and attempts to combine information from multiple different sentences in a scalable way.",
        "While its ability to combine information from multiple sources is promising, Holmes has several limitations these Q/A systems do not have.",
        "Since Holmes relies on an information extraction system to convert sentences into ground predicates, any limitations of the IE system will be propagated to Holmes.",
        "Additionally, the logical representation Holmes uses limits the reasoning and types of questions it can answer.",
        "Holmes is geared towards answering questions which are naturally expressed as properties and relations of entities, and is not well suited to answering more abstract or open ended questions.",
        "Although we have demonstrated that Holmes is scalable, further work is needed to make it to run at interactive speeds.",
        "Finally, research in statistical relational learning such as MLNs (Richardson and Domingos, 2006), RMNs (Taskar et al., 2002), and others (Getoor and Taskar, 2007) have studied techniques for combining logical and probabilistic inference.",
        "Our inference rules are more restrictive than those allowed in MLNs, but this trade-off allows us to efficiently scale inference to large, open domain corpora.",
        "By constructing only cliques for satisfied inference rules, Holmes explicitly models the intuition behind LazySAT inference (Singla and Domingos, 2006) as used in MLNs.",
        "I.e., most Horn clause inference rules will be trivially satisfied since their antecedents will be false, so we only need to worry about ones where the antecedent is true."
      ]
    },
    {
      "heading": "6. Conclusions",
      "text": [
        "This paper makes three main contributions:",
        "1.",
        "We introduce and evaluate the Holmes system, which leverages KBMC methods in order to scale a class of TI methods to the Web.",
        "2.",
        "We define the notion of Approximately Pseudo-Functional (APF) relations and prove that, for a APF relations, Holmes's inference time increases linearly with the size of the input corpus.",
        "We show empirically that APF relations appear to be prevalent in our Web corpus (Figure 4), and that Holmes's runtime does scale linearly with the size of its input (Figure 5), taking only a few CPU minutes when run over 183 million distinct ground assertions.",
        "3.",
        "We present experiments demonstrating that, for a set of queries in the domains of geography, business, and nutrition, Holmes substantially improves the quality of answers (measured by AuC) relative to a \"no inference\" baseline.",
        "In the future, we plan more extensive tests to characterize when Holmes's inference is helpful.",
        "We also hope to examine in what cases jointly performing extraction and inference (as opposed to performing them separately) is feasible at scale.",
        "Finally, we plan to examine methods for Holmes to learn both rule weights and new inference rules."
      ]
    },
    {
      "heading": "Acknowledgements",
      "text": [
        "We thank the following for helpful comments on previous drafts: Fei Wu, Michele Banko, Mausam, Doug Downey, and Alan Ritter.",
        "This research was 0312988, and IIS-0307906, ONR grants N00014-08-1-0431 and N00014-06-1-0147, CALO grant 03000225, the WRF / TJ Cable Professorship as well as gifts from Google.",
        "The work was performed at the University of Washington's Turing Center."
      ]
    }
  ]
}
