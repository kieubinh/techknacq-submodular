{
  "info": {
    "authors": [
      "John DeNero",
      "David Chiang",
      "Kevin Knight"
    ],
    "book": "ACL-IJCNLP",
    "id": "acl-P09-1064",
    "title": "Fast Consensus Decoding over Translation Forests",
    "url": "https://aclweb.org/anthology/P09-1064",
    "year": 2009
  },
  "references": [
    "acl-D07-1014",
    "acl-D07-1079",
    "acl-D08-1024",
    "acl-D08-1065",
    "acl-J07-2003",
    "acl-N04-1022",
    "acl-N04-1035",
    "acl-N07-1063",
    "acl-P02-1040",
    "acl-P03-1021",
    "acl-P06-1121",
    "acl-P07-2026",
    "acl-P08-1023",
    "acl-P08-1025",
    "acl-P08-1067",
    "acl-P96-1024",
    "acl-W02-1019",
    "acl-W06-1606",
    "acl-W06-1666",
    "acl-W06-3601",
    "acl-W07-0734"
  ],
  "sections": [
    {
      "text": [
        "John DeNero David Chiang and Kevin Knight",
        "Computer Science Division Information Sciences Institute",
        "The minimum Bayes risk (MBR) decoding objective improves BLEU scores for machine translation output relative to the standard Viterbi objective of maximizing model score.",
        "However, MBR targeting BLEU is prohibitively slow to optimize over k-best lists for large k. In this paper, we introduce and analyze an alternative to MBR that is equally effective at improving performance, yet is asymptotically faster – running 80 times faster than MBR in experiments with 1000-best lists.",
        "Furthermore, our fast decoding procedure can select output sentences based on distributions over entire forests of translations, in addition to k-best lists.",
        "We evaluate our procedure on translation forests from two large-scale, state-of-the-art hierarchical machine translation systems.",
        "Our forest-based decoding objective consistently outperforms k-best list MBR, giving improvements of up to 1.0 BLEU."
      ]
    },
    {
      "heading": "1. Introduction",
      "text": [
        "In statistical machine translation, output translations are evaluated by their similarity to human reference translations, where similarity is most often measured by BLEU (Papineni et al., 2002).",
        "A decoding objective specifies how to derive final translations from a system's underlying statistical model.",
        "The Bayes optimal decoding objective is to minimize risk based on the similarity measure used for evaluation.",
        "The corresponding minimum Bayes risk (MBR) procedure maximizes the expected similarity score of a system's translations relative to the model's distribution over possible translations (Kumar and Byrne, 2004).",
        "Unfortunately, with a non-linear similarity measure like BLEU, we must resort to approximating the expected loss using a k-best list, which accounts for only a tiny fraction of a model's full posterior distribution.",
        "In this paper, we introduce a variant of the MBR decoding procedure that applies efficiently to translation forests.",
        "Instead of maximizing expected similarity, we express similarity in terms of features of sentences, and choose translations that are similar to expected feature values.",
        "Our exposition begins with algorithms over fc-best lists.",
        "A naive algorithm for finding MBR translations computes the similarity between every pair of k sentences, entailing O(k) comparisons.",
        "We show that if the similarity measure is linear in features of a sentence, then computing expected similarity for all k sentences requires only k similarity evaluations.",
        "Specific instances of this general algorithm have recently been proposed for two linear similarity measures (Tromble et al., 2008; Zhang and Gildea, 2008).",
        "However, the sentence similarity measures we want to optimize in MT are not linear functions, and so this fast algorithm for MBR does not apply.",
        "For this reason, we propose a new objective that retains the benefits of MBR, but can be optimized efficiently, even for non-linear similarity measures.",
        "In experiments using BLEU over 1000-best lists, we found that our objective provided benefits very similar to MBR, only much faster.",
        "This same decoding objective can also be computed efficiently from forest-based expectations.",
        "Translation forests compactly encode distributions over much larger sets of derivations and arise naturally in chart-based decoding for a wide variety of hierarchical translation systems (Chiang, 2007; Galley et al., 2006; Mi et al., 2008; Venugopal et al., 2007).",
        "The resulting forest-based decoding procedure compares favorably in both complexity and performance to the recently proposed latticebased MBR (Tromble et al., 2008).",
        "The contributions of this paper include a lineartime algorithm for MBR using linear similarities, a linear-time alternative to MBR using non-linear similarity measures, and a forest-based extension to this procedure for similarities based on gram counts.",
        "In experiments, we show that our fast procedure is on average 80 times faster than MBR using 1000-best lists.",
        "We also show that using forests outperforms using best lists consistently across language pairs.",
        "Finally, in the first published multi-system experiments on consensus decoding for translation, we demonstrate that benefits can differ substantially across systems.",
        "In all, we show improvements of up to 1.0 BLEU from consensus approaches for state-of-the-art large-scale hierarchical translation systems."
      ]
    },
    {
      "heading": "2. Consensus Decoding Algorithms",
      "text": [
        "Let e be a candidate translation for a sentence f, where e may stand for a sentence or its derivation as appropriate.",
        "Modern statistical machine translation systems take as input some f and score each derivation e according to a linear model of features: % A% • #%(f, e).",
        "The standard Viterbi decoding objective is to find e* = arg maxe A • 0(f, e).",
        "For MBR decoding, we instead leverage a similarity measure S(e; e') to choose a translation using the model's probability distribution P(e|f), which has support over a set of possible translations E. The Viterbi derivation e* is the mode of this distribution.",
        "MBR is meant to choose a translation that will be similar, on expectation, to any possible reference translation.",
        "To this end, MBR chooses e that maximizes expected similarity to the sentences in E under P(e|f ):",
        "MBR can also be interpreted as a consensus decoding procedure: it chooses a translation similar to other high-posterior translations.",
        "Minimizing risk has been shown to improve performance for MT (Kumar and Byrne, 2004), as well as other language processing tasks (Goodman, 1996; Goel and Byrne, 2000; Kumar and Byrne, 2002; Titov and Henderson, 2006; Smith and Smith, 2007).",
        "The distribution P(e|f) can be induced from a translation system's features and weights by exponentiating with base b to form a log-linear model:",
        "We follow Ehling et al.",
        "(2007) in choosing b using a held-out tuning set.",
        "For algorithms in this section, we assume that E is a k-best list and b has been chosen already, so P(e|f) is fully specified.",
        "Given any similarity measure S and a k-best list E, the minimum Bayes risk translation can be found by computing the similarity between all pairs of sentences in E, as in Algorithm 1.",
        "Algorithm 1 MBR over Sentence Pairs",
        "2: for e G E do 4: for e' G E do 7: return ee",
        "We can sometimes exit the inner for loop early, whenever Ae can never become larger than A (Ehling et al., 2007).",
        "Even with this shortcut, the running time of Algorithm 1 is O(k • n), where n is the maximum sentence length, assuming that S(e; e') can be computed in O(n) time.",
        "We now consider the case when S(e; e') is a linear function of sentence features.",
        "Let S(e; e') be a function of the form ^ ■ uoj (e) • (/j (e'), where 0j (e') are real-valued features of e', and ujj (e) are sentence-specific weights on those features.",
        "Then, the MBR objective can be rewritten as",
        "Equation 1 implies that we can find MBR translations by first computing all feature expectations, then applying S only once for each e. Algorithm 2 proceduralizes this idea: lines 1-4 compute feature expectations, and lines 5-11 find the translation with highest S relative to those expectations.",
        "The time complexity is O(k • n), assuming the number of non-zero features 0(e') and weights w(e) grow linearly in sentence length n and all features and weights can be computed in constant time.",
        "Algorithm 2 MBR over Features 1: 0 – [0 for j G J] 2: for e' G E do",
        "6: for e G E do 8: for j G J such that wj (e) = 0 do 11: return ë",
        "An example of a linear similarity measure is bag-of-words precision, which can be written as:",
        "where Ti is the set of unigrams in the language, and £(e, t) is an indicator function that equals 1 if t appears in e and 0 otherwise.",
        "Figure 1 compares Algorithms 1 and 2 using U(e; e').",
        "Other linear functions have been explored for MBR, including Taylor approximations to the logarithm of BLEU (Tromble et al., 2008) and counts ofmatch-ing constituents (Zhang and Gildea, 2008), which are discussed further in Section 3.3.",
        "2.3 Fast Consensus Decoding using Non-Linear Similarity Measures",
        "Most similarity measures of interest for machine translation are not linear, and so Algorithm 2 does not apply.",
        "Computing MBR even with simple non-linear measures such as BLEU, NIST or bag-of-words F1 seems to require O(k) computation time.",
        "However, these measures are all functions of features of e'.",
        "That is, they can be expressed as S(e; 0(e')) for a feature mapping 0 : E – Rn.",
        "For example, we can express BLEU(e; e') =",
        "In this expression, BLEU(e; e') references e' only via its n-gram count features c(e', t).",
        "is also a function of ngram counts: |e/| = t6Tl c(e/,t).",
        "The negative part operator (•)_ is equivalent to min(-, 0).",
        "l) Choose a distribution P over a set of translations E",
        "MBR over Sentence Pairs I MBR over Features"
      ]
    },
    {
      "heading": "2. j Compute pairwise similarity",
      "text": [
        "| efficient | |efficient for rusty coating|",
        "3j Max expected similarity 2j Compute expectations",
        "Figure 1: For the linear similarity measure U(e; e/), which computes unigram precision, the MBR translation can be found by iterating either over sentence pairs (Algorithm 1) or over features (Algorithm 2).",
        "These two algorithms take the same input (step 1), butldiverge in their consensus computations (steps 2 & 3).",
        "\"However, they produce identical results for U and any other linear similarityameasure.",
        "Following the structure of Equation 1, we can choose a translation e based on the feature expectations of e'.",
        "In particular, we can choose",
        "This objective differs from MBR, but has a similar consensus-building structure.",
        "We have simply moved the expectation inside the similarity function, just as we did in Equation 1.",
        "This new objective can be optimized by Algorithm 3, a procedure that runs in O(k • n) time if the count of non-zero features in e' and the computation time of S(e; 0(e')) are both linear in sentence length n.",
        "This fast consensus decoding procedure shares the same structure as linear MBR: first we compute feature expectations, then we choose the sentence that is most similar to those expectations.",
        "In fact, Algorithm 2 is a special case of Algorithm 3.",
        "Lines 7-9 of the former and line 7 of the latter are equivalent for linear S(e; e').",
        "Thus, for any linear similarity measure, Algorithm 3 is an algorithm for minimum Bayes risk decoding.",
        "\"3J Max feature similarity",
        "3/3",
        "1/4",
        "2/5",
        "1/3",
        "4/4",
        "0/5",
        "2/3",
        "0/4",
        "5/5",
        "ci",
        "C2",
        "C3",
        "6: for e G E do",
        "Algorithm 3 Fast Consensus Decoding",
        "2: for e' G E do 8: if Ae >A then A, e – Ae,e 9: return e",
        "As described, Algorithm 3 can use any similarity measure that is defined in terms of real-valued features of e'.",
        "There are some nuances of this procedure, however.",
        "First, the precise form of S(e; 0(e')) will affect the output, but S(e; E[0(e')]) is often an input point for which a sentence similarity measure S was not originally defined.",
        "For example, our definition of BLEU above will have integer valued 0(e') for any real sentence e', but E [0(e')] will not be integer valued.",
        "As a result, we are extending the domain of BLEU beyond its original intent.",
        "One could imagine different feature-based expressions that also produce BLEU scores for real sentences, but produce different values for fractional features.",
        "Some care must be taken to define S(e; 0(e')) to extend naturally from integer-valued to real-valued features.",
        "Second, while any similarity measure can in principle be expressed as S(e; 0(e')) for a sufficiently rich feature space, fast consensus decoding will not apply effectively to all functions.",
        "For instance, we cannot naturally use functions that include alignments or matchings between e and e', such as METEOR (Agarwal and Lavie, 2007) and TER (Snover et al., 2006).",
        "Though these functions can in principle be expressed in terms of features of e' (for instance with indicator features for whole sentences), fast consensus decoding will only be effective if different sentences share many features, so that the feature expectations effectively capture trends in the underlying distribution."
      ]
    },
    {
      "heading": "3. Computing Feature Expectations",
      "text": [
        "We now turn our focus to efficiently computing feature expectations, in service of our fast consensus decoding procedure.",
        "Computing feature expectations from k-best lists is trivial, but k-best lists capture very little of the underlying model's posterior distribution.",
        "In place of k-best",
        "Yo vial hombre con el telescopio",
        "Figure 2: This translation forest for a Spanish sentence encodes two English parse trees.",
        "Hyper-edges (boxes) are annotated with normalized transition probabilities, as well as the bigrams produced by each rule application.",
        "The expected count of the bigram \"man with\" is the sum of posterior probabilities of the two hyper-edges that produce it.",
        "In this example, we normalized inside scores at all nodes to 1 for clarity.",
        "lists, compact encodings of translation distributions have proven effective for MBR (Zhang and Gildea, 2008; Tromble et al., 2008).",
        "In this section, we consider BLEU in particular, for which the relevant features 0(e) are n-gram counts up to length n = 4.",
        "We show how to compute expectations of these counts efficiently from translation forests.",
        "Translation forests compactly encode an exponential number of output translations for an input sentence, along with their model scores.",
        "Forests arise naturally in chart-based decoding procedures for many hierarchical translation systems (Chiang, 2007).",
        "Exploiting forests has proven a fruitful avenue of research in both parsing (Huang, 2008) and machine translation (Mi et al., 2008).",
        "Formally, translation forests are weighted acyclic hyper-graphs.",
        "The nodes are states in the decoding process that include the span (i, j) of the sentence to be translated, the grammar symbol s over that span, and the left and right context words of the translation relevant for computing n-gram language model scores.",
        "Each hyper-edge h represents the application of a synchronous rule r that combines nodes corresponding to non-terminals in r into a node spanning the union of the child spans and perhaps some additional portion of the input sentence covered directly by r's lexical items.",
        "The weight of h is the incremental score contributed to all translations containing the rule application, including translation model features on r and language model features that depend on both r and the English contexts of the child nodes.",
        "Figure 2 depicts a forest.",
        "Each n-gram that appears in a translation e is associated with some h in its derivation: the h corresponding to the rule that produces the n-gram.",
        "Un-igrams are produced by lexical rules, while higherorder n-grams can be produced either directly by lexical rules, or by combining constituents.",
        "The n-gram language model score of e similarly decomposes over the h in e that produce n-grams.",
        "We can compute expected n-gram counts efficiently from a translation forest by appealing to the linearity of expectations.",
        "Let 0(e) be a vector of n-gram counts for a sentence e. Then, 0(e) is the sum of hyper-edge-specific n-gram count vectors 0(h) for all h in e. Therefore, E[0(e)] = Ehee E[0(h)].",
        "To compute n-gram expectations for a hyper-edge, we first compute the posterior probability of each h, conditioned on the input sentence f:",
        "where e iterates over translations in the forest.",
        "We compute the numerator using the inside-outside algorithm, while the denominator is the inside score of the root node.",
        "Note that many possible derivations of f are pruned from the forest during decoding, and so this posterior is approximate.",
        "The expected n-gram count vector for a hyper-edge is E[0(h)] = P(h|f) • 0(h).",
        "Hence, after computing P(h| f) for every h, we need only sum P(h|f) • 0(h) for all h to compute E[0(e)].",
        "This entire procedure is a linear-time computation in the number of hyper-edges in the forest.",
        "To complete forest-based fast consensus decoding, we then extract a k-best list of unique translations from the forest (Huang et al., 2006) and continue Algorithm 3 from line 5, which chooses the ee from the k-best list that maximizes",
        "BLEU(e; E[0(e')]).",
        "Zhang and Gildea (2008) embed a consensus decoding procedure into a larger multi-pass decoding framework.",
        "They focus on inversion transduction grammars, but their ideas apply to richer models as well.",
        "They propose an MBR decoding objective of maximizing the expected number of matching constituent counts relative to the model's distribution.",
        "The corresponding constituent-matching similarity measure can be expressed as a linear function of features of e', which are indicators of constituents.",
        "Expectations of constituent indicator features are the same as posterior constituent probabilities, which can be computed from a translation forest using the inside-outside algorithm.",
        "This forest-based MBR approach improved translation output relative to Viterbi translations.",
        "Tromble et al.",
        "(2008) describe a similar approach using MBR with a linear similarity measure.",
        "They derive a first-order Taylor approximation to the logarithm of a slightly modified definition of corpus BLEU, which is linear in n-gram indicator features £(e', t) of e'.",
        "These features are weighted by n-gram counts c(e, t) and constants 6 that are estimated from held-out data.",
        "The linear similarity measure takes the following form, where Tn is the set of n-grams:",
        "G(e; e') = 6o|e| 6t • c(e,t) • <J(e', t).",
        "Using G, Tromble et al.",
        "(2008) extend MBR to word lattices, which improves performance over k-best list MBR.",
        "Our approach differs from Tromble et al.",
        "(2008) primarily in that we propose decoding with an alternative to MBR using BLEU, while they propose decoding with MBR using a linear alternative to BLEU.",
        "The specifics of our approaches also differ in important ways.",
        "First, word lattices are a subclass of forests that have only one source node for each edge (i.e., a graph, rather than a hyper-graph).",
        "While forests are more general, the techniques for computing posterior edge probabilities in lattices and forests are similar.",
        "One practical difference is that the forests needed for fast consensus decoding are generated already by the decoder of a syntactic translation system.",
        "Second, rather than use BLEU as a sentence-level similarity measure directly, Tromble et al.",
        "(2008) approximate corpus BLEU with G above.",
        "The parameters 6 of the approximation must be estimated on a held-out data set, while our approach requires no such estimation step.",
        "Third, our approach is also simpler computationally.",
        "The features required to compute G are indicators ( e', t); the features relevant to us are counts c(e', t).",
        "Tromble et al.",
        "(2008) compute expected feature values by intersecting the translation lattice with a lattices for each n-gram t. By contrast, expectations of c(e', t) can all be computed with a single pass over the forest.",
        "This contrast implies a complexity difference.",
        "Let H be the number of hyper-edges in the forest or lattice, and T the number of n-grams that can potentially appear in a translation.",
        "Computing indicator expectations seems to require O(H • T) time because of automata intersections.",
        "Computing count expectations requires O(H) time, because only a constant number of n-grams can be produced by each hyper-edge.",
        "Our approaches also differ in the space of translations from which ee is chosen.",
        "A linear similarity measure like G allows for efficient search over the lattice or forest, whereas fast consensus decoding restricts this search to a k-best list.",
        "However, Tromble et al.",
        "(2008) showed that most of the improvement from lattice-based consensus decoding comes from lattice-based expectations, not search: searching over lattices instead of k-best lists did not change results for two language pairs, and improved a third language pair by 0.3 BLEU.",
        "Thus, we do not consider our use of k-best lists to be a substantial liability of our approach.",
        "Fast consensus decoding is also similar in character to the concurrently developed variational decoding approach of Li et al.",
        "(2009).",
        "Using BLEU, both approaches choose outputs that match expected n-gram counts from forests, though differ in the details.",
        "It is possible to define a similarity measure under which the two approaches are equivalent.",
        "the similarity measure B(e; e') = Yit6T2 [e(cey;fe'(t))] , where h(t) is the unigram prefix of bigram t."
      ]
    },
    {
      "heading": "4. Experimental Results",
      "text": [
        "We evaluate these consensus decoding techniques on two different full-scale state-of-the-art hierarchical machine translation systems.",
        "Both systems were trained for 2008 GALE evaluations, in which they outperformed a phrase-based system trained on identical data.",
        "Hiero is a hierarchical system that expresses its translation model as a synchronous context-free grammar (Chiang, 2007).",
        "No explicit syntactic information appears in the core model.",
        "A phrase discovery procedure over word-aligned sentence pairs provides rule frequency counts, which are normalized to estimate features on rules.",
        "The grammar rules of Hiero all share a single non-terminal symbol X, and have at most two non-terminals and six total items (non-terminals and lexical items), for example:",
        "my X2 's Xi – Xi de mi X2",
        "We extracted the grammar from training data using standard parameters.",
        "Rules were allowed to span at most 15 words in the training data.",
        "The log-linear model weights were trained using MIRA, a margin-based optimization procedure that accommodates many features (Crammer and Singer, 2003; Chiang et al., 2008).",
        "In addition to standard rule frequency features, we included the distortion and syntactic features described in",
        "Chiang et al.",
        "(2008).",
        "SBMT is a string-to-tree translation system with rich target-side syntactic information encoded in the translation model.",
        "The synchronous grammar rules are extracted from word aligned sentence pairs where the target sentence is annotated with a syntactic parse (Galley et al., 2004).",
        "Rules map source-side strings to target-side parse tree fragments, and non-terminal symbols correspond to target-side grammatical categories:",
        "NNSi de mi NN2",
        "We extracted the grammar via an array of criteria (Galley et al., 2006; DeNeefe et al., 2007; Marcu et al., 2006).",
        "The model was trained using minimum error rate training for Arabic (Och, 2003) and MIRA for Chinese (Chiang et al., 2008).",
        "Table 1: Fast consensus decoding is orders of magnitude faster than MBR when using BLEU as a similarity measure.",
        "Times only include reranking, not fc-best list extraction.",
        "We evaluated on both Chinese-English and Arabic-English translation tasks.",
        "Both Arabic-English systems were trained on 220 million words of word-aligned parallel text.",
        "For the Chinese-English experiments, we used 260 million words of word-aligned parallel text; the hierarchical system used all of this data, and the syntax-based system used a 65-million word subset.",
        "All four systems used two language models: one trained from the combined English sides of both parallel texts, and another, larger, language model trained on 2 billion words of English text (1 billion for Chinese-English SBMT).",
        "All systems were tuned on held-out data (1994 sentences for Arabic-English, 2010 sentences for Chinese-English) and tested on another dataset (2118 sentences for Arabic-English, 1994 sentences for Chinese-English).",
        "These datasets were drawn from the NIST 2004 and 2005 evaluation data, plus some additional data from the GALE program.",
        "There was no overlap at the segment or document level between the tuning and test sets.",
        "We tuned b, the base of the log-linear model, to optimize consensus decoding performance.",
        "Interestingly, we found that tuning b on the same dataset used for tuning A was as effective as tuning b on an additional held-out dataset.",
        "Taking expectations over 1000-best lists and using BLEU as a similarity measure, both MBR",
        "Table 2: Translation performance improves when computing expected sentences from translation forests rather than 10-best lists, which in turn improve over Viterbi translations.",
        "We also contrasted forest-based consensus decoding with BLEU and its linear approximation, G. Both similarity measures are effective, but BLEU outperforms G.",
        "and our variant provided consistent small gains of 0.0-0.2 BLEU.",
        "Algorithms 1 and 3 gave the same small BLEU improvements in each data condition up to three significant figures.",
        "The two algorithms differed greatly in speed, as shown in Table 1.",
        "For Algorithm 1, we terminated the computation of E[BLEU(e; e')] for each e whenever e could not become the maximal hypothesis.",
        "MBR speed depended on how often this shortcut applied, which varied by language and system.",
        "Despite this optimization, our new Algorithm 3 was an average of 80 times faster across systems and language pairs.",
        "Table 2 contrasts Algorithm 3 over 10-best lists and forests.",
        "Computing E[0(e')] from a translation forest rather than a 10-best list improved Hiero by an additional 0.8 BLEU (1.0 over the baseline).",
        "Forest-based expectations always outperformed k-best lists, but curiously the magnitude of benefit was not consistent across systems.",
        "We believe the difference is in part due to more aggressive forest pruning within the SBMT decoder.",
        "For forest-based decoding, we compared two similarity measures: BLEU and its linear Taylor approximation G from section 3.3.",
        "Table 2 shows",
        "were identical to standard BLEU.",
        "Arabic-English",
        "Objective",
        "Hiero",
        "SBMT",
        "Min.",
        "Bayes Risk (Alg 1)",
        "2h 47m",
        "12h42m",
        "Fast Consensus (Alg 3)",
        "5m 49s",
        "5m 22s",
        "Speed Ratio",
        "29",
        "142",
        "Chinese-English",
        "Objective",
        "Hiero",
        "SBMT",
        "Min.",
        "Bayes Risk (Alg 1)",
        "10h 24m",
        "3h52m",
        "Fast Consensus (Alg 3)",
        "4m 52s",
        "6m 32s",
        "Speed Ratio",
        "128",
        "36",
        "Arabic-English",
        "Expectations",
        "Similarity",
        "Hiero",
        "SBMT",
        "Baseline",
        "-",
        "52.0",
        "53.9",
        "10-best",
        "BLEU",
        "52.2",
        "53.9",
        "Forest",
        "BLEU",
        "53.0",
        "54.0",
        "Forest",
        "Linear G",
        "52.3",
        "54.0",
        "Chinese-English",
        "Expectations",
        "Similarity",
        "Hiero",
        "SBMT",
        "Baseline",
        "-",
        "37.8",
        "40.6",
        "10-best",
        "BLEU",
        "38.0",
        "40.7",
        "Forest",
        "BLEU",
        "38.2",
        "40.8",
        "Forest",
        "Linear G",
        "38.1",
        "40.8",
        "N-grams from baseline translations N-grams with high expected count",
        "Figure 3: N-grams with high expected count are more likely to appear in the reference translation that n-grams in the translation model's Viterbi translation, e*.",
        "Above, we compare the precision, relative to reference translations, of sets of n-grams chosen in two ways.",
        "The left bar is the precision of the n-grams in e*.",
        "The right bar is the precision of n-grams with E[c(e, t)] > p. To justify this comparison, we chose p so that both methods of choosing n-grams gave the same n-gram recall: the fraction of n-grams in reference translations that also appeared in e* or had E[c(e, t)] > p.",
        "that both similarities were effective, but BLEU outperformed its linear approximation.",
        "Forest-based consensus decoding leverages information about the correct translation from the entire forest.",
        "In particular, consensus decoding with BLEU chooses translations using n-gram count expectations E[c(e, t)].",
        "Improvements in translation quality should therefore be directly attributable to information in these expected counts.",
        "We endeavored to test the hypothesis that expected n-gram counts under the forest distribution carry more predictive information than the baseReference translation:",
        "Mubarak said that he received a telephone call from Sharon in which he said he was \"ready (to resume negotiations) but the Palestinians are hesitant.\"",
        "Baseline translation:",
        "Mubarak said he had received a telephone call from Sharon told him he was ready to resume talks with the Palestinians.",
        "Fast forest-based consensus translation:",
        "Mubarak said that he had received a telephone call from Sharon told him that he \"was ready to resume the negotiations), but the Palestinians are hesitant.\"",
        "Figure 4: Three translations of an example Arabic sentence: its human-generated reference, the translation with the highest model score under Hiero (Viterbi), and the translation chosen by forest-based consensus decoding.",
        "The consensus translation reconstructs content lost in the Viterbi translation.",
        "We attribute gains from fast consensus decoding to this increased predictive accuracy.",
        "Examining the translations chosen by fast consensus decoding, we found that gains in BLEU often arose from improved lexical choice.",
        "However, in our hierarchical systems, consensus decoding did occasionally trigger large reordering.",
        "We also found examples where the translation quality improved by recovering content that was missing from the baseline translation, as in Figure 4."
      ]
    },
    {
      "heading": "5. Conclusion",
      "text": [
        "We have demonstrated substantial speed increases in k-best consensus decoding through a new procedure inspired by MBR under linear similarity measures.",
        "To further improve this approach, we computed expected n-gram counts from translation forests instead of k-best lists.",
        "Fast consensus decoding using forest-based n-gram expectations and BLEU as a similarity measure yielded consistent improvements over MBR with k-best lists, yet required only simple computations that scale linearly with the size of the translation forest.",
        "The space of similarity measures is large and relatively unexplored, and the feature expectations that can be computed from forests extend beyond n-gram counts.",
        "Therefore, future work may show additional benefits from fast consensus decoding."
      ]
    },
    {
      "heading": "Acknowledgements",
      "text": [
        "This work was supported under DARPA GALE, Contract No.",
        "HR0011-06-C-0022.",
        "line Viterbi derivation e*, which is the mode of the distribution.",
        "To this end, we first tested the predictive accuracy of the n-grams proposed by e*: the fraction of the n-grams in e* that appear in a reference translation.",
        "We compared this n-gram precision to a similar measure of predictive accuracy for expected n-gram counts: the fraction of the n-grams t with E[c(e, t)] > p that appear in a reference.",
        "To make these two precisions comparable, we chose p such that the recall of reference n-grams was equal.",
        "Figure 3 shows that computing n-gram expectations – which sum over translations – improves the model's ability to predict which n-grams will appear in the reference.",
        "min(1, E[c(e',i)]).",
        "Assuming an n-gram appears at most once per sentence, these expressions are equivalent, and this assumption holds for most n-grams."
      ]
    }
  ]
}
