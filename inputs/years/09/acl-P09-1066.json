{
  "info": {
    "authors": [
      "Mu Li",
      "Nan Duan",
      "Dongdong Zhang",
      "Chi-Ho Li",
      "Ming Zhou"
    ],
    "book": "ACL-IJCNLP",
    "id": "acl-P09-1066",
    "title": "Collaborative Decoding: Partial Hypothesis Re-ranking Using Translation Consensus between Decoders",
    "url": "https://aclweb.org/anthology/P09-1066",
    "year": 2009
  },
  "references": [
    "acl-C08-1005",
    "acl-D08-1011",
    "acl-D08-1065",
    "acl-E06-1005",
    "acl-N04-1022",
    "acl-N07-1029",
    "acl-P02-1038",
    "acl-P03-1021",
    "acl-P05-1033",
    "acl-P06-1066",
    "acl-P06-1077",
    "acl-P07-2045",
    "acl-P08-1066",
    "acl-W04-3250"
  ],
  "sections": [
    {
      "text": [
        "Mu Li, Nan Duan, Dongdong Zhang, Chi-Ho Li, Ming Zhou",
        "Microsoft Research Asia Tianjin University",
        "Beijing, China Tianjin, China",
        "This paper presents collaborative decoding (co-decoding), a new method to improve machine translation accuracy by leveraging translation consensus between multiple machine translation decoders.",
        "Different from system combination and MBR decoding, which post-process the n-best lists or word lattice of machine translation decoders, in our method multiple machine translation decoders collaborate by exchanging partial translation results.",
        "Using an iterative decoding approach, n-gram agreement statistics between translations of multiple decoders are employed to re-rank both full and partial hypothesis explored in decoding.",
        "Experimental results on data sets for NIST Chinese-to-English machine translation task show that the co-decoding method can bring significant improvements to all baseline decoders, and the outputs from co-decoding can be used to further improve the result of system combination."
      ]
    },
    {
      "heading": "1. Introduction",
      "text": [
        "Recent research has shown substantial improvements can be achieved by utilizing consensus statistics obtained from outputs of multiple machine translation systems.",
        "Translation consensus can be measured either at sentence level or at word level.",
        "For example, Minimum Bayes Risk (MBR) (Kumar and Byrne, 2004) decoding over n-best list tries to find a hypothesis with lowest expected loss with respect to all the other translations, which can be viewed as sentence-level consensus-based decoding.",
        "Word based methods proposed range from straightforward consensus voting (Bangalore et al., 2001; Matusov et al., 2006) to more complicated word-based system combination model (Rosti et al., 2007; Sim et al., 2007) .",
        "Typically, the resulting systems take outputs of individual machine translation systems as input, and build a new confusion network for second-pass decoding.",
        "There have been many efforts dedicated to advance the state-of-the-art performance by combining multiple systems' outputs.",
        "Most of the work focused on seeking better word alignment for consensus-based confusion network decoding (Matusov et al., 2006) or word-level system combination (He et al., 2008; Ayan et al., 2008).",
        "In addition to better alignment, Rosti et al.",
        "(2008) introduced an incremental strategy for confusion network construction; and Hildebrand and Vogel (2008) proposed a hypotheses re-ranking model for multiple systems' outputs with more features including word translation probability and n-gram agreement statistics.",
        "A common property of all the work mentioned above is that the combination models work on the basis of n-best translation lists (full hypotheses) of existing machine translation systems.",
        "However, the n-best list only presents a very small portion of the entire search space of a Statistical Machine Translation (SMT) model while a majority of the space, within which there are many potentially good translations, is pruned away in decoding.",
        "In fact, due to the limitations of present-day computational resources, a considerable number of promising possibilities have to be abandoned at the early stage of the decoding process.",
        "It is therefore expected that exploring additional possibilities beyond n-best hypotheses lists for full sentences could bring improvements to consensus-based decoding.",
        "In this paper, we present collaborative decoding (or co-decoding), a new SMT decoding scheme to leverage consensus information between multiple machine translation systems.",
        "In this scheme, instead of using a post-processing step, multiple machine translation decoders collaborate during the decoding process, and translation consensus statistics are taken into account to improve ranking not only for full translations, but also for partial hypotheses.",
        "In this way, we expect to reduce search errors caused by partial hypotheses pruning, maximize the contribution of translation consensus, and result in better final translations.",
        "We will discuss the general co-decoding model, requirements for decoders that enable collaborative decoding and describe the updated model structures.",
        "We will present experimental results on the data sets of NIST Chinese-to-English machine translation task, and demonstrate that co-decoding can bring significant improvements to baseline systems.",
        "We also conduct extensive investigations when different settings of co-decoding are applied, and make comparisons with related methods such as word-level system combination of hypothesis selection from multiple n-best lists.",
        "The rest of the paper is structured as follows.",
        "Section 2 gives a formal description of the co-decoding model, the strategy to apply consensus information and hypotheses ranking in decoding.",
        "In Section 3, we make detailed comparison between co-decoding and related work such as system combination and hypotheses selection out of multiple systems.",
        "Experimental results and discussions are presented in Section 4.",
        "Section 5 concludes the paper."
      ]
    },
    {
      "heading": "2. Collaborative Decoding 2.1 Overview",
      "text": [
        "Collaborative decoding does not present a full SMT model as other SMT decoders do such as Pharaoh (Koehn, 2004) or Hiero (Chiang, 2005).",
        "Instead, it provides a framework that accommodates and coordinates multiple MT decoders.",
        "Conceptually, collaborative decoding incorporates the following four constituents:",
        "1.",
        "Co-decoding model.",
        "A co-decoding model consists of a set of member models, which are a set of augmented baseline models.",
        "We call decoders based on member models member decoders, and those based on baseline models baseline decoders.",
        "In our work, any Maximum A Posteriori (MAP) SMT model with log-linear formulation (Och, 2002) can be a qualified candidate for a baseline model.",
        "The requirement for a loglinear model aims to provide a natural way to integrate the new co-decoding features.",
        "2.",
        "Co-decoding features.",
        "Member models are built by adding additional translation consensus based co-decoding features to baseline models.",
        "A baseline model can be viewed as a special case of member model with all co-decoding feature values set to 0.",
        "Accordingly, a baseline decoder can be viewed as a special setting of a member decoder.",
        "3.",
        "Decoder coordinating.",
        "In co-decoding, each member decoder cannot proceed solely based on its own agenda.",
        "To share consensus statistics with others, the decoding must be performed in a coordinated way.",
        "4.",
        "Model training.",
        "Since we use multiple interrelated decoders and introduce more features in member models, we also need to address the parameter estimation issue in the framework of co-decoding.",
        "In the following subsections we first establish a general model for co-decoding, and then present details of feature design and decoder implementation, as well as parameter estimation in the co-decoding framework.",
        "We leave the investigation of using specific member models to the experiment section.",
        "For a given source sentence f, a member model in co-decoding finds the best translation e* among the set of possible candidate translations Jâ‚¬(f) based on a scoring function F:",
        "In the following, we will use dk to denote the kth member decoder, and also use the notation J-Ck (f) for the translation hypothesis space of f determined by dk.",
        "The mth member model can be written as:",
        "where <$>m (f, e) is the score function of the mthbaseline model, and each Wk (e, JCk (f)) is a partial consensus score function with respect to dkand is defined over e and JCk (f):",
        "where each hki(e, JCk(f)) is a feature function based on a consensus measure between e and JCk(f), and Aki is the corresponding feature weight.",
        "Feature index l ranges over all consensus-based features in Equation 3.",
        "Before discussing the design and computation of translation consensus based features, we first describe the multiple decoder coordination issue in co-decoding.",
        "Note that in Equation 2, though the baseline score function <&m(f, e) can be computed inside each decoder, the case of Wk (e, JCk (f)) is more complicated.",
        "Because usually it is not feasible to enumerate the entire hypothesis space for machine translation, we approximate JCk(f) with n-best hypotheses by convention.",
        "Then there is a circular dependency between co-decoding features and JCk (f) : on one hand, searching for n-best approximation of JCk (f) requires using Equation 2 to select top-ranked hypotheses; while on the other hand, Equation 2 cannot be computed until every JCk (f) is available.",
        "We address this issue by employing a bootstrapping method, in which the key idea is that we can use baseline models' n-best hypotheses as seeds, and iteratively refine member models' n-best hypotheses with co-decoding.",
        "Similar to a typical phrase-based decoder (Koehn, 2004), we associate each hypothesis with a coverage vector c to track translated source words in it.",
        "We will use JCk (Â°, f) for the set of hypotheses associated with c, and we also denote with JCk (f) = \\JC JCk (Â°, f) the set of all hypotheses generated by member decoder dk in decoding.",
        "The co-decoding process can be described as follows:",
        "1.",
        "For each member decoder dk, perform decoding with a baseline model, and memorize all translation hypotheses generated during decoding in JCk (f);",
        "2.",
        "Re-group translation hypotheses in JCk (f) into a set of buckets JCk (Â°, f) by the coverage vector c associated with each hypothesis;",
        "3.",
        "Use member decoders to re-decode source sentence f with member models.",
        "For member decoder dk, consensus-based features of any hypotheses associated with coverage vector c are computed based on current setting of JCs(c, f) for all s but k. New hypotheses generated by dk in re-decoding are cached in JCk (f); 4.",
        "Update all JCk (f) with JCk (f);",
        "5.",
        "Iterate from step 2 to step 4 until a preset iteration limit is reached.",
        "In the iterative decoding procedure described above, hypotheses of different decoders can be mutually improved.",
        "For example, given two decoders d1 and d2 with hypotheses sets J and JC2, improvements on JCi enable d2 to improve JC2, and in turn JC1 benefits from improved JC2, and so forth.",
        "Step 2 is used to facilitate the computation of feature functions hk_\\(e, JCk(')), which require both e and every hypothesis in JCk(') should be translations of the same set of source words.",
        "This step seems to be redundant for CKY-style MT decoders (Liu et al., 2006; Xiong et al., 2006; Chiang, 2005) since the grouping is immediately available from decoders because all hypotheses spanning the same range of source sentence have been stacked together in the same chart cell.",
        "But to be a general framework, this step is necessary for some state-of-the-art phrase-based decoders (Koehn, 2007; Och and Ney, 2004) because in these decoders, hypotheses with different coverage vectors can coexist in the same bin, or hypotheses associated with the same coverage vector might appear in different bins.",
        "Note that a member model does not enlarge the theoretical search space of its baseline model, the only change is hypothesis scoring.",
        "By rerunning a complete decoding process, member model can be applied to re-score all hypotheses explored by a decoder.",
        "Therefore step 3 can be viewed as full-scale hypothesis re-ranking because the re-ranking scope is beyond the limited n-best hypotheses currently cached in JCk.",
        "In the implementation of member decoders, there are two major modifications compared to their baseline decoders.",
        "One is the support for co-decoding features, including computation of feature values and the use of augmented co-decoding score function (Equation 2) for hypothesis ranking and pruning.",
        "The other is hypothesis grouping based on coverage vector and a mechanism to effectively access grouped hypotheses in step 2 and step 3.",
        "We now present the consensus-based feature functions hkii (e, JCk (D) introduced in Equation 3.",
        "In this work all the consensus-based features have the following formulation:",
        "where e is a translation off by decoder dm (m =fr k), e is a translation in JCk(f) and P(e'\\dk) is the posterior probability of translation e determined by decoder dk given source sentence f. Gi (e, e') is a consensus measure defined on e and e', by varying which different feature functions can be obtained.",
        "Referring to the log-linear model formulation, the translation posterior P(e' \\dk) can be computed as:",
        "where Fk (â€¢) is the score function given in Equation 2, and a is a scaling factor following the work of Tromble et al.",
        "(2008)",
        "To compute the consensus measures, we further decompose each G\\(e, e') into n-gram matching statistics between e and e'.",
        "Here we do not discriminate among different lexical n-grams and are only concerned with statistics aggregation of all n-grams of the same order.",
        "For each n-gram of order n, we introduce a pair of complementary consensus measure functions Gn+(e, e') and Gn-(e, e') described as follows:",
        "Gn+(e, e ) is the n-gram agreement measure function which counts the number of occurrences in e of n-grams in e. So the corresponding feature value will be the expected number of occurrences in JCk (f) of all n-grams in e:",
        "is a binary indicator function is 1 if the n-gram e\\+n~x occurs in",
        "Gn-(e, e ) is the n-gram disagreement measure function which is complementary to Gn + (e, e'):",
        "This feature is designed because Gn + (e, e ) does not penalize long translation with low precision.",
        "Obviously we have the following:",
        "So if the weights of agreement and disagreement features are equal, the disagreement-based features will be equivalent to the translation length features.",
        "Using disagreement measures instead of translation length there could be two potential advantages: 1) a length feature has been included in the baseline model and we do not need to add one; 2) we can scale disagreement features independently and gain more modeling flexibility.",
        "Similar to a language model score, n-gram consensus based feature values cannot be summed up from smaller hypotheses.",
        "Instead, it must be recomputed when building each new hypothesis.",
        "We adapt the Minimum Error Rate Training (MERT) (Och, 2003) algorithm to estimate parameters for each member model in co-decoding.",
        "Let Xm be the feature weight vector for member decoder dm, the training procedure proceeds as follows:",
        "2.",
        "Perform co-decoding using all member decoders on a development set D with X1,...,XM.",
        "For each decoder dm, find a new feature weight vector Xm which optimizes the specified evaluation criterion L on D using the MERT algorithm based on the n-best list JCm generated by dm:",
        "3.",
        "where T denotes the translations selected by re-ranking the translations in J-Cm using a new feature weight vector X",
        "Let A1 = A1t..., AM = AM and repeat step 2 until convergence or a preset iteration limit is reached.",
        "Source sentence",
        "In step 2, there is no global criterion to optimize the co-decoding parameters across member models.",
        "Instead, parameters of different member models are tuned to maximize the evaluation criteria on each member decoder's own n-best output.",
        "Figure 1 illustrates the training process of co-decoding with 2 member decoders.",
        "e and 0 otherwise.",
        "J-C2",
        "g",
        "decc",
        "der2",
        "Since there is more than one model in co-decoding, we cannot rely on member model's score function to choose one best translation from multiple decoders' outputs because the model scores are not directly comparable.",
        "We will examine the following two system combination based solutions to this task:",
        "â€¢ Word-level system combination (Rosti et al., 2007) of member decoders' n-best outputs",
        "â€¢ Hypothesis selection from combined n-best lists as proposed in Hildebrand and Vogel"
      ]
    },
    {
      "heading": "3. Experiments",
      "text": [
        "In this section we present experiments to evaluate the co-decoding method.",
        "We first describe the data sets and baseline systems.",
        "We conduct our experiments on the test data from the NIST 2005 and NIST 2008 Chinese-to-English machine translation tasks.",
        "The NIST 2003 test data is used for development data to estimate model parameters.",
        "Statistics of the data sets are shown in Table 1.",
        "In our experiments all the models are optimized with case-insensitive NIST version of BLEU score and we report results using this metric in percentage numbers.",
        "We use the parallel data available for the NIST 2008 constrained track of Chinese-to-English machine translation task as bilingual training data, which contains 5.1M sentence pairs, 128M Chinese words and 147M English words after pre-processing.",
        "GIZA++ is used to perform word alignment in both directions with default settings, and the intersect-diag-grow method is used to generate symmetric word alignment refinement.",
        "The language model used for all models (include decoding models and system combination models described in Section 2.6) is a 5-gram model trained with the English part of bilingual data and xinhua portion of LDC English Giga-word corpus version 3.",
        "We use three baseline decoders in the experiments.",
        "The first one (SYS1) is reimplementation of Hiero, a hierarchical phrase-based decoder.",
        "Phrasal rules are extracted from all bilingual sentence pairs, while rules with variables are extracted only from selected data sets including LDC2003E14, LDC2003E07, LDC2005T06 and LDC2005T10, which contain around 350,000 sentence pairs, 8.8M Chinese words and 10.3M English words.",
        "The second one (SYS2) is a BTG decoder with lexicalized reordering model based on maximum entropy principle as proposed by Xiong et al.",
        "(2006).",
        "We use all the bilingual data to extract phrases up to length 3.",
        "The third one (SYS3) is a string-to-dependency tree based decoder as proposed by Shen et al.",
        "(2008).",
        "For rule extraction we use the same setting as in SYS1.",
        "We parsed the language model training data with Berkeley parser, and then trained a dependency language model based on the parsing output.",
        "All baseline decoders are extended with n-gram consensus based co-decoding features to construct member decoders.",
        "By default, the beam size of 20 is used for all decoders in the experiments.",
        "We run two iterations of decoding for each member decoder, and hold the value of a in Equation 5 as a constant 0.05, which is tuned on the test data of NIST 2004 Chinese-to-English machine translation task.",
        "We first present the overall results of co-decoding on both test sets using the settings as we described.",
        "For member decoders, up to 4-gram agreement and disagreement features are used.",
        "We also implemented the word-level system combination (Rosti et al., 2007) and the hypothesis selection method (Hildebrand and Vogel, 2008).",
        "20-best translations from all decoders are used in the experiments for these two combination methods.",
        "Parameters for both system combination and hypothesis selection are also tuned on NIST 2003 test data.",
        "The results are shown in",
        "Table 2.",
        "Data set",
        "# Sentences",
        "# Words",
        "NIST 2003 (dev)",
        "919",
        "23,782",
        "NIST 2005 (test)",
        "1,082",
        "29,258",
        "NIST 2008 (test)",
        "1,357",
        "31,592",
        "NIST 2005",
        "NIST 2008",
        "SYS1",
        "38.66740.08",
        "27.67729.19",
        "SYS2",
        "38.04739.93",
        "27.25729.14",
        "SYS3",
        "39.50740.32",
        "28.75729.68",
        "Word-level Comb",
        "40.45740.85",
        "29.52730.35",
        "Hypo Selection",
        "40.09740.50",
        "29.02729.71",
        "In the Table 2, the results of a member decoder and its corresponding baseline decoder are grouped together with the later one for the member decoders.",
        "On both test sets, every member decoder performs significantly better than its baseline decoder (using the method proposed in Koehn (2004) for statistical significance test).",
        "We apply system combination methods to the n-best outputs of both baseline decoders and member decoders.",
        "We notice that we can achieve even better performance by applying system combination methods to member decoders' n-best outputs.",
        "However, the improvement margins are smaller than those of baseline decoders on both test sets.",
        "This could be the result of less diversified outputs from co-decoding than those from baseline decoders.",
        "In particular, the results for hypothesis selection are only slightly better than the best system in co-decoding.",
        "We also evaluate the performance of system combination using different n-best sizes, and the results on NIST 2005 data set are shown in Figure 2, where bl- and co-legends denote combination results of baseline decoding and co-decoding respectively.",
        "From the results we can see that combination based on co-decoding's outputs performs consistently better than that based on baseline decoders' outputs for all n-best sizes we experimented with.",
        "However, we did not observe any significant improvements for both combination schemes when n-best size is larger than 20.",
        "bl-comb co-comb bl-hyposel co-hyposel",
        "One interesting observation in Table 2 is that the performance gap between baseline decoders is narrowed through co-decoding.",
        "For example, the 1.5 points gap between SYS2 and SYS3 on NIST 2008 data set is narrowed to 0.5.",
        "Actually we find that the TER score between two member decoders' outputs are significantly reduced (as shown in Table 3), which indicates that the outputs become more similar due to the use of consensus information.",
        "For example, the TER score between SYS2 and SYS3 of the NIST 2008 outputs are reduced from 0.4238 to 0.2665.",
        "In the rest of this section we run a series of experiments to investigate the impacts of different factors in co-decoding.",
        "All the results are reported on NIST 2005 test set.",
        "We start with investigating the performance gain due to partial hypothesis re-ranking.",
        "Because Equation 3 is a general model that can be applied to both partial hypothesis and n-best (full hypothesis) re-scoring, we compare the results of both cases.",
        "Figure 3 shows the BLEU score curves with up to 1000 candidates used for re-ranking.",
        "In Figure 3, the suffix p denotes results for partial hypothesis re-ranking, and f for n-best re-ranking only.",
        "For partial hypothesis re-ranking, obtaining more top-ranked results requires increasing the beam size, which is not affordable for large numbers in experiments.",
        "We work around this issue by approximating beam sizes larger than 20 by only enlarging the beam size for the span covering the entire source sentence.",
        "From Figure 3 we can see that all decoders can gain improvements before the size of candidate set reaches 100.",
        "When the size is larger than 50, co-decoding performs consistently and significantly better than the re-ranking results on any baseline decoder's n-best outputs.",
        "SYS1f SYS2f SYS3f SYS1p",
        "SYS2p SYS3p",
        "Figure 4 shows the BLEU scores of a two-system co-decoding as a function of re-decoding iterations.",
        "From the results we can see that the results for both decoders converge after two iterations.",
        "In Figure 4, iteration 0 denotes decoding with baseline model.",
        "The setting of iteration 1 can be viewed as the case of partial co-decoding, in which one decoder uses member model and the other keeps using baseline model.",
        "The results show that member models help each other: although improvements can be made using a single member model, best BLEU scores can only be achieved when both member models are used as shown by the results of iteration 2.",
        "The results also help justify the independent parameter estimation of member decoders described in Section 2.5, since optimizing the performance of one decoder will eventually bring performance improvements to all member decoders.",
        "NIST 2005",
        "NIST 2008",
        "SYS1 vs. SYS2",
        "0.3190/0.2274",
        "0.4016/0.2686",
        "SYS1 vs. SYS3",
        "0.3252/0.1840",
        "0.4176/0.2469",
        "SYS2 vs. SYS3",
        "0.3498/0.2171",
        "0.4238/0.2665",
        "Next we examine the impacts of different consensus-based features in co-decoding.",
        "Table 4 shows the comparison results of a two-system co-decoding using different settings of n-gram agreement and disagreement features.",
        "It is clearly shown that both n-gram agreement and disagreement types of features are helpful, and using them together is the best choice.",
        "In Table 5 we show in another dimension the impact of consensus-based features by restricting the maximum order of n-grams used to compute agreement statistics.",
        "From the results we do not observe BLEU improvement for n > 4.",
        "One reason could be that the data sparsity for high-order Â«-grams leads to over fitting on development data.",
        "We also empirically investigated the impact of scaling factor a in Equation 5.",
        "It is observed in Figure 5 that the optimal value is between 0.01 ~ 0.1 on both development and test data.",
        "Discussion",
        "Word-level system combination (system combination hereafter) (Rosti et al., 2007; He et al., 2008) has been proven to be an effective way to improve machine translation quality by using outputs from multiple systems.",
        "Our method is different from system combination in several ways.",
        "System combination uses unigram consensus only and a standalone decoding model irrelevant to single decoders.",
        "Our method uses agreement information of n-grams, and consensus features are integrated into decoding models.",
        "By constructing a confusion network, system combination is able to generate new translations different from any one in the input n-best lists, while our method does not extend the search spaces of baseline decoding models.",
        "Member decoders only change the scoring and ranking of the candidates in the search spaces.",
        "Results in Table 2 show that these two approaches can be used together to obtain further improvements.",
        "The work on multi-system hypothesis selection of Hildebrand and Vogel (2008) bears more resemblance to our method in that both make use of n-gram agreement statistics.",
        "They also empirically show that n-gram agreement is the most important factor for improvement apart from language models.",
        "Lattice MBR decoding (Tromble et al., 2008) also uses n-gram agreement statistics.",
        "Their work focuses on exploring larger evidence space by using a translation lattice instead of the n-best list.",
        "They also show the connection between expected n-gram change and corpus Log-BLEU loss.",
        "SYS1",
        "SYS2",
        "Baseline",
        "38.66",
        "38.04",
        "+agreement -disagreement",
        "39.36",
        "39.02",
        "-agreement +disagreement",
        "39.12",
        "38.67",
        "+agreement +disagreement",
        "39.68",
        "39.61",
        "SYS1",
        "SYS2",
        "1",
        "38.75",
        "38.27",
        "2",
        "39.21",
        "39.10",
        "3",
        "39.48",
        "39.25",
        "4",
        "39.68",
        "39.61",
        "5",
        "39.52",
        "39.36",
        "6",
        "39.58",
        "39.47"
      ]
    },
    {
      "heading": "5. Conclusion",
      "text": [
        "Improving machine translation with multiple systems has been a focus in recent SMT research.",
        "In this paper, we present a framework of collaborative decoding, in which multiple MT decoders are coordinated to search for better translations by re-ranking partial hypotheses using augmented log-linear models with translation consensus based features.",
        "An iterative approach is proposed to re-rank all hypotheses explored in decoding.",
        "Experimental results show that with collaborative decoding every member decoder performs significantly better than its baseline decoder.",
        "In the future, we will extend our method to use lattice or hypergraph to compute consensus statistics instead of n-best lists."
      ]
    }
  ]
}
