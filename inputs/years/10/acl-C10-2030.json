{
  "info": {
    "authors": [
      "Son Doan",
      "Hua Xu"
    ],
    "book": "COLING – POSTERS",
    "id": "acl-C10-2030",
    "title": "Recognizing Medication related Entities in Hospital Discharge Summaries using Support Vector Machine",
    "url": "https://aclweb.org/anthology/C10-2030",
    "year": 2010
  },
  "references": [
    "acl-C00-1030",
    "acl-N01-1025",
    "acl-W00-0730",
    "acl-W02-0301",
    "acl-W03-1308",
    "acl-W03-1309",
    "acl-W08-0615"
  ],
  "sections": [
    {
      "text": [
        "Son Doan and Hua Xu",
        "Due to the lack of annotated data sets, there are few studies on machine learning based approaches to extract named entities (NEs) in clinical text.",
        "The 2009 i2b2 NLP challenge is a task to extract six types of medication related NEs, including medication names, dosage, mode, frequency, duration, and reason from hospital discharge summaries.",
        "Several machine learning based systems have been developed and showed good performance in the challenge.",
        "Those systems often involve two steps: 1) recognition of medication related entities; and 2) determination of the relation between a medication name and its modifiers (e.g., dosage).",
        "A few machine learning algorithms including Conditional Random Field (CRF) and Maximum Entropy have been applied to the Named Entity Recognition (NER) task at the first step.",
        "In this study, we developed a Support Vector Machine (SVM) based method to recognize medication related entities.",
        "In addition, we systematically investigated various types of features for NER in clinical text.",
        "Evaluation on 268 manually annotated discharge summaries from i2b2 challenge showed that the SVM-based NER system achieved the best F-score of 90.05% (93.20% Precision, 87.12% Recall), when semantic features generated from a rule-based system were included."
      ]
    },
    {
      "heading": "1. Introduction",
      "text": [
        "Named Entity Recognition (NER) is an important step in natural language processing (NLP).",
        "It has many applications in general language domain such as identifying person names, locations, and organizations.",
        "NER is crucial for biomedical literature mining as well (Hirschman, Morgan, & Yeh, 2002; Krauthammer & Nenadic, 2004) and many studies have focused on biomedical entities, such as gene/protein names.",
        "There are mainly two types of approaches to identify biomedical entities: rule-based and machine learning based approaches.",
        "While rule-based approaches use existing biomedical knowledge/resources, machine learning (ML) based approaches rely much on annotated training data.",
        "The advantage of rule-based approaches is that they usually can achieve stable performance across different data sets due to the verified resources, while machine learning approaches often report better results when the training data are good enough.",
        "In order to harness the advantages of both approaches, the combination of them, called the hybrid approach, has often been used as well.",
        "CRF and SVM are two common machine learning algorithms that have been widely used in biomedical NER (Takeuchi & Collier, 2003; Kazama, Makino, Ohta, & Tsujii, 2002; Yamamoto, Kudo, Konagaya, & Matsumoto, 2003; Torii, Hu, Wu, & Liu, 2009; Li, Savova, & Kipper-Schuler, 2008).",
        "Some studies reported better results using while others showed that the SVM was better (Tsochantaridis, Joachims, & Hofmann, 2005) in NER.",
        "Keerthi & Sundararajan (Keerthi & Sunda-rarajan, 2007) conducted some experiments and demonstrated that CRF and SVM were quite close in performance, when identical feature functions were used."
      ]
    },
    {
      "heading": "2. Background",
      "text": [
        "There has been large ongoing effort on processing clinical text in Electronic Medical Records (EMRs).",
        "Many clinical NLP systems have been developed, including MedLEE (Friedman, Alderson, Austin, Cimino, & Johnson, 1994), SymTex (Haug et al., 1997), Meta-Map (Aronson, 2001).",
        "Most of those systems recognize clinical named entities such as diseases, medications, and labs, using rule-based methods such as lexicon lookup, mainly because of two reasons: 1) there are very rich knowledge bases and vocabularies of clinical entities, such as the Unified Medical Language System (UMLS) (Lindberg, Humphreys, & McCray, 1993), which includes over 100 controlled biomedical vocabularies, such as RxNorm,",
        "SNOMED, and ICD-9-CM; 2) very few annotated data sets of clinical text are available for machine learning based approaches.",
        "Medication is one of the most important types of information in clinical text.",
        "Several studies have worked on extracting drug names from clinical notes.",
        "Evans et al.",
        "(Evans, Brownlow, Hersh, & Campbell, 1996) showed that drug and dosage phrases in discharge summaries could be identified by the CLARIT system with an accuracy of 80%.",
        "Chhieng et al.",
        "(Chhieng, Day, Gordon, & Hicks, 2007) reported a precision of 83% when using a string matching method to identify drug names in clinical records.",
        "Levin et al.",
        "(Levin, Krol, Doshi, & Reich, 2007) developed an effective rule-based system to extract drug names from anesthesia records and map to RxNorm concepts with 92.2% sensitivity and 95.7% specificity.",
        "Sirohi and Peissig (Sirohi & Peissig, 2005) studied the effect of lexicon sources on drug extraction.",
        "Recently, Xu et al.",
        "(Xu et al., 2010) developed a rule-based system for medication information extraction, called MedEx, and reported F-scores over 90% on extracting drug names, dose, route, and frequency from discharge summaries.",
        "Starting 2007, Informatics for Integrating Biology and the Bedside (i2b2), an NIH-funded National Center for Biomedical Computing (NCBC) based at Partners Healthcare System in Boston, organized a series of shared tasks of",
        "NLP in clinical text.",
        "The 2009 i2b2 NLP challenge was to extract medication names, as well as their corresponding signature information including dosage, mode, frequency, duration, and reason from de-identified hospital discharge summaries (Uzüner, Solti, & Cadag, 2009).",
        "At the beginning of the challenge, a training set of 696 notes were provided by the organizers.",
        "Among them, 17 notes were annotated by the i2b2 organizers, based on an annotation guideline (see Table 1 for examples of medication information in the guideline), and the rest were un-annotated notes.",
        "Participating teams would develop their systems based on the training set, and they were",
        "Table 1.Number of classes and descriptions with examples in i2b2 2009 dataset.",
        "Class",
        "Example",
        "Description",
        "Medication",
        "12773",
        "\"Lasix\", \"Caltrate plus D\", \"fluoci-nonide 0.5% cream\", \"TYLENOL ( ACETAMINOPHEN )\"",
        "Prescription substances, biological substances, over-the-counter drugs, excluding diet, allergy, lab/test, alcohol.",
        "Dosage",
        "4791",
        "\"1 TAB\", \"One tablet\", \"0.4 mg\" \"0.5 m.g.",
        "\", \"100 MG\", \"100 mg x 2 tablets\"",
        "The amount of a single medication used in each administration.",
        "Mode",
        "3552",
        "\"Orally\", \"Intravenous\", \"Topical\", \"Sublingual\"",
        "Describes the method for administering the medication.",
        "Frequency",
        "4342",
        "\"Prn\", \"As needed\", \"Three times a day as needed\", \"As needed three times a day\", \"x3 before meal\", \"x3 a day after meal as needed\"",
        "Terms, phrases, or abbreviations that describe how often each dose of the medication should be taken.",
        "Duration",
        "597",
        "\"x10 days\", \"10-day course\", \"For ten days\", \"For a month\", \"During spring break\", \"Until the symptom disappears\", \"As long as needed\"",
        "Expressions that indicate for how long the medication is to be administered.",
        "Reason",
        "1534",
        "\"Dizziness\", \"Dizzy\", \"Fever\", \"Diabetes\", \"frequent PVCs\", \"rare angina\"",
        "The medical reason for which the medication is stated to be given.",
        "allowed to annotate additional notes in the training set.",
        "The test data set included 547clinical notes, from which 251 notes were randomly picked by the organizers.",
        "Those 251 notes were then annotated by participating teams, as well as the organizers, and they served as the gold standard for evaluating the performance of systems submitted by participating teams.",
        "An example of original text and annotated text were shown in Figure 1.",
        "The results of systems submitted by the participating teams were presented at the i2b2 workshop and short papers describing each system were available at i2b2 web site with protected passwords.",
        "Among top 10 systems which achieved the best performance, there were 6 rule-based, 2 machine learning based, and 2 hybrid systems.",
        "The best system, which used a machine learning based approach, reached the highest F-score of 85.7% (Patrick & Li, 2009).",
        "The second best system, which was a rule-based system using the existing MedEx tool, reported an F-score of 82.1% (Doan, Bastarache L., Klimkowski S., Denny J.C., & Xu, 2009).",
        "The difference between those two systems was statistically significant.",
        "However, this finding was not very surprising, as the machine learning based system utilized additional 147 annotated notes by the participating team, while the rule-based system mainly used 17 annotated training data to customize the system.",
        "Interestingly, two machine learning systems in the top ten systems achieved very different performance, one (Patrick et al., 2009) achieved an F-score of 85.7%, ranked the first; while another (Li et al., 2009) achieved an F-score of 76.4%, ranked the 10th on the final evaluation.",
        "Both systems used CRF for NER, on the equivalent number of training data (145 and 147 notes respectively).",
        "The large difference in F-score of those two systems could be due to: the quality of training set, and feature sets using for classification.",
        "More recently, i2b2 organizers also reported a Maximum Entropy (ME) based approach for the 2009 challenge (Halgrim, Xia, Solti, Cadag, & Uzuner, 2010).",
        "Using the same annotated data set as in (Patrick et al., 2009), they reported an F-score of 84.1%, when combined features such as unigram, word bigrams/trigrams, and label of previous words were used.",
        "These results indicated the importance of feature sets used in machine learning algorithms in this task.",
        "For supervised machine learning based systems in the i2b2 challenge, the task was usually divided into two steps: 1) NER of six medication related findings; and 2) determination of the relation between detected medication names and other entities.",
        "It is obvious that NER is the first crucial step and it affects the performance of the whole system.",
        "However, short papers presented at the i2b2 workshop did not show much detailed evaluation on NER components in machine learning based systems.",
        "The variation in performance of different machine learning based systems also motivated us to further investigate the effect of different types of features on recogniz-",
        "DISCHARGE MEDICATION:",
        "Additionally, Percocet 1-2 tablets p.o.",
        "q 4 prn, Colace 100 mg p.o.",
        "b.i.d.",
        ", insulin NPH 10 units subcu b.i.d.",
        ", sliding scale insulin...",
        "Annotated text:",
        "ing medication related entities.",
        "In this study, we developed an SVM-based NER system for recognizing medication related entities, which is a subtask of the i2b2 challenge.",
        "We systematically investigated the effects of typical local contextual features that have been reported in many biomedical NER studies.",
        "Our studies provided some valuable insights to NER tasks of medical entities in clinical text."
      ]
    },
    {
      "heading": "3. Methods",
      "text": [
        "A total of 268 annotated discharge summaries (17 from training set and 251 from test set) from i2b2 challenge were used in this study.",
        "This annotated corpus contains 9,689 sentences, 326,474 words, and 27,589 entities.",
        "Annotated notes were converted into a BIO format and different types of feature sets were used in an SVM classifier for NER.",
        "Performance of the NER system was evaluated using precision, recall, and F-score, based on 10-fold cross validation.",
        "The annotated corpus was converted into a BIO format (see an example in Figure 2).",
        "Specifically, it assigned each word into a class as follows: B means beginning of an entity, I means inside an entity, and O means outside of an entity.",
        "As we have six types of entities, we have six different B classes and six different I classes.",
        "For example, for medication names, we define the B class as \"B-m\", and the I class as \"I-m\".",
        "Therefore, we had total 13 possible classes to each word (including O class).",
        "Figure 2.",
        "An example of the BIO representation of annotated clinical text (Where m as medication, do as dose, mo as mode, and f as frequency).",
        "After preprocessing, the NER problem now can be considered as a classification problem, which is to assigns one of the 13 class labels to each word.",
        "Support Vector Machine (SVM) is a machine learning method that is widely used in many NLP tasks such as chunking, POS, and NER.",
        "Essentially, it constructs a binary classifier using labeled training samples.",
        "Given a set of training samples, the SVM training phrase tries to find the optimal hyperplane, which maximizes the distance of training sample nearest to it (called support vectors).",
        "SVM takes an input as a vector and maps it into a feature space using a kernel function.",
        "In this paper we used TinySVM along with Yamcha developed at NAIST (Kudo & Matsumoto, 2000; Kudo & Matsumoto, 2001).",
        "We used a polynomial kernel function with the degree of kernel as 2, context window as +/-2, and the strategy for multiple classification as pairwise (one-against-one).",
        "Pairwise strategy means it will build K(K-1)/2 binary classifiers in which K is the number of classes (in this case K=13).",
        "Each binary classifier will determine whether the sample should be classified as one of the two classes.",
        "Each binary classifier has one vote and the final output is the class with the maximum votes.",
        "These parameters were used in many biomedical NER tasks such as (Takeuchi & Collier, 2003; Kazama et al., 2002; Yamamoto et al., 2003).",
        "In this study, we investigated different types of features for the SVM-based NER system for medication related entities, including 1) words; 2) Part-of-Speech (POS) tags; 3) morphological clues; 4) orthographies of words; 5) previous history features; 6) semantic tags determined by MedEx, a rule based medication extraction system.",
        "Details of those features are described below:",
        "• Words features: Words only.",
        "We referred it as a baseline method in this study.",
        "• POS features: Part-of-Speech tags of words.",
        "To obtain POS information, we used a POS tagger in the NLTK package.",
        "http ://chasen.org/~taku/so ftware/YamCha/",
        "• Morphologie features: suffix/prefix of up to 3 eharaeters within a word.",
        "• Orthographie features: information about if a word eontains eapital letters, digits, speeial eharaeters ete.",
        "We used orthographie features deseribed in (Collier, Nobata, & Tsujii, 2000) and modified some as for medieation information sueh as \"digit and pereent\".",
        "We had totally 21 labels for orthographie features.",
        "• Previous history features: Class assignments of preeeding words, by the NER system itself.",
        "• Semantie tag features: semantie eategories of words.",
        "Typieal NER systems use dietionary lookup methods to determine semantie eate-gories of a word (e.g., gene names in a die-tionary).",
        "In this study, we used MedEx, the best rule-based medieation extraetion system in the i2b2 ehallenge, to assign medieation speeifie eategories into words.",
        "MedEx was originally developed at Vanderbilt University, for extraeting medieation information from elinieal text (Xu et al., 2010).",
        "MedEx labels medieation related entities with a predefined semantie eategories, whieh has overlap with the six entities defined in the i2b2 ehallenge, but not exaetly same.",
        "For example, MedEx breaks the phrase \"fluocinonide 0.5% cream\" into drug name: \"fluocinonide\", strength: \"0.5%\", and form: \"cream\"; while i2b2 labels the whole phrase as a medieation name.",
        "There are a total of 11 predefined semantie eategories whieh are listed in (Xu et al., 2010e).",
        "When the Vanderbilt team applied MedEx to the i2b2 ehallenge, they eustomized and extended MedEx to label medieation related entities as required by i2b2.",
        "Those eustomizations ineluded:",
        "- Customized Rules to eombine entities reeog-nized by MedEx into i2b2 entities, sueh as eombine drug name: \"fluocinonide\", strength: \"0.5%\", and form: \"cream\" into one medieation name \"fluocinonide 0.5% cream\".",
        "- A new Section Tagger to filter some drug names in seetions sueh as \"allergy\" and \"labs\".",
        "- A new Spell Cheeker to eheek whether a word ean be a misspelled drug names.",
        "In a summary, the MedEx system will produee two sets of semantie tags: 1) initial tags that are identified by the original MedEx system; 2) final tags that are identified by the eustomized MedEx system for the i2b2 ehallenge.",
        "The initial tagger will be equivalent to some simple dietionary look up methods used in many NER systems.",
        "The final tagger is a more advaneed method that integrates other level of information sueh as seetions and spellings.",
        "The outputs of initial tag inelude 11 predefined semantie tags in MedEx, and outputs of final tags eonsist of 6 types of NEs as in the i2b2 requirements.",
        "Therefore, it is interesting to us to study effeets of both types of tags from MedEx in this study.",
        "These semantie tags were also eonverted into the BIO format when they were used as features."
      ]
    },
    {
      "heading": "4. Results and Discussions",
      "text": [
        "In this study, we measured Preeision, Reeall, and",
        "Features",
        "Pre",
        "Rec",
        "F-score",
        "Words (Baseline)",
        "87.09",
        "77.05",
        "81.76",
        "Words + History",
        "90.34",
        "78.17",
        "83.81",
        "Words + History + Morphology",
        "91.72",
        "81.08",
        "86.06",
        "Words + History + Morphology + POS",
        "91.81",
        "81.06",
        "86.10",
        "Words + History + Morphology + POS + Orthographies",
        "91.78",
        "81.29",
        "86.22",
        "Words + Semantie Tags (Original MedEx)",
        "90.15",
        "83.17",
        "86.51",
        "Words + Semantie Tags (Customized MedEx)",
        "92.38",
        "86.73",
        "89.47",
        "Words + History + Morphology + POS + Orthographies + Semantie Tags (Original MedEx)",
        "91.43",
        "84.2",
        "87.66",
        "Words + History + Morphology + POS + Orthographies + Semantie Tags (Customized MedEx)",
        "93.2",
        "87.12",
        "90.05",
        "F-seore using the CoNLL evaluation seript .",
        "Pre-eision is the ratio between the number of eorreet-ly identified NE ehunks by the system and the total number of NE ehunks found by the system; Reeall is the ratio between the number of eorreet-ly identified NE ehunks by the system and the total number of NE ehunks in the gold standard.",
        "Experiments were run in a Linux maehine with 16GB RAM and 8 eores of Intel Xeon 2.0GHz proeessor.",
        "The performanee of different types of feature sets was evaluated using 10-fold eross-validation.",
        "Table 2 shows the preeision, reeall, and F-seore of the SVM-based NER system for all six types of entities, when different eombinations of feature sets were used.",
        "Among them, the best F-seore of 90.05% was aehieved, when all feature sets were used.",
        "A number of interesting findings ean be eoneluded from those results.",
        "First, the eontribution of different types of features to the system's performanee varies.",
        "For example, the \"previous history feature\" and the \"morphology feature\" improved the performanee substantially (F-seore from 81.76% to 83.83%, and from 83.81% to 86.06% respeetively).",
        "These findings were eonsistent with previous reported results on protein/gene NER (Kazama et al., 2002; Takeu-ehi and Collier, 2003; Yamamoto et al., 2003).",
        "However, \"POS\" and \"orthographie\" features eontributed very little, not as mueh as in protein/gene names reeognition tasks.",
        "This eould be related to the differenees between gene/protein phrases and medieation phrases - more orthographie elues are observed in gene/protein names.",
        "Seeond, the \"semantie tags\" features alone, even just using the original tagger in Me-dEx, improved the performanee dramatieally (from 81.76% to 86.51% or 89.47%).",
        "This indi- eates that the knowledge bases in the biomedieal domain are erueial to biomedieal NER.",
        "Third, the eustomized final semantie tagger in MedEx had mueh better performanee than the original tagger, whieh indieated that advaneed semantie tagging methods that integrate other levels of linguistie information (e.g., seetions) were more useful than simple dietionary lookup methods.",
        "Table 3 shows the preeision, reeall, and F-seore for eaeh type of entity, from the MedEx alone, and the baseline and the best runs of the SVM-based NER system.",
        "As we ean see, the best SVM-based NER system that eombines all types of features (ineluding inputs from MedEx) was mueh better than the MedEx system alone eombination of rule-based systems with maehine learning approaehes eould yield the most optimized performanee in biomedieal NER tasks.",
        "Among six types of medieation entities, we notieed that four types of entities (medieation names, dosage, mode, and frequeney) got very high F-seores (over 92%); while two others (duration and reason) had low F-seores (up to 50%).",
        "This finding was eonsistent with results from i2b2 ehallenge.",
        "Duration and reason are more diffieult to identify beeause they do not have well-formed patterns and few knowledge bases exist for duration and reasons.",
        "This study only foeused on the first step of the i2b2 medieation extraetion ehallenge - NER.",
        "Our next plan is to work on the seeond step of determining relations between medieation names and other entities, thus allowing us to eompare our results with those reported in the i2b2 ehallenge.",
        "In addition, we will also evaluate and eompare the performanee of other ML algorithms sueh as",
        "CRF and ME on the same NER task.",
        "http://www.ents.ua.ae.be/eonll2002/ner/bin/eonlleval.t xt",
        "Entity",
        "MedEx only",
        "SVM (Baseline)",
        "SVM (Best)",
        "Pre",
        "Ree",
        "F-seore",
        "Pre",
        "Ree",
        "F-seore",
        "Pre",
        "Ree",
        "F-seore",
        "ALL",
        "87.85",
        "83.97",
        "85.86",
        "87.09",
        "77.05",
        "81.76",
        "93.2",
        "87.12",
        "90.05",
        "Medieation",
        "87.25",
        "90.21",
        "88.71",
        "88.38",
        "75.03",
        "81.16",
        "93.3",
        "91.35",
        "92.31",
        "Dosage",
        "92.79",
        "83.94",
        "88.14",
        "89.43",
        "83.65",
        "86.41",
        "94.38",
        "90.99",
        "92.65",
        "Mode",
        "95.86",
        "90.06",
        "92.87",
        "96.18",
        "93.30",
        "94.70",
        "97.12",
        "93.8",
        "95.41",
        "Frequeney",
        "92.67",
        "89.00",
        "90.80",
        "90.33",
        "87.60",
        "88.94",
        "95.88",
        "93.04",
        "94.43",
        "Duration",
        "42.65",
        "40.15",
        "41.36",
        "24.16",
        "19.62",
        "21.45",
        "65.18",
        "40.16",
        "49.57",
        "Reason",
        "54.23",
        "36.72",
        "43.79",
        "48.40",
        "25.51",
        "33.30",
        "69.21",
        "37.39",
        "48.4"
      ]
    },
    {
      "heading": "5. Conclusions",
      "text": [
        "In this study, we developed an SVM-based NER system for medieation related entities.",
        "We sys-tematieally investigated different types of features and our results showed that by eombining semantie features from a rule-based system, the ML-based NER system eould aehieve the best F-seore of 90.05% in reeognizing medieation related entities, using the i2b2 annotated data set.",
        "The experiments also showed that optimized usage of external knowledge bases were erueial to high performanee ML based NER systems for medieal entities sueh as drug names."
      ]
    },
    {
      "heading": "Acknowledgements",
      "text": [
        "Authors would like to thank i2b2 organizers for organizing the 2009 i2b2 ehallenge and providing dataset for researeh studies.",
        "This study was in part supported by NCI grant R01CA141307-01."
      ]
    }
  ]
}
