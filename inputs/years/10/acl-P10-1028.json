{
  "info": {
    "authors": [
      "Xu Sun",
      "Jianfeng Gao",
      "Daniel Micol",
      "Chris Quirk"
    ],
    "book": "ACL",
    "id": "acl-P10-1028",
    "title": "Learning Phrase-Based Spelling Error Models from Clickthrough Data",
    "url": "https://aclweb.org/anthology/P10-1028",
    "year": 2010
  },
  "references": [
    "acl-C90-2036",
    "acl-D07-1019",
    "acl-D07-1021",
    "acl-D08-1047",
    "acl-D09-1093",
    "acl-D09-1154",
    "acl-H05-1120",
    "acl-J04-4002",
    "acl-N03-1017",
    "acl-P00-1037",
    "acl-P02-1019",
    "acl-P06-1129",
    "acl-W04-3238"
  ],
  "sections": [
    {
      "text": [
        "Xu Sun*",
        "Microsoft Research Redmond, WA, USA",
        "Microsoft Research",
        "Redmond, WA, USA",
        "This paper explores the use of clickthrough data for query spelling correction.",
        "First, large amounts of query-correction pairs are derived by analyzing users' query reformulation behavior encoded in the clickthrough data.",
        "Then, a phrase-based error model that accounts for the transformation probability between multi-term phrases is trained and integrated into a query speller system.",
        "Experiments are carried out on a human-labeled data set.",
        "Results show that the system using the phrase-based error model outperforms significantly its baseline systems."
      ]
    },
    {
      "heading": "1. Introduction",
      "text": [
        "Search queries present a particular challenge for traditional spelling correction methods for three main reasons (Ahmad and Kondrak, 2004).",
        "First, spelling errors are more common in search queries than in regular written text: roughly 10-15% of queries contain misspelled terms (Cucerzan and Brill, 2004).",
        "Second, most search queries consist of a few key words rather than grammatical sentences, making a grammar-based approach inappropriate.",
        "Most importantly, many queries contain search terms, such as proper nouns and names, which are not well established in the language.",
        "For example, Chen et al.",
        "(2007) reported that 16.5% of valid search terms do not occur in their 200K-entry spelling lexicon.",
        "Therefore, recent research has focused on the use of Web corpora and query logs, rather than human-compiled lexicons, to infer knowledge about misspellings and word usage in search queries (e.g., Whitelaw et al., 2009).",
        "Another important data source that would be useful for this purpose is clickthrough data.",
        "Although it is well-known that clickthrough data contain rich information about users' search behavior, e.g., how a user (re-) formulates a query in order to find the relevant document, there has been little research on exploiting the data for the development of a query speller system.",
        "In this paper we present a novel method of extracting large amounts of query-correction pairs from the clickthrough data.",
        "These pairs, implicitly judged by millions of users, are used to train a set of spelling error models.",
        "Among these models, the most effective one is a phrase-based error model that captures the probability of transforming one multi-term phrase into another multi-term phrase.",
        "Comparing to traditional error models that account for transformation probabilities between single characters (Kernighan et al., 1990) or sub-word strings (Brill and Moore, 2000), the phrase-based model is more powerful in that it captures some contextual information by retaining inter-term dependencies.",
        "We show that this information is crucial to detect the correction of a query term, because unlike in regular written text, any query word can be a valid search term and in many cases the only way for a speller system to make the judgment is to explore its usage according to the contextual information.",
        "We conduct a set of experiments on a large data set, consisting of human-labeled * The work was done when Xu Sun was visiting Microsoft Research Redmond.",
        "query-correction pairs.",
        "Results show that the error models learned from clickthrough data lead to significant improvements on the task of query spelling correction.",
        "In particular, the speller system incorporating a phrase-based error model significantly outperforms its baseline systems.",
        "To the best of our knowledge, this is the first extensive study of learning phase-based error models from clickthrough data for query spelling correction.",
        "The rest of the paper is structured as follows.",
        "Section 2 reviews related work.",
        "Section 3 presents the way query-correction pairs are extracted from the clickthrough data.",
        "Section 4 presents the baseline speller system used in this study.",
        "Section 5 describes in detail the phrase-based error model.",
        "Section 6 presents the experiments.",
        "Section 7 concludes the paper."
      ]
    },
    {
      "heading": "2. Related Work",
      "text": [
        "Spelling correction for regular written text is a long standing research topic.",
        "Previous researches can be roughly grouped into two categories: correcting non-word errors and real-word errors.",
        "In non-word error spelling correction, any word that is not found in a pre-compiled lexicon is considered to be misspelled.",
        "Then, a list of lexical words that are similar to the misspelled word are proposed as candidate spelling corrections.",
        "Most traditional systems use a manually tuned similarity function (e.g., edit distance function) to rank the candidates, as reviewed by Kukich (1992).",
        "During the last two decades, statistical error models learned on training data (i.e., query-correction pairs) have become increasingly popular, and have proven more effective (Kernighan et al., 1990; Brill and Moore, 2000; Tou-tanova and Moore, 2002; Okazaki et al., 2008).",
        "Real-word spelling correction is also referred to as context sensitive spelling correction (CSSC).",
        "It tries to detect incorrect usages of a valid word based on its context, such as \"peace\" and \"piece\" in the context \"a _ of cake\".",
        "A common strategy in CSSC is as follows.",
        "First, a predefined confusion set is used to generate candidate corrections, then a scoring model, such as a trigram language model or na√Øve Bayes classifier, is used to rank the candidates according to their context (e.g.,",
        "Church et al., 2007).",
        "When designed to handle regular written text, both CSSC and non-word error speller systems rely on a predefined vocabulary (i.e., either a lexicon or a confusion set).",
        "However, in query spelling correction, it is impossible to compile such a vocabulary, and the boundary between the non-word and real-word errors is quite vague.",
        "Therefore, recent research on query spelling correction has focused on exploiting noisy Web data and query logs to infer knowledge about misspellings and word usage in search queries.",
        "Cucerzan and Brill (2004) discuss in detail the challenges of query spelling correction, and suggest the use of query logs.",
        "Ahmad and Kon-drak (2005) propose a method of estimating an error model from query logs using the EM algorithm.",
        "Li et al.",
        "(2006) extend the error model by capturing word-level similarities learned from query logs.",
        "Chen et al.",
        "(2007) suggest using web search results to improve spelling correction.",
        "Whitelaw et al.",
        "(2009) present a query speller system in which both the error model and the language model are trained using Web data.",
        "Compared to Web corpora and query logs, clickthrough data contain much richer information about users' search behavior.",
        "Although there has been a lot of research on using clickthrough data to improve Web document retrieval (e.g., Joachims, 2002; Agichtein et al., 2006; Gao et al., 2009), the data have not been fully explored for query spelling correction.",
        "This study tries to learn error models from clickthrough data.",
        "To our knowledge, this is the first such attempt using clickthrough data.",
        "Most of the speller systems reviewed above are based on the framework of the source channel model.",
        "Typically, a language model (source model) is used to capture contextual information, while an error model (channel model) is considered to be context free in that it does not take into account any contextual information in modeling word transformation probabilities.",
        "In this study we argue that it is beneficial to capture contextual information in the error model.",
        "To this end, inspired by the phrase-based statistical machine translation (SMT) systems (Koehn et al., 2003; Och and Ney, 2004), we propose a phrase-based error model where we assume that query spelling correction is performed at the phrase level.",
        "In what follows, before presenting the phrase-based error model, we will first describe the clickthrough data and the query speller system we used in this study."
      ]
    },
    {
      "heading": "3. Clickthrough Data and Spelling Correction",
      "text": [
        "This section describes the way the query-correction pairs are extracted from clickthrough data.",
        "Two types of clickthrough data are explored in our experiment.",
        "The clickthrough data of the first type has been widely used in previous research and proved to be useful for Web search (Joachims, 2002; Agichtein et al., 2006; Gao et al., 2009) and query reformulation (Wang and Zhai, 2008; Suzuki et al., 2009).",
        "We start with this same data with the hope of achieving similar improvements in our task.",
        "The data consist of a set of query sessions that were extracted from one year of log files from a commercial Web search engine.",
        "A query session contains a query issued by a user and a ranked list of links (i.e., URLs) returned to that same user along with records of which URLs were clicked.",
        "Following Suzuki et al.",
        "(2009), we extract query-correction pairs as follows.",
        "First, we extract pairs of queries Q1 and Q2 such that (1) they are issued by the same user; (2) Q2 was issued within 3 minutes of Q1; and (3) Q2 contained at least one clicked URL in the result page while Qi did not result in any clicks.",
        "We then scored each query pair (Q1, Q2) using the edit distance between Q1and Q2, and retained those with an edit distance score lower than a pre-set threshold as query correction pairs.",
        "Unfortunately, we found in our experiments that the pairs extracted using the method are too noisy for reliable error model training, even with a very tight threshold, and we did not see any significant improvement.",
        "Therefore, in Section 6 we will not report results using this dataset.",
        "The clickthrough data of the second type consists of a set of query reformulation sessions extracted from 3 months of log files from a commercial Web browser.",
        "A query reformulation session contains a list of URLs that record user behaviors that relate to the query reformulation functions, provided by a Web search engine.",
        "For example, almost all commercial search engines offer the \"did you mean\" function, suggesting a possible alternate interpretation or spelling of a user-issued query.",
        "Figure 1 shows a sample of the query reformulation sessions that record the \"did you mean\" sessions from three of the most popular search engines.",
        "These sessions encode the same user behavior: A user first queries for \"harrypotter sheme park\", and then clicks on the resulting spelling suggestion \"harry potter theme park\".",
        "In our experiments, we \"reverse-engineer\" the parameters from the URLs of these sessions, and deduce how each search engine encodes both a query and the fact that a user arrived at a URL by clicking on the spelling suggestion of the query - an important indication that the spelling sug-",
        "http://www.google.com/search?",
        "hl=en&source=hp& q=harvrypofcfcer+sheme+park&aq=f&oq=&aqi= hl=en&ei=rnNAS8-oKsWe_AaB2eHlCA& sa=X&oi=spell&resnum=0&ct= result&cd=1&ved=0CA4QBSgA& q=harry+potter+theme+park&spell=1 http://search.yahoo.com/search; _ylt=A0geu6ywckBL_XIBSDtXNyoA?",
        "p=harrypotter+sheme+park& http://search.yahoo.com/search?",
        "ei=UTF-8&fr=yfp-t-7 01& p=harry+potter+theme+park http://www.bing.com/search?",
        "q=harrypofcfcer+sheme+park&form=QBRE&qs=n http://www.bing.com/search?",
        "q=harry+potter+theme+park&FORM=SSRE",
        "Figure 1.",
        "A sample of query reformulation sessions from three popular search engines.",
        "These sessions show that a user first issues the query \"harrypotter sheme park\", and then clicks on the resulting spell suggestion \"harry potter theme park\".",
        "gestion is desired.",
        "From these three months of query reformulation sessions, we extracted about 3 million query-correction pairs.",
        "Compared to the pairs extracted from the clickthrough data of the first type (query sessions), this data set is much cleaner because all these spelling corrections are actually clicked, and thus judged implicitly, by many users.",
        "In addition to the \"did you mean\" function, recently some search engines have introduced two new spelling suggestion functions.",
        "One is the \"auto-correction\" function, where the search engine is confident enough to automatically apply the spelling correction to the query and execute it to produce search results for the user.",
        "The other is the \"split pane\" result page, where one half portion of the search results are produced using the original query, while the other half, usually visually separate portion of results are produced using the auto-corrected query.",
        "In neither of these functions does the user ever receive an opportunity to approve or disapprove of the correction.",
        "Since our extraction approach focuses on user-approved spelling suggestions, we ignore the query reformulation sessions recording either of the two functions.",
        "Although by doing so we could miss some basic, obvious spelling corrections, our experiments show that the negative impact on error model training is negligible.",
        "One possible reason is that our baseline system, which does not use any error model learned from the clickthrough data, is already able to correct these basic, obvious spelling mistakes.",
        "Thus, including these data for training is unlikely to bring any further improvement.",
        "We found that the error models trained using the data directly extracted from the query reformulation sessions suffer from the problem of underestimating the self-transformation probability of a query P(Q2=Q1\\Q1), because we only included in the training data the pairs where the query is different from the correction.",
        "To deal with this problem, we augmented the training data by including correctly spelled queries, i.e., the pairs (Qi, Q2) where Qi = Q2.",
        "First, we extracted a set of queries from the sessions where no spell suggestion is presented or clicked on.",
        "Second, we removed from the set those queries that were recognized as being auto-corrected by a search engine.",
        "We do so by running a sanity check of the queries against our baseline spelling correction system, which will be described in Section 6.",
        "If the system thinks an input query is misspelled, we assumed it was an obvious misspelling, and removed it.",
        "The remaining queries were assumed to be correctly spelled and were added to the training data."
      ]
    },
    {
      "heading": "4. The Baseline Speller System",
      "text": [
        "The spelling correction problem is typically formulated under the framework of the source channel model.",
        "Given an input query Q = q1...qI, we want to find the best spelling correction C = c1...Cj among all candidate spelling corrections:",
        "Applying Bayes' Rule and dropping the constant denominator, we have where the error model P(Q | C) models the transformation probability from C to Q, and the language model P(C) models how likely C is a correctly spelled query.",
        "The speller system used in our experiments is based on a ranking model (or ranker), which can be viewed as a generalization of the source channel model.",
        "The system consists of two components: (1) a candidate generator, and (2) a ranker.",
        "In candidate generation, an input query is first tokenized into a sequence of terms.",
        "Then we scan the query from left to right, and each query term q is looked up in lexicon to generate a list of spelling suggestions c whose edit distance from q is lower than a preset threshold.",
        "The lexicon we used contains around 430,000 entries; these are high frequency query terms collected from one year of search query logs.",
        "The lexicon is stored using a trie-based data structure that allows efficient search for all terms within a maximum edit distance.",
        "The set of all the generated spelling suggestions is stored using a lattice data structure, which is a compact representation of exponentially many possible candidate spelling corrections.",
        "We then use a decoder to identify the top twenty candidates from the lattice according to the source channel model of Equation (2).",
        "The language model (the second factor) is a backoff bigram model trained on the tokenized form of one year of query logs, using maximum likelihood estimation with absolute discounting smoothing.",
        "The error model (the first factor) is approximated by the edit distance function as",
        "The decoder uses a standard two-pass algorithm to generate 20-best candidates.",
        "The first pass uses the Viterbi algorithm to find the best C according to the model of Equations (2) and (3).",
        "In the second pass, the A-Star algorithm is used to find the 20-best corrections, using the Viterbi scores computed at each state in the first pass as heuristics.",
        "Notice that we always include the input query Q in the 20-best candidate list.",
        "The core of the second component of the speller system is a ranker, which re-ranks the 20-best candidate spelling corrections.",
        "If the top C after re-ranking is different than the original query Q, the system returns C as the correction.",
        "Let f be a feature vector extracted from a query and candidate spelling correction pair (Q, C).",
        "The ranker maps f to a real value y that indicates how likely C is a desired correction of Q.",
        "For example, a linear ranker simply maps f to y with a learned weight vector w such as y = w ‚Ä¢ f, where w is optimized w.r.t.",
        "accuracy on a set of huC: \"disney theme park\" correct query S: [\"disney\", \"theme park\"] segmentation V-1 Q: \"theme part disnee\" misspelled query B(C,Q) Figure 2: Example demonstrating the generative procedure behind the phrase-based error model.",
        "As is common practice in SMT, we use the maximum approximation to the sum:",
        "man-labeled (Q, C) pairs.",
        "The features in f are arbitrary functions that map (Q, C) to a real value.",
        "Since we define the logarithm of the probabilities of the language model and the error model (i.e., the edit distance function) as features, the ranker can be viewed as a more general framework, subsuming the source channel model as a special case.",
        "In our experiments we used 96 features and a non-linear model, implemented as a two-layer neural net, though the details of the ranker and the features are beyond the scope of this paper."
      ]
    },
    {
      "heading": "5. A Phrase-Based Error Model",
      "text": [
        "The goal of the phrase-based error model is to transform a correctly spelled query C into a misspelled query Q.",
        "Rather than replacing single words in isolation, this model replaces sequences of words with sequences of words, thus incorporating contextual information.",
        "For instance, we might learn that \"theme part\" can be replaced by \"theme park\" with relatively high probability, even though \"part\" is not a misspelled word.",
        "We assume the following generative story: first the correctly spelled query C is broken into K non-empty word sequences c1, ..., ck, then each is replaced with a new non-empty word sequence q1, ., qk, and finally these phrases are permuted and concatenated to form the misspelled Q.",
        "Here, c and q denote consecutive sequences of words.",
        "To formalize this generative process, let S denote the segmentation of C into Kphrases cL cK, and let T denote the K replacement phrases q1.",
        "qK - we refer to these (ci, qi) pairs as bi-phrases.",
        "Finally, let M denote a permutation of K elements representing the final reordering step.",
        "Figure 2 demonstrates the generative procedure.",
        "Next let us place a probability distribution over rewrite pairs.",
        "Let B(C, Q) denote the set of S, T, M triples that transform C into Q.",
        "If we assume a uniform probability over segmentations, then the phrase-based probability can be defined as:",
        "Although we have defined a generative model for transforming queries, our goal is not to propose new queries, but rather to provide scores over existing Q and C pairs which act as features for the ranker.",
        "Furthermore, the word-level alignments between Q and C can most often be identified with little ambiguity.",
        "Thus we restrict our attention to those phrase transformations consistent with a good word-level alignment.",
        "Let J be the length of Q, L be the length of C, and A = a1, ., aJ be a hidden variable representing the word alignment.",
        "Each ai takes on a value ranging from 1 to L indicating its corresponding word position in C, or 0 if the ith word in Q is unaligned.",
        "The cost of assigning k to ai is equal to the Levenshtein edit distance (Levensh-tein, 1966) between the ith word in Q and the kthword in C, and the cost of assigning 0 to ai is equal to the length of the ith word in Q.",
        "We can determine the least cost alignment A* between Q and C efficiently using the A-star algorithm.",
        "When scoring a given candidate pair, we further restrict our attention to those S, T, M triples that are consistent with the word alignment, which we denote as B(C, Q, A*).",
        "Here, consistency requires that if two words are aligned in A*, then they must appear in the same bi-phrase (ci, qi).",
        "Once the word alignment is fixed, the final permutation is uniquely determined, so we can safely discard that factor.",
        "Thus we have:",
        "For the sole remaining factor P(T|C, S), we make the assumption that a segmented query T = qi.",
        "qK is generated from left to right by transforming each phrase c1.",
        "cK independently:",
        "Input: biPhraseLattice \"PL\" with length = K& height biPhrasePre = PL.get(xPre, yPre); biPhrase = PL.get(x, y); if (IbiPhrasePre \\\\ IbiPhrase) continue; problncrs = PL.getProbIncrease(biPhrasePre, biPhrase); maxProbPre = biPhrasePre.maxProb; totalProb = probIncrs + maxProbPre; if (totalProb > biPhrase.maxProb) biPhrase.maxProb = totalProb; biPhrase.yPre = yPre; Result: record at each bi-phrase boundary its maximum probability (biPhrase.maxProb) and optimal backtracking biPhrases (biPhrase.yPre).",
        "Figure 3: The dynamic programming algorithm for Viterbi bi-phrase segmentation.",
        "where P(qfe|cfe) is a phrase transformation probability, the estimation of which will be described in Section 5.2.",
        "To find the maximum probability assignment efficiently, we can use a dynamic programming approach, somewhat similar to the monotone decoding algorithm described in Och (2002).",
        "Here, though, both the input and the output word sequences are specified as the input to the algorithm, as is the word alignment.",
        "We define the quantity ccj to be the probability of the most likely sequence of bi-phrases that produce the first j terms of Q and are consistent with the word alignment and C. It can be calculated using the following algorithm:"
      ]
    },
    {
      "heading": "1.. Initialization:",
      "text": []
    },
    {
      "heading": "2.. Induction:",
      "text": [
        "aj= max {cyP(q|cq)j"
      ]
    },
    {
      "heading": "3.. Total:",
      "text": [
        "AIb I C I D I E I F a|A Figure 4: Toy example of (left) a word alignment between two strings \"adcf\" and \"ABCDEF\"; and (right) the bi-phrases containing up to four words that are consistent with the word alignment.",
        "The pseudo-code of the above algorithm is shown in Figure 3.",
        "After generating Q from left to right according to Equations (8) to (10), we record at each possible bi-phrase boundary its maximum probability, and we obtain the total probability at the end-position of Q.",
        "Then, by backtracking the most probable bi-phrase boundaries, we obtain B .",
        "The algorithm takes a complexity of O(KL), where K is the total number of word alignments in A which does not contain empty words, and L is the maximum length of a bi-phrase, which is a hyper-parameter of the algorithm.",
        "Notice that when we set L=1, the phrase-based error model is reduced to a word-based error model which assumes that words are transformed independently from C to Q, without taking into account any contextual information.",
        "We follow a method commonly used in SMT (Koehn et al., 2003) to extract bi-phrases and estimate their replacement probabilities.",
        "From each query-correction pair with its word alignment (Q, C, A ), all bi-phrases consistent with the word alignment are identified.",
        "Consistency here implies two things.",
        "First, there must be at least one aligned word pair in the bi-phrase.",
        "Second, there must not be any word alignments from words inside the bi-phrase to words outside the bi-phrase.",
        "That is, we do not extract a phrase pair if there is an alignment from within the phrase pair to outside the phrase pair.",
        "The toy example shown in Figure 4 illustrates the bilingual phrases we can generate by this process.",
        "After gathering all such bi-phrases from the full training data, we can estimate conditional relative frequency estimates without smoothing.",
        "For example, the phrase transformation probability P(q|c) in Equation (7) can be estimated approximately as where iV(c, q) is the number of times that c is aligned to q in training data.",
        "These estimates are useful for contextual lexical selection with sufficient training data, but can be subject to data sparsity issues.",
        "An alternate translation probability estimate not subject to data sparsity issues is the so-called lexical weight estimate (Koehn et al., 2003).",
        "Assume we have a word translation distribution t(q|c) (defined over individual words, not phrases), and a word alignment A between q and c; here, the word alignment contains (i, j) pairs, where iE 1.. |qr| and jE 0.. |c|, with 0 indicating an inserted word.",
        "Then we can use the following estimate:",
        "the words (not phrases as in Equation 11) c and q are aligned in the training data.",
        "These word based scores of bi-phrases, though not as effective in contextual selection, are more robust to noise and sparsity.",
        "Throughout this section, we have approached this model in a noisy channel approach, finding probabilities of the misspelled query given the corrected query.",
        "However, the method can be run in both directions, and in practice SMT systems benefit from also including the direct probability of the corrected query given this misspelled query (Och, 2002).",
        "Phrase-Based Error Model Features",
        "To use the phrase-based error model for spelling correction, we derive five features and integrate them into the ranker-based query speller system, described in Section 4.",
        "These features are as follows.",
        "‚Ä¢ Two phrase transformation features:",
        "These are the phrase transformation scores based on relative frequency estimates in two directions.",
        "In the correction-to-query direction, we define the feature as fPT (Q, C, A) = logP(√á|C), where P(√á|C) is computed by Equations (8) to (10), and P(q|cq) is the relative frequency estimate of Equation (11).",
        "‚Ä¢ Two lexical weight features: These are the phrase transformation scores based on the lexical weighting models in two directions.",
        "For example, in the correction-to-query direction, we define the feature asfLW{Q,C,A) = logP{Q|C), where P^C) is computed by Equations (8) to (10), and the phrase transformation probability is the computed as lexical weight according to Equation (12).",
        "‚Ä¢ Unaligned word penalty feature: the feature is defined as the ratio between the number of unaligned query words and the total number of query words."
      ]
    },
    {
      "heading": "6. Experiments",
      "text": [
        "We evaluate the spelling error models on a large scale real world data set containing 24,172 queries sampled from one year's worth of query logs from a commercial search engine.",
        "The spelling of each query is judged and corrected by four annotators.",
        "We divided the data set into training and test data sets.",
        "The two data sets do not overlap.",
        "The training data contains 8,515 query-correction pairs, among which 1,743 queries are misspelled (i.e., in these pairs, the corrections are different from the queries).",
        "The test data contains 15,657 query-correction pairs, among which 2,960 queries are misspelled.",
        "The average length of queries in the training and test data is 2.7 words.",
        "The speller systems we developed in this study are evaluated using the following three metrics.",
        "‚Ä¢ Accuracy: The number of correct outputs generated by the system divided by the total number of queries in the test set.",
        "‚Ä¢ Precision: The number of correct spelling corrections for misspelled queries generated by the system divided by the total number of corrections generated by the system.",
        "‚Ä¢ Recall: The number of correct spelling corrections for misspelled queries generated by the system divided by the total number of misspelled queries in the test set.",
        "We also perform a significance test, i.e., a t-test with a significance level of 0.05.",
        "A significant difference should be read as significant at the 95% level.",
        "We assume that for every position in q, there is either a single alignment to 0, or multiple alignments to non-zero positions in c. In effect, this computes a product of per-word translation scores; the per-word scores are averages of all the translations for the alignment links of that word.",
        "We estimate the word translation probabilities using counts from the word aligned corpus: t(<?|c) =",
        "‚ñ†r.",
        "Here N(c, q) is the number of times that",
        "# System__Accuracy Precision Recall 4 I Phrase model (L=3)|q.9043 | 0.7814 | 0.5732 Table 1.",
        "Summary of spelling correction results.",
        "9 I Phrase model (l=8)|q.9033 | 0.7821 | 0.5713 Table 2.",
        "Variations of spelling performance as a function of phrase length.",
        "13 I L=3; 3 month data | 0.9043 | 0.7814 | 0.5732 Table 3.",
        "Variations of spelling performance as a function of the size of clickthrough data used for training.",
        "In our experiments, all the speller systems are ranker-based.",
        "In most cases, other than the baseline system (a linear neural net), the ranker is a two-layer neural net with 5 hidden nodes.",
        "The free parameters of the neural net are trained to optimize accuracy on the training data using the back propagation algorithm, running for 500 iterations with a very small learning rate (0.1) to avoid overfitting.",
        "We did not adjust the neural net structure (e.g., the number of hidden nodes) or any training parameters for different speller systems.",
        "Neither did we try to seek the best tradeoff between precision and recall.",
        "Since all the systems are optimized for accuracy, we use accuracy as the primary metric for comparison.",
        "Table 1 summarizes the main spelling correction results.",
        "Row 1 is the baseline speller system where the source-channel model of Equations (2) and (3) is used.",
        "In our implementation, we use a linear ranker with only two features, derived respectively from the language model and the error model models.",
        "The error model is based on the edit distance function.",
        "Row 2 is the ranker-based spelling system that uses all 96 ranking features, as described in Section 4.",
        "Note that the system uses the features derived from two error models.",
        "One is the edit distance model used for candidate generation.",
        "The other is a phonetic model that measures the edit distance between the metaphones (Philips, 1990) of a query word and its aligned correction word.",
        "Row 3 is the same system as Row 2, with an additional set of features derived from a word-based error model.",
        "This model is a special case of the phrase-based error model described in Section 5 with the maximum phrase length set to one.",
        "Row 4 is the system that uses the additional 5 features derived from the phrase-based error models with a maximum bi-phrase length of 3.",
        "In phrase based error model, L is the maximum length of a bi-phrase (Figure 3).",
        "This value is important for the spelling performance.",
        "We perform experiments to study the impact of L; the results are displayed in Table 2.",
        "Moreover, since we proposed to use clickthrough data for spelling correction, it is interesting to study the impact on spelling performance from the size of clickthrough data used for training.",
        "We varied the size of clickthrough data and the experimental results are presented in Table 3.",
        "The results show first and foremost that the ranker-based system significantly outperforms the spelling system based solely on the source-channel model, largely due to the richer set of features used (Row 1 vs. Row 2).",
        "Second, the error model learned from clickthrough data leads to significant improvements (Rows 3 and 4 vs. Row 2).",
        "The phrase-based error model, due to its capability of capturing contextual information, outperforms the word-based model with a small but statistically significant margin (Row 4 vs. Row 3), though using phrases longer (L > 3) does not lead to further significant improvement (Rows 6 and 7 vs.",
        "Rows 8 and 9).",
        "Finally, using more clickthrough data leads to significant improvement (Row 13 vs.",
        "Rows 10 to 12).",
        "The benefit does not appear to have peaked - further improvements are likely given a larger data set."
      ]
    },
    {
      "heading": "7. Conclusions",
      "text": [
        "Unlike conventional textual documents, most search queries consist of a sequence of key words, many of which are valid search terms but are not stored in any compiled lexicon.",
        "This presents a challenge to any speller system that is based on a dictionary.",
        "This paper extends the recent research on using Web data and query logs for query spelling correction in two aspects.",
        "First, we show that a large amount of training data (i.e. query-correction pairs) can be extracted from clickthrough data, focusing on query reformulation sessions.",
        "The resulting data are very clean and effective for error model training.",
        "Second, we argue that it is critical to capture contextual information for query spelling correction.",
        "To this end, we propose a new phrase-based error model, which leads to significant improvement in our spelling correction experiments.",
        "There is additional potentially useful information that can be exploited in this type of model.",
        "For example, in future work we plan to investigate the combination of the clickthrough data collected from a Web browser with the noisy but large query sessions collected from a commercial search engine."
      ]
    },
    {
      "heading": "Acknowledgments",
      "text": [
        "The authors would like to thank Andreas Bode, Mei Li, Chenyu Yan and Galen Andrew for the very helpful discussions and collaboration."
      ]
    }
  ]
}
