{
  "info": {
    "authors": [
      "Lane Schwartz",
      "Chris Callison-Burch",
      "William Schuler",
      "Stephen Wu"
    ],
    "book": "Proceedings of the 49th Annual Meeting of the Association for Computational Linguistics: Human Language Technologies",
    "id": "acl-P11-1063",
    "title": "Incremental Syntactic Language Models for Phrase-based Translation",
    "url": "https://aclweb.org/anthology/P11-1063",
    "year": 2011
  },
  "references": [
    "acl-C04-1015",
    "acl-C90-3045",
    "acl-D07-1079",
    "acl-D07-1090",
    "acl-D08-1022",
    "acl-D09-1076",
    "acl-D10-1027",
    "acl-J01-2004",
    "acl-J10-1001",
    "acl-J90-2002",
    "acl-J93-2004",
    "acl-J97-3002",
    "acl-N03-1017",
    "acl-N04-1014",
    "acl-N04-1021",
    "acl-N04-1035",
    "acl-N09-1039",
    "acl-P01-1067",
    "acl-P02-1038",
    "acl-P03-1011",
    "acl-P03-2041",
    "acl-P04-1083",
    "acl-P05-1033",
    "acl-P05-1034",
    "acl-P05-1067",
    "acl-P06-1077",
    "acl-P06-1121",
    "acl-P07-1037",
    "acl-P07-1089",
    "acl-P07-2045",
    "acl-P08-1009",
    "acl-P08-1023",
    "acl-P08-1066",
    "acl-P09-1063",
    "acl-P09-1087",
    "acl-P10-1110",
    "acl-P10-1146",
    "acl-P98-1035",
    "acl-W04-0305",
    "acl-W06-3119",
    "acl-W07-0702"
  ],
  "sections": [
    {
      "text": [
        "Air Force Research Laboratory Wright-Patterson AFB, OH USA",
        "lane.schwartz@wpafb.af.mil",
        "Ohio State University Columbus, OH USA",
        "Johns Hopkins University",
        "Baltimore, MD USA",
        "Mayo Clinic",
        "Rochester, MN USA",
        "This paper describes a novel technique for incorporating syntactic knowledge into phrase-based machine translation through incremental syntactic parsing.",
        "Bottom-up and top-down parsers typically require a completed string as input.",
        "This requirement makes it difficult to incorporate them into phrase-based translation, which generates partial hypothesized translations from left-to-right.",
        "Incremental syntactic language models score sentences in a similar left-to-right fashion, and are therefore a good mechanism for incorporating syntax into phrase-based translation.",
        "We give a formal definition of one such lineartime syntactic language model, detail its relation to phrase-based decoding, and integrate the model with the Moses phrase-based translation system.",
        "We present empirical results on a constrained Urdu-English translation task that demonstrate a significant BLEU score improvement and a large decrease in perplexity."
      ]
    },
    {
      "heading": "1. Introduction",
      "text": [
        "Early work in statistical machine translation viewed translation as a noisy channel process comprised of a translation model, which functioned to posit adequate translations of source language words, and a target language model, which guided the fluency of generated target language strings (Brown et al.,",
        "This research was supported by NSF CAREER/PECASE award 0447685, NSF grant IIS-0713448, and the European Commission through the EuroMatrixPlus project.",
        "Opinions, interpretations, conclusions, and recommendations are those of the authors and are not necessarily endorsed by the sponsors or the United States Air Force.",
        "Cleared for public release (Case Number 88ABW-2010-6489) on 10 Dec 2010.",
        "1990).",
        "Drawing on earlier successes in speech recognition, research in statistical machine translation has effectively used n-gram word sequence models as language models.",
        "Modern phrase-based translation using large scale n-gram language models generally performs well in terms of lexical choice, but still often produces ungrammatical output.",
        "Syntactic parsing may help produce more grammatical output by better modeling structural relationships and long-distance dependencies.",
        "Bottom-up and top-down parsers typically require a completed string as input; this requirement makes it difficult to incorporate these parsers into phrase-based translation, which generates hypothesized translations incrementally, from left-to-right.As a workaround, parsers can rerank the translated output of translation systems (Och et al., 2004).",
        "On the other hand, incremental parsers (Roark, 2001; Henderson, 2004; Schuler et al., 2010; Huang and Sagae, 2010) process input in a straightforward left-to-right manner.",
        "We observe that incremental parsers, used as structured language models, provide an appropriate algorithmic match to incremental phrase-based decoding.",
        "We directly integrate incremental syntactic parsing into phrase-based translation.",
        "This approach re-exerts the role of the language model as a mechanism for encouraging syntactically fluent translations.",
        "The contributions of this work are as follows:",
        "• A novel method for integrating syntactic LMs into phrase-based translation (§3)",
        "• A formal definition of an incremental parser for",
        "statistical MT that can run in linear-time (§4)",
        "• Integration with Moses (§5) along with empirical results for perplexity and significant translation score improvement on a constrained Urdu-English task (§6)"
      ]
    },
    {
      "heading": "2. Related Work",
      "text": [
        "Neither phrase-based (Koehn et al., 2003) nor hierarchical phrase-based translation (Chiang, 2005) take explicit advantage of the syntactic structure of either source or target language.",
        "The translation models in these techniques define phrases as contiguous word sequences (with gaps allowed in the case of hierarchical phrases) which may or may not correspond to any linguistic constituent.",
        "Early work in statistical phrase-based translation considered whether restricting translation models to use only syntactically well-formed constituents might improve translation quality (Koehn et al., 2003) but found such restrictions failed to improve translation quality.",
        "Significant research has examined the extent to which syntax can be usefully incorporated into statistical tree-based translation models: string-to-tree (Yamada and Knight, 2001; Gildea, 2003; Imamura",
        "Liu et al., 2009; Chiang, 2010), and treelet (Ding and Palmer, 2005; Quirk et al., 2005) techniques use syntactic information to inform the translation model.",
        "Recent work has shown that parsing-based machine translation using syntax-augmented (Zollmann and Venugopal, 2006) hierarchical translation grammars with rich nonterminal sets can demonstrate substantial gains over hierarchical grammars for certain language pairs (Baker et al., 2009).",
        "In contrast to the above tree-based translation models, our approach maintains a standard (non-syntactic) phrase-based translation model.",
        "Instead, we incorporate syntax into the language model.",
        "Traditional approaches to language models in speech recognition and statistical machine translation focus on the use of n-grams, which provide a simple finite-state model approximation of the target language.",
        "Chelba and Jelinek (1998) proposed that syntactic structure could be used as an alternative technique in language modeling.",
        "This insight has been explored in the context of speech recognition (Chelba and Jelinek, 2000; Collins et al., 2005).",
        "Hassan et al.",
        "(2007) and Birch et al.",
        "(2007) use supertag n-gram LMs.",
        "Syntactic language models have also been explored with tree-based translation models.",
        "Charniak et al.",
        "(2003) use syntactic language models to rescore the output of a tree-based translation system.",
        "Post and Gildea (2008) investigate the integration of parsers as syntactic language models during binary bracketing transduction translation (Wu, 1997); under these conditions, both syntactic phrase-structure and dependency parsing language models were found to improve oracle-best translations, but did not improve actual translation results.",
        "Post and Gildea (2009) use tree substitution grammar parsing for language modeling, but do not use this language model in a translation system.",
        "Our work, in contrast to the above approaches, explores the use of incremental syntactic language models in conjunction with phrase-based translation models.",
        "Our syntactic language model fits into the family of linear-time dynamic programming parsers described in (Huang and Sagae, 2010).",
        "Like (Galley and Manning, 2009) our work implements an incremental syntactic language model; our approach differs by calculating syntactic LM scores over all available phrase-structure parses at each hypothesis instead of the 1-best dependency parse.",
        "The syntax-driven reordering model of Ge (2010) uses syntax-driven features to influence word order within standard phrase-based translation.",
        "The syntactic cohesion features of Cherry (2008) encourages the use of syntactically well-formed translation phrases.",
        "These approaches are fully orthogonal to our proposed incremental syntactic language model, and could be applied in concert with our work.",
        "3 Parser as Syntactic Language Model in Phrase-Based Translation",
        "Parsing is the task of selecting the representation r (typically a tree) that best models the structure of (s) president president Friday the president f2i",
        "Obama met president meets",
        "Figure 1: Partial decoding lattice for standard phrase-based decoding stack algorithm translating the German sentence Der Präsident trifft am Freitag den Vorstand.",
        "Each node h in decoding stack t represents the application of a translation option, and includes the source sentence coverage vector, target language n-gram state, and syntactic language model state fth.",
        "Hypothesis combination is also shown, indicating where lattice paths with identical n-gram histories converge.",
        "We use the English translation The president meets the board on Friday as a running example throughout all Figures.",
        "sentence e, out of all such possible representations t .",
        "This set of representations may be all phrase structure trees or all dependency trees allowed by the parsing model.",
        "Typically, tree r is taken to be:",
        "We define a syntactic language model P(e) based on the total probability mass over all possible trees for string e. This is shown in Equation 2 and decomposed in Equation 3.",
        "An incremental parser processes each token of input sequentially from the beginning of a sentence to the end, rather than processing input in a top-down (Earley, 1968) or bottom-up (Cocke and Schwartz, 1970; Kasami, 1965; Younger, 1967) fashion.",
        "After processing the tth token in string e, an incremental parser has some internal representation of possible hypothesized (incomplete) trees, Tt.",
        "The syntactic language model probability of a partial sentence e\\...et is defined:",
        "In practice, a parser may constrain the set of trees under consideration to Tt, that subset of analyses or partial analyses that remains after any pruning is performed.",
        "An incremental syntactic language model can then be defined by a probability mass function (Equation 5) and a transition function ö (Equation 6).",
        "The role of ö is explained in §3.3 below.",
        "Any parser which implements these two functions can serve as a syntactic language model.",
        "(s) that",
        "that president",
        "fl2",
        "f22",
        "Given a source language input sentence f, a trained source-to-target translation model, and a target language model, the task of translation is to find the maximally probable translation ê using a linear combination of j feature functions h weighted according to tuned parameters A (Och and Ney, 2002).",
        "NP DT NN The president VB",
        "Phrase-based translation constructs a set of translation options – hypothesized translations for contiguous portions of the source sentence – from a trained phrase table, then incrementally constructs a lattice of partial target translations (Koehn, 2010).",
        "To prune the search space, lattice nodes are organized into beam stacks (Jelinek, 1969) according to the number of source words translated.",
        "An n-gram language model history is also maintained at each node in the translation lattice.",
        "The search space is further trimmed with hypothesis recombination, which collapses lattice nodes that share a common coverage vector and n-gram state.",
        "Phrase-based translation produces target language words in an incremental left-to-right fashion, generating words at the beginning of a translation first and words at the end of a translation last.",
        "Similarly, incremental parsers process sentences in an incremental fashion, analyzing words at the beginning of a sentence first and words at the end of a sentence last.",
        "As such, an incremental parser with transition function ö can be incorporated into the phrase-based decoding process in a straightforward manner.",
        "Each node in the translation lattice is augmented with a syntactic language model state Tt.",
        "The hypothesis at the root of the translation lattice is initialized with f 0, representing the internal state of the incremental parser before any input words are processed.",
        "The phrase-based translation decoding process adds nodes to the lattice; each new node contains one or more target language words.",
        "Each node contains a backpointer to its parent node, in which f t-1 is stored.",
        "Given a new target language word et and f t-1, the incremental parser's transition function ö calculates f t. Figure 1 illustrates",
        "NP/NN NN",
        "VP/NN NN VP/NP DT board",
        "IN Friday",
        "I I The meets",
        "a sample phrase-based decoding lattice where each translation lattice node is augmented with syntactic language model state ft.",
        "In phrase-based translation, many translation lattice nodes represent multi-word target language phrases.",
        "For such translation lattice nodes, ö will be called once for each newly hypothesized target language word in the node.",
        "Only the final syntactic language model state in such sequences need be stored in the translation lattice node."
      ]
    },
    {
      "heading": "4. Incremental Bounded-Memory Parsing with a Time Series Model",
      "text": [
        "Having defined the framework by which any incremental parser may be incorporated into phrase-based translation, we now formally define a specific incremental parser for use in our experiments.",
        "The parser must process target language words incrementally as the phrase-based decoder adds hypotheses to the translation lattice.",
        "To facilitate this incremental processing, ordinary phrase-structure trees can be transformed into right-corner recurmeets DT NN on Friday the board",
        "4.1 Formal Parsing Model: Scoring Partial Translation Hypotheses",
        "This model is essentially an extension of an HHMM, which obtains a most likely sequence of hidden store states, s!",
        "\"D, of some length T and some maximum depth D, given a sequence of observed tokens (e.g. generated target language words), e1 .T, using HHMM state transition model 9a and observation symbol model 9b (Rabiner, 1990):",
        "Figure 4: Graphical representation of the dependency structure in a standard Hierarchic Hidden Markov Model with D = 3 hidden levels that can be used to parse syntax.",
        "Circles denote random variables, and edges denote conditional dependencies.",
        "Shaded circles denote variables with observed values.",
        "sive phrase structure trees using the tree transforms in Schuler et al.",
        "(2010).",
        "Constituent nonterminals in right-corner transformed trees take the form of incomplete constituents cn jcr]i consisting of an 'active' constituent cn lacking an 'awaited' constituent cni yet to come, similar to non-constituent categories in a Combinatory Categorial Grammar (Ades and Steedman, 1982; Steedman, 2000).",
        "As an example, the parser might consider VP/NN as a possible category for input \"meets the\".",
        "A sample phrase structure tree is shown before and after the right-corner transform in Figures 2 and 3.",
        "Our parser operates over a right-corner transformed probabilistic context-free grammar (PCFG).",
        "Parsing runs in linear time on the length of the input.",
        "This model of incremental parsing is implemented as a Hierarchical Hidden Markov Model (HHMM) (Murphy and Paskin, 2001), and is equivalent to a probabilistic pushdown automaton with a bounded pushdown store.",
        "The parser runs in O(n) time, where n is the number of words in the input.",
        "This model is shown graphically in Figure 4 and formally defined in §4.1 below.",
        "The incremental parser assigns a probability (Eq.",
        "5) for a partial target language hypothesis, using a bounded store of incomplete constituents cn /cni.",
        "The phrase-based decoder uses this probability value as the syntactic language model feature score.",
        "The HHMM parser is equivalent to a probabilistic pushdown automaton with a bounded pushdown store.",
        "The model generates each successive store (using store model 9s) only after considering whether each nested sequence of incomplete constituents has completed and reduced (using reduction model 9r):",
        "Store elements are defined to contain only the active (cn) and awaited (cni) constituent categories necessary to compute an incomplete constituent probability:",
        "Reduction states are defined to contain only the complete constituent category crf necessary to compute an inside likelihood probability, as well as a flag jrà indicating whether a reduction has taken place (to end a sequence of incomplete constituents):",
        "The model probabilities for these store elements and reduction states can then be defined (from Murphy and Paskin 2001) to expand a new incomplete constituent after a reduction has taken place (frd = 1; using depth-specific store state expansion model 9S-E)d), transition along a sequence of store elements",
        "Figure 5: Graphical representation of the Hierarchic Hidden Markov Model after parsing input sentence The president meets the board on Friday.",
        "The shaded path through the parse lattice illustrates the recognized right-corner tree structure of Figure 3.",
        "if no reduction has taken place (frf = 0; using depth-specific store state transition model 9S-T;d): and possibly reduce a store element (terminate a sequence) if the store state below it has reduced (frf+1 = 1; using depth-specific reduction model 9r,d):",
        "where r_L is a null state resulting from the failure of an incomplete constituent to complete, and constants are defined for the edge conditions of s° and rD+1.",
        "Figure 5 illustrates this model in action.",
        "These pushdown automaton operations are then refined for right-corner parsing (Schuler, 2009), distinguishing active transitions (model 9S-T-A d, in which an incomplete constituent is completed, but not reduced, and then immediately expanded to a new incomplete constituent in the same store element) from awaited transitions (model 9S-T-W;d, which involve no completion):",
        "These HHMM right-corner parsing operations are then defined in terms of branch-and depth-specific PCFG probabilities 9G-R;d and 9G-L;d:",
        "Figure 6: A hypothesis in the phrase-based decoding lattice from Figure 1 is expanded using translation option the board of source phrase den Vorstand.",
        "Syntactic language model state f 3l contains random variables s3..3; likewise f5l contains s5..3.",
        "The intervening random variables r4..3, s4..3, and r5..3 are calculated by transition function ö (Eq.",
        "6, as defined by §4.1), but are not stored.",
        "Observed random variables (e3..e5) are shown for clarity, but are not explicitly stored in any syntactic language model state.",
        "• for expansions:",
        "for awaited transitions:",
        "for active transitions:",
        "for cross-element reductions:",
        "E^G-RL*d (cn - cni ...)for in-element reductions:",
        "We use the parser implementation of (Schuler, 2009; Schuler et al., 2010).",
        "5 Phrase Based Translation with an Incremental Syntactic Language Model",
        "The phrase-based decoder is augmented by adding additional state data to each hypothesis in the decoder's hypothesis stacks.",
        "Figure 1 illustrates an excerpt from a standard phrase-based translation lattice.",
        "Within each decoder stack t, each hypothesis h is augmented with a syntactic language model state fth.",
        "Each syntactic language model state is a random variable store, containing a slice of random variables from the HHMM.",
        "Specifically, fthcontains those random variables st.. D that maintain distributions over syntactic elements.",
        "By maintaining these syntactic random variable stores, each hypothesis has access to the current language model probability for the partial translation ending at that hypothesis, as calculated by an incremental syntactic language model defined by the HHMM.",
        "Specifically, the random variable store at hypothesis h provides P(fth) = P(eh„t, ), where eh t is the sequence of words in a partial hypothesis ending at h which contains t target words, and where there are D syntactic random variables in each random variable store (Eq.",
        "5).",
        "During stack decoding, the phrase-based decoder progressively constructs new hypotheses by extending existing hypotheses.",
        "New hypotheses are placed in appropriate hypothesis stacks.",
        "In the simplest case, a new hypothesis extends an existing hypothesis by exactly one target word.",
        "As the new hypothesis is constructed by extending an existing stack element, the store and reduction state random variables are processed, along with the newly hypothesized word.",
        "This results in a new store of syntactic random variables (Eq.",
        "6) that are associated with the new stack element.",
        "When a new hypothesis extends an existing hypothesis by more than one word, this process is first carried out for the first new word in the hypothesis.",
        "It is then repeated for the remaining words in the hypothesis extension.",
        "Once the final word in the hypothesis has been processed, the resulting random variable store is associated with that hypothesis.",
        "The random variable stores created for the non-final words in the extending hypothesis are discarded, and need not be explicitly retained.",
        "Figure 6 illustrates this process, showing how a syntactic language model state f5l in a phrase-based decoding lattice is obtained from a previous syntactic language model state f3l (from Figure 1) by parsing the target language words from a phrase-based translation option.",
        "Figure 7: Average per-word perplexity values.",
        "HHMM was run with beam size of 2000.",
        "Bold indicates best single-model results for LMs trained on WSJ sections 2-21.",
        "Best overall in italics.",
        "Our syntactic language model is integrated into the current version of Moses (Koehn et al., 2007)."
      ]
    },
    {
      "heading": "6. Results",
      "text": [
        "As an initial measure to compare language models, average per-word perplexity, ppl, reports how surprised a model is by test data.",
        "Equation 25 calculates ppl using log base b for a test set of T tokens.",
        "We trained the syntactic language model from §4 (HHMM) and an interpolated n-gram language model with modified Kneser-Ney smoothing (Chen and Goodman, 1998); models were trained on sections 2-21 of the Wall Street Journal (WSJ) treebank (Marcus et al., 1993).",
        "The HHMM outperforms the n-gram model in terms of out-of-domain test set perplexity when trained on the same WSJ data; the best perplexity results for in-domain and out-of-domain test sets are found by interpolating",
        "LM",
        "In-domain WSJ 23 ppl",
        "Out-of-domain ur-en dev ppl",
        "WSJ 1-gram",
        "1973.57",
        "3581.72",
        "WSJ 2-gram",
        "349.18",
        "1312.61",
        "WSJ 3-gram",
        "262.04",
        "1264.47",
        "WSJ 4-gram",
        "244.12",
        "1261.37",
        "WSJ 5-gram",
        "232.08",
        "1261.90",
        "WSJ HHMM",
        "384.66",
        "529.41",
        "Interpolated WSJ 5-gram + HHMM",
        "209.13",
        "225.48",
        "Giga5-gram",
        "258.35",
        "312.28",
        "Interp.",
        "Giga 5-gr + WSJ HHMM",
        "222.39",
        "123.10",
        "Interp.",
        "Giga 5-gr + WSJ 5-gram",
        "174.88",
        "321.05",
        "Figure 8: Mean per-sentence decoding time (in seconds) for dev set using Moses with and without syntactic language model.",
        "HHMM parser beam sizes are indicated for the syntactic LM.",
        "HHMM and n-gram LMs (Figure 7).",
        "To show the effects of training an LM on more data, we also report perplexity results on the 5-gram LM trained for the GALE Arabic-English task using the EnglishGi-gaword corpus.",
        "In all cases, including the HHMM significantly reduces perplexity.",
        "We trained a phrase-based translation model on the full NIST Open MT08 Urdu-English translation model using the full training data.",
        "We trained the HHMM and n-gram LMs on the WSJ data in order to make them as similar as possible.",
        "During tuning, Moses was first configured to use just the n-gram LM, then configured to use both the n-gram LM and the syntactic HHMM LM.",
        "MERT consistently assigned positive weight to the syntactic LM feature, typically slightly less than the n-gram LM weight.",
        "In our integration with Moses, incorporating a syntactic language model dramatically slows the decoding process.",
        "Figure 8 illustrates a slowdown around three orders of magnitude.",
        "Although speed remains roughly linear to the size of the source sentence (ruling out exponential behavior), it is with an extremely large constant time factor.",
        "Due to this slowdown, we tuned the parameters using a constrained dev set (only sentences with 1-20 words), and tested using a constrained devtest set (only sentences with 1-20 words).",
        "Figure 9 shows a statistically significant improvement to the BLEU score when using the HHMM and the n-gram LMs together on this reduced test set."
      ]
    },
    {
      "heading": "7. Discussion",
      "text": [
        "This paper argues that incremental syntactic languages models are a straightforward and appro-",
        "Figure 9: Results for Ur-En devtest (only sentences with 1-20 words) with HHMM beam size of 2000 and Moses settings of distortion limit 10, stack size 200, and ttableJimit 20.",
        "priate algorithmic fit for incorporating syntax into phrase-based statistical machine translation, since both process sentences in an incremental left-to-right fashion.",
        "This means incremental syntactic LM scores can be calculated during the decoding process, rather than waiting until a complete sentence is posited, which is typically necessary in top-down or bottom-up parsing.",
        "We provided a rigorous formal definition of incremental syntactic languages models, and detailed what steps are necessary to incorporate such LMs into phrase-based decoding.",
        "We integrated an incremental syntactic language model into Moses.",
        "The translation quality significantly improved on a constrained task, and the perplexity improvements suggest that interpolating between n-gram and syntactic LMs may hold promise on larger data sets.",
        "The use of very large n-gram language models is typically a key ingredient in the best-performing machine translation systems (Brants et al., 2007).",
        "Our n-gram model trained only on WSJ is admittedly small.",
        "Our future work seeks to incorporate large-scale n-gram language models in conjunction with incremental syntactic language models.",
        "The added decoding time cost of our syntactic language model is very high.",
        "By increasing the beam size and distortion limit of the baseline system, future work may examine whether a baseline system with comparable runtimes can achieve comparable translation quality.",
        "A more efficient implementation of the HHMM parser would speed decoding and make more extensive and conclusive translation experiments possible.",
        "Various additional improvements could include caching the HHMM LM calculations, and exploiting properties of the right-corner transform that limit the number of decisions between successive time steps.",
        "Sentence",
        "Moses",
        "+HHMM",
        "+HHMM",
        "length",
        "beam=50",
        "beam=2000",
        "10",
        "0.21",
        "533",
        "1143",
        "20",
        "0.53",
        "1193",
        "2562",
        "30",
        "0.85",
        "1746",
        "3749",
        "40",
        "1.13",
        "2095",
        "4588",
        "Moses LM(s)",
        "BLEU",
        "n-gram only",
        "18.78",
        "HHMM + n-gram",
        "19.78"
      ]
    }
  ]
}
