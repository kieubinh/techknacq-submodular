{
  "info": {
    "authors": [
      "Licheng Fang",
      "Tagyoung Chung",
      "Daniel Gildea"
    ],
    "book": "Proceedings of the 49th Annual Meeting of the Association for Computational Linguistics: Human Language Technologies",
    "id": "acl-P11-2070",
    "title": "Terminal-Aware Synchronous Binarization",
    "url": "https://aclweb.org/anthology/P11-2070",
    "year": 2011
  },
  "references": [],
  "sections": [
    {
      "text": [
        "Licheng Fang, Tagyoung Chung and Daniel Gildea",
        "We present an SCFG binarization algorithm that combines the strengths of early terminal matching on the source language side and early language model integration on the target language side.",
        "We also examine how different strategies of target-side terminal attachment during binarization can significantly affect translation quality."
      ]
    },
    {
      "heading": "1. Introduction",
      "text": [
        "Synchronous context-free grammars (SCFG) are behind most syntax-based machine translation models.",
        "Efficient machine translation decoding with an SCFG requires converting the grammar into a bina-rized form, either explicitly, as in synchronous binarization (Zhang et al., 2006), where virtual nonterminals are generated for binarization, or implicitly, as in Earley parsing (Earley, 1970), where dotted items are used.",
        "Given a source-side binarized SCFG with terminal set T and nonterminal set TV, the time complexity of decoding a sentence of length n with a m-gram language model is (Venugopal et al., 2007):",
        "where K is the maximum number of right-hand-side nonterminals.",
        "SCFG binarization serves two important goals:",
        "• Parsing complexity for unbinarized SCFG grows exponentially with the number of nonterminals on the right-hand side of grammar rules.",
        "Binarization ensures cubic time decoding in terms of input sentence length.",
        "• In machine translation, integrating language model states as early as possible is essential to reducing search errors.",
        "Synchronous binarization (Zhang et al., 2006) enables the decoder to incorporate language model scores as soon as a binarized rule is applied.",
        "In this paper, we examine a CYK-like synchronous binarization algorithm that integrates a novel criterion in a unified semiring parsing framework.",
        "The criterion we present has explicit consideration of source-side terminals.",
        "In general, terminals in a rule have a lower probability of being matched given a sentence, and therefore have the effect of \"anchoring\" a rule and limiting its possible application points.",
        "Hopkins and Langmead (2010) formalized this concept as the scope of a rule.",
        "A rule of scope of k can be parsed in 0{nk).",
        "The scope of a rule can be calculated by counting the number of adjacent nonterminal pairs and boundary nonterminals.",
        "For example, has scope two.",
        "Building on the concept of scope, we define a cost function that estimates the expected number of hyperedges to be built when a particular binarization tree is applied to unseen data.",
        "This effectively puts hard-to-match derivations at the bottom of the binarization tree, which enables the decoder to decide early on whether an unbinarized rule can be built or not.",
        "We also investigate a better way to handle target-side terminals during binarization.",
        "In theory, different strategies should produce equivalent translation results.",
        "However, because decoding always involves",
        "Figure 1 : Rule Statistics pruning, we show that different strategies do have a significant effect in translation quality.",
        "Other works investigating alternative binarization methods mostly focus on the effect of nonterminal sharing.",
        "Xiao et al.",
        "(2009) also proposed a CYK-like algorithm for synchronous binarization.",
        "Apparently the lack of virtual nonterminal sharing in their decoder caused heavy competition between virtual nonterminals, and they created a cost function to \"diversify\" binarization trees, which is equivalent to minimizing nonterminal sharing.",
        "DeNero et al.",
        "(2009b) used a greedy method to maximize virtual nonterminal sharing on the source side during the -LM parsing phase.",
        "They show that effective source-side binarization can improve the efficiency of parsing SCFG.",
        "However, their method works only on the source side, and synchronous binarization is put off to the +LM decoding phase (DeNero et al., 2009a).",
        "Although these ideas all lead to faster decoding and reduced search errors, there can be conflicts in the constraints each of them has on the form of rules and accommodating all of them can be a challenge.",
        "In this paper, we present a cubic time algorithm to find the best binarization tree, given the conflicting constraints."
      ]
    },
    {
      "heading": "2. The Binarization Algorithm",
      "text": [
        "An SCFG rule is synchronously binarizable if when simultaneously binarizing source and target sides, virtual nonterminals created by binarizations always have contiguous spans on both sides (Huang, 2007).",
        "Algorithm 1 The CYK binarization algorithm.",
        "Even with the synchronous binarization constraint, many possible binarizations exist.",
        "Analysis of our Chinese-English parallel corpus has shown that the majority of synchronously binarizable rules with ar-ity smaller than 4 are monotonie, i.e., the target-side nonterminal permutation is either strictly increasing or decreasing (See Figure 1).",
        "For monotonie rules, any source-side binarization is also a permissible synchronous binarization.",
        "The binarization problem can be formulated as a semiring parsing (Goodman, 1999) problem.",
        "We define a cost function that considers different binarization criteria.",
        "A CYK-like algorithm can be used to find the best binarization tree according to the cost function.",
        "Consider an SCFG rule X – > (7, a), where 7 and a stand for the source side and the target side.",
        "Let £»(7) be the set of all possible binarization trees for 7.",
        "With the cost function c defined over hyperedges in a binarization tree t, the optimal binarization tree t is where c(h) is the cost of a hyperedge h in t.",
        "The optimization problem can be solved by Algorithm 1.",
        "(i, k, j) denotes a hyperedge h that connects the spans (i,k) and (k,j) to the span Cinit is the initialization for the cost function c. We can recover the optimal source-side binarization tree by augmenting the algorithm with back pointers.",
        "Binarized rules are generated by iterating over the nodes in the optimal binarization tree, while attaching unaligned target-side terminals.",
        "At each tree node, we generate a virtual nonterminal symbol by concatenating the source span it dominates.",
        "We define the cost function c(h) to be a tuple of component cost functions: c(h) = (ci(h), 02(h),...).",
        "When two costs a and b are compared, the components are compared piecewise, i.e.",
        "c < c!",
        "<^ a < c!x V (ci = c\\ A c2 < c'2) V ...",
        "If the (min, +) operators on each component cost satisfy the semiring properties, the cost tuple is also a semiring.",
        "Next, we describe our cost functions and how we handle target-side terminals.",
        "We use a binary cost b to indicate whether a binarization tree is a permissible synchronous binarization.",
        "Given a hyperedge (i,k,j),v/e say k is a permissible split of the span (i, j) if and only if the spans (i, k) and (k, j) are both synchronously binarizable and the span (i, j) covers a consecutive sequence of nonterminals on the target side.",
        "A span is synchronously binarizable if and only if the span is of length one, or a permissible split of the span exists.",
        "The cost b is defined as:",
        "T if A; is a permissible split of F otherwise",
        "[[propose a jjnn]i]2pp",
        "Under this configuration, the semiring operators (min, +) defined for the cost b are (V, A).",
        "Using&as the first cost function in the cost function tuple guarantees that we will find a tree that is a synchronously binarized if one exists.",
        "When a rule is being applied while parsing a sentence, terminals in the rule have less chance of being matched.",
        "We can exploit this fact by taking terminals into account during binarization and placing terminals lower in the binarization tree.",
        "Consider the following SCFG rule:",
        "PPffitti JJNN, propose a JJ NN PP",
        "The synchronous binarization algorithm of Zhang et al.",
        "(2006) binarizes the rule by finding the rightmost binarizable points on the source side:",
        "'We follow Wu (1997) and use square brackets for straight rules and pointed brackets for inverted rules.",
        "We also mark brackets with indices to represent virtual nonterminals.",
        "The source side of the first binarized rule \"[]i – >■ JJ NN, propose a JJ NN\" contains a very frequent nonterminal sequence \"JJ NN\".",
        "If one were to parse with the binarized rule, and if the virtual nonterminal [] 1 has been built, the parser needs to continue following the binarization tree in order to determine whether the original rule would be matched.",
        "Furthermore, having two consecutive nonterminals adds to complexity since the parser needs to test each split point.",
        "The following binarization is equally valid but integrates terminals early:",
        "pp imm nn]2j [[propose a JJ]iNN]2PP",
        "Here, the first binarized rule \"[]i – >■ gttB JJ, propose a JJ\" anchors on a terminal and enables earlier pruning of the original rule.",
        "We formulate this intuition by asking the question: given a source-side string 7, what binarization tree, on average, builds the smallest number of hy-peredges when the rule is applied?",
        "This is realized by defining a cost function e which estimates the probability of a hyperedge (i,k,j) being built.",
        "We use a simple model: assume each terminal or nonterminal in 7 is matched independently with a fixed probability, then a hyperedge (i,k,j) is derived if and only if all symbols in the source span are matched.",
        "The cost e is thus defined as",
        "For terminals, p(^e) can be estimated by counting the source side of the training corpus.",
        "For nonterminals, we simply assume p(^e) = 1.",
        "With the hyperedge cost e, the cost of a binarization tree t is J2het eW> i-e >me expected number of hyperedges to be built when a particular binarization of a rule is applied to unseen data.",
        "The operators",
        "In this definition, k does not appear on the right-hand side of the equation because all edges leading to the same span share the same cost value.",
        "for the cost e are the usual (min, +) operators on real numbers.",
        "During binarization, newly created virtual nonterminals are named according to the symbols (terminals and nonterminals) that they generate.",
        "For example, a new virtual nonterminal covering two nonterminals NP and VP is named NP+VP.",
        "To achieve maximum virtual nonterminal sharing, we also define a cost function n to count the number new nonterminals generated by a binarization tree.",
        "We keep track of all the nonterminals that have been generated when binarizing a rule set.",
        "When the i'th rule is being binarized, a nonterminal is considered new if it is previously unseen in binarizing rules 1 to i – 1.",
        "This greedy approach is similar to that of DeNero et al.",
        "(2009b).",
        "The cost function is thus defined as:"
      ]
    },
    {
      "heading": "1. if the VT for span (i, j) is new 0 otherwise",
      "text": [
        "The semiring operators for this cost are also (min, +) on real numbers.",
        "Once the optimal source-side binarization tree is found, we have a good deal of freedom to attach target-side terminals to adjacent nonterminals, as long as the bracketing of nonterminals is not violated.",
        "The following example is taken from Zhang et al.",
        "(2006):",
        "RBÄltPPÖtfNN, RB responsible for the NN PP",
        "With the source-side binarization fixed, we can produce distinct binarized rules by choosing different ways of attaching target-side terminals:",
        "The first binarization is generated by attaching the target-side terminals as low as possible in a post-",
        "it is defined as an expectation over input strings, instead of an expectation over trees.",
        "order traversal of the binarization tree.",
        "The conventional wisdom is that early consideration of target-side terminals promotes early language model score integration (Huang et al., 2009).",
        "The second binarization, on the contrary, attaches the target-side terminals as high as possible in the binarization tree.",
        "We argue that this late target-side terminal attachment is in fact better for two reasons.",
        "First, as in the example above, compare the following two rules resulting from early attachment of target terminals and late attachment of target terminals:",
        "The former has a much smaller chance of sharing the same target side with other binarized rules because on the target side, many nonterminals will be attached without any lexical evidence.",
        "We are more likely to have a smaller set of rules with the latter binarization.",
        "Second, with the presence of pruning, dynamic programming states that are generated by rules with many target-side terminals are disadvantaged when competing with others in the same bin because of the language model score.",
        "As a result, these would be discarded earlier, even if the original unbinarized rule has a high probability.",
        "Consequently, we lose the benefit of using larger rules, which have more contextual information.",
        "We show in our experiment that late target side terminal attachment significantly outperforms early target side terminal attachment.",
        "Although the problem can be alleviated by pre-computing a language model score for the original unbinarized rule and applying the heuristic to its binarized rules, this still grants no benefit over late terminal attachment.",
        "We show in our experiment that late target-side terminal attachment significantly outperforms early target side terminal attachment."
      ]
    },
    {
      "heading": "3. Experiments 3.1 Setup",
      "text": [
        "We test our binarization algorithm on an Chinese-English translation task.",
        "We extract a GHKM grammar (Galley et al., 2004) from a parallel corpus with the parsed English side with some modification so",
        "Seconds / Sentence (log scale)",
        "Figure 3 : BLEU Scores vs Decoding Time as not to extract unary rules (Chung et al., 2011).",
        "The corpus consists of 250K sentence pairs, which is 6.3M words on the English side.",
        "A 392-sentence test set was to evaluate different binarizations.",
        "Decoding is performed by a general CYK SCFG decoder developed in-house and a trigram language model is used.",
        "The decoder runs the CYK algorithm with cube-pruning (Chiang, 2007).",
        "In all our experiments, we discard unbinarizable rules, which have been shown by Zhang et al.",
        "(2006) to have no significant effect on translation accuracy.",
        "We first discuss effects of maximizing nonterminal sharing.",
        "Having nonterminal sharing maximization as a part of the cost function for binarization did yield slightly smaller grammars.",
        "However, we could not discern any noticeable difference or trend in terms of BLEU score, decoding speed, or model score when comparing translation results that used grammars that employed nonterminal sharing maximization and ones that did not.",
        "In the rest of this section, all the results we discuss use nonterminal sharing maximization as a part of the cost function.",
        "We then compare the effects of early target-side terminal attachment and late attachment.",
        "Figure 2 shows model scores of each decoder run with varying bin sizes, and Figure 3 shows BLEU scores for corresponding runs of the experiments.",
        "(b,n)-early is conventional synchronous binarization with early target-side terminal attachment and nonterminal sharing maximization, (b,n)-late is the same setting with late target-side terminal attachment.",
        "The tuples represent cost functions that are discussed in Section 2.",
        "The figures clearly show that late attachment of target-side terminals is better.",
        "Although Figure 3 does not show perfect correlation with Figure 2, it exhibits the same trend.",
        "The same goes for (b,e,n)-early and (b,e,n)-late.",
        "Finally, we examine the effect of including the source-side terminal-aware cost function, denoted \"e\" in our cost tuples.",
        "Comparing (b,e,n)-late with (b,n)-late, we see that terminal-aware binarization gives better model scores and BLEU scores.",
        "The trend is the same when one compares (b,e,n)-early and (b,n)-early."
      ]
    },
    {
      "heading": "4. Conclusion",
      "text": [
        "We examined binarizing synchronous context-free grammars within a semiring parsing framework.",
        "We proposed binarization methods that explicitly take terminals into consideration.",
        "We have found that although binarized rules are already scope 3, we can still do better by putting infrequent derivations as low as possible in a binarization tree to promote early pruning.",
        "We have also found that attaching target side terminals as late as possible promotes smarter pruning of rules thereby improving model score and translation quality at decoding time.",
        "Improvements we discuss in this paper result in better search, and hence better translation.",
        "Acknowledgments We thank Hao Zhang for useful discussions and the anonymous reviewers for their helpful comments.",
        "This work was supported by NSF grants IIS-0546554 and IIS-0910611."
      ]
    }
  ]
}
