{
  "info": {
    "authors": [
      "Aurelien Waite",
      "Graeme Blackwood",
      "William Byrne"
    ],
    "book": "Proceedings of the 10th International Workshop on Finite State Methods and Natural Language Processing",
    "id": "acl-W12-6219",
    "title": "Lattice-Based Minimum Error Rate Training Using Weighted Finite-State Transducers with Tropical Polynomial Weights",
    "url": "https://aclweb.org/anthology/W12-6219",
    "year": 2012
  },
  "references": [
    "acl-D07-1055",
    "acl-D08-1076",
    "acl-D10-1053",
    "acl-D11-1127",
    "acl-E09-1044",
    "acl-J07-2003",
    "acl-J10-3008",
    "acl-N09-1049",
    "acl-N09-4005",
    "acl-P02-1038",
    "acl-P02-1040",
    "acl-P03-1021",
    "acl-P09-1019",
    "acl-P10-4002",
    "acl-W08-0304"
  ],
  "sections": [
    {
      "text": [
        "?",
        "IBM T.J. Watson Research, Yorktown Heights, NY-10598"
      ]
    },
    {
      "heading": "Abstract",
      "text": [
        "Minimum Error Rate Training (MERT) is a method for training the parameters of a log-linear model.",
        "One advantage of this method of training is that it can use the large number of hypotheses encoded in a translation lattice as training data.",
        "We demonstrate that the MERT line optimisation can be modelled as computing the shortest distance in a weighted finite-state transducer using a tropical polynomial semiring."
      ]
    },
    {
      "heading": "1 Introduction",
      "text": [
        "Minimum Error Rate Training (MERT) (Och, 2003) is an iterative procedure for training a log-linear statistical machine translation (SMT) model (Och and Ney, 2002).",
        "MERT optimises model parameters directly against a criterion based on an automated translation quality metric, such as BLEU (Papineni et al., 2002).",
        "Koehn (2010) provides a full description of the SMT task and MERT.",
        "MERT uses a line optimisation procedure (Press et al., 2002) to identify a range of points along a line in parameter space that maximise an objective function based on the BLEU score.",
        "A key property of the line optimisation is that it can consider a large set of hypotheses encoded as a weighted directed acyclic graph (Macherey et al., 2008), which is called a lattice.",
        "The line optimisation procedure can also be applied to a hypergraph representation of the hypotheses (Kumar et al., 2009).",
        "?The work reported in this paper was carried out while the author was at the University of Cambridge.",
        "It has been noted that line optimisation over a lattice can be implemented as a semiring of sets of linear functions (Dyer et al., 2010).",
        "Sokolov and Yvon (2011) provide a formal description of such a semir-ing, which they denote the MERT semiring.",
        "The difference between the various algorithms derives from the differences in their formulation and implementation, but not in the objective they attempt to optimise.",
        "Instead of an algebra defined in terms of transformations of sets of linear functions, we propose an alternative formulation using the tropical polynomial semiring (Speyer and Sturmfels, 2009).",
        "This semiring provides a concise formalism for describing line optimisation, an intuitive explanation of the MERT shortest distance, and draws on techniques in the currently active field of Tropical Geometry (Richter-Gebert et al., 2005) 1.",
        "We begin with a review of the line optimisation procedure, lattice-based MERT, and the weighted finite-state transducer formulation in Section 2.",
        "In Section 3, we introduce our novel formulation of lattice-based MERT using tropical polynomial weights.",
        "Section 4 compares the performance of our approach with k-best and lattice-based MERT."
      ]
    },
    {
      "heading": "2 Minimum Error Rate Training",
      "text": [
        "Following Och and Ney (2002), we assume that we are given a tuning set of parallel sentences {(r1, f1), ..., (rS , fS)}, where rs is the reference translation of the source sentence fs.",
        "We also assume that sets of hypotheses Cs = {es,1, ..., es,K} 1An associated technical report contains an extended discussion of our approach (Waite et al., 2011)",
        "are available for each source sentence fs.",
        "Under the log-linear model formulation with feature functions hM1 and model parameters ?M1 , the most probable translation in a set Cs is selected as",
        "With an error function of the form E(rS1 , eS1 ) =?S s=1E(rs, es), MERT attempts to find model parameters to minimise the following objective:",
        "Note that for MERT the hypotheses set Cs is a k-best list of explicitly enumerated hypotheses, whereas lattice-based MERT uses a larger space."
      ]
    },
    {
      "heading": "2.1 Line Optimisation",
      "text": [
        "Although the objective function in Eq.",
        "(2) cannot be solved analytically, the line optimisation procedure of Och (2003) can be used to find an approximation of the optimal model parameters.",
        "Rather than evaluating the decision rule in Eq.",
        "(1) over all possible points in parameter space, the line optimisation considers a subset of points defined by the line ?M1 +?dM1 , where ?M1 corresponds to an initial point in parameter space and dM1 is the direction along which to optimise.",
        "Eq.",
        "(1) can be rewritten as:",
        "This decision rule shows that each hypothesis e ?",
        "Cs is associated with a linear function of ?",
        ": `e(?)",
        "= a(e, f s) + ?b(e, f s), where a(e, f s) is the y-intercept and b(e, f s) is the gradient.",
        "The optimisation problem is further simplified by defining a subspace over which optimisation is performed.",
        "The subspace is found by considering a form of the function in Eq.",
        "(3) defined with a range of real numbers",
        "that the upper envelope is completely defined by hypotheses e4, e3, and e1, together with the intersection points ?1 and ?2 (after Macherey et al. (2008), Fig. 1).",
        "For any value of ?",
        "the linear functions `e(?)",
        "associated with Cs take (up to) K values.",
        "The function in Eq.",
        "(4) defines the ?upper envelope?",
        "of these values over all ?.",
        "The upper envelope has the form of a continuous piecewise linear function in ?.",
        "The piecewise linear function can be compactly described by the linear functions which form line segments and the values of ?",
        "at which they intersect.",
        "The example in the upper part of Figure 1 shows how the upper envelope associated with a set of four hypotheses can be represented by three associated linear functions and two values of ?.",
        "The first step of line optimisation is to compute this compact representation of the upper envelope.",
        "Macherey et al. (2008) use methods from computational geometry to compute the upper envelope.",
        "The SweepLine algorithm (Bentley and Ottmann, 1979) computes the upper envelope from a set of linear functions with a complexity of O(K log(K)).",
        "Computing the upper envelope reduces the runtime cost of line optimisation as the error function need only be evaluated for the subset of hypotheses in Cs that contribute to the upper envelope.",
        "These errors are projected onto intervals of ?, as shown in the lower part of Figure 1, so that Eq.",
        "(2) can be readily solved."
      ]
    },
    {
      "heading": "2.2 Incorporation of Line Optimisation into",
      "text": []
    },
    {
      "heading": "MERT",
      "text": [
        "The previous algorithm finds the upper envelope along a particular direction in parameter space over",
        "a hypothesis set Cs.",
        "The line optimisation algorithm is then embedded within a general optimisation procedure.",
        "A common approach to MERT is to select the directions using Powell's method (Press et al., 2002).",
        "A line optimisation is performed on each coordinate axis.",
        "The axis giving the largest decrease in error is replaced with a vector between the initial parameters and the optimised parameters.",
        "Powell's method halts when there is no decrease in error.",
        "Instead of using Powell's method, the Downhill Simplex algorithm (Press et al., 2002) can be used to explore the criterion in Eq.",
        "(2).",
        "This is done by defining a simplex in parameter space.",
        "Directions where the error count decreases can be identified by considering the change in error count at the points of the simplex.",
        "This has been applied to parameter searching over k-best lists (Zens et al., 2007).",
        "Both Powell's method and the Downhill Simplex algorithms are approaches based on heuristics to select lines ?M1 + ?dM1 .",
        "It is difficult to find theoretically sound reasons why one approach is superior.",
        "Therefore Cer et al. (2008) instead choose the direction vectors dM1 at random.",
        "They report that this method can find parameters that are as good as the parameters produced by more complex algorithms."
      ]
    },
    {
      "heading": "2.3 Lattice Line Optimisation",
      "text": [
        "Macherey et al. (2008) describe a procedure for conducting line optimisation directly over a word lattice encoding the hypotheses in Cs.",
        "Each lattice edge is labelled with a word e and has a weight defined by the vector of word specific feature function values hM1 (e, f) so that the weight of a path in the lattice is found by summing over the word specific feature function values on that path.",
        "Given a line through parameter space, the goal is to extract from a lattice its upper envelope and the associated hypotheses.",
        "Their algorithm proceeds node by node through the lattice.",
        "Suppose that for a state q the upper envelope is known for all the partial hypotheses on all paths leading to q.",
        "The upper envelope defines a set of functions {`e?1(?",
        "), ..., `e?N (?)}",
        "over the partial hypotheses e?n.",
        "Two operations propagate the upper envelope to other lattice nodes.",
        "We refer to the first operation as the ?extend?",
        "operation.",
        "Consider a single edge from state q to state q?.",
        "This edge defines a linear function associated with a single word `e(?).",
        "A path following this edge transforms all the partial hypotheses leading to q by concatenating the word e. The upper envelope associated with the edge from q to q?",
        "is changed by adding `e(?)",
        "to the set of linear functions.",
        "The intersection points are not changed by this operation.",
        "The second operation is a union.",
        "Suppose q?",
        "has another incoming edge from a state q??",
        "where q 6= q??.",
        "There are now two upper envelopes representing two sets of linear functions.",
        "The first upper envelope is associated with the paths from the initial state to state q?",
        "via the state q.",
        "Similarly the second upper envelope is associated with paths from the initial state to state q?",
        "via the state q??.",
        "The upper envelope that is associated with all paths from the initial state to state q?",
        "via both q and q??",
        "is the union of the two sets of linear functions.",
        "This union is no longer a compact representation of the upper envelope as there may be functions which never achieve a maximum for any value of ?.",
        "The SweepLine algorithm (Bentley and Ottmann, 1979) is applied to the union to discard redundant linear functions and their associated hypotheses (Macherey et al., 2008).",
        "The union and extend operations are applied to states in topological order until the final state is reached.",
        "The upper envelope computed at the final state compactly encodes all the hypotheses that maximise Eq.",
        "(1) along the line ?M1 + ?dM1 .",
        "Macherey's theorem (Macherey et al., 2008) states that an upper bound for the number of linear functions in the upper envelope at the final state is equal to the number of edges in the lattice."
      ]
    },
    {
      "heading": "2.4 Line Optimisation using WFSTs",
      "text": [
        "Formally, a weighted finite-state transducer (WFST)",
        "transitions of T form the setE ?",
        "Q????",
        "?K?Q, where each transition includes a source state fromQ, input symbol from ?, output symbol from ?, cost from the weight set K, and target state from Q.",
        "For each state q ?",
        "Q, let E[q] denote the set of edges leaving state q.",
        "For each transition e ?",
        "E[q], let p[e] denote its source state, n[e] its target state,",
        "and w[e] its weight.",
        "Let pi = e1 ?",
        "?",
        "?",
        "eK denote a path in T from state p[e1] to state n[eK ], so that n[ek?1] = p[ek] for k = 2, .",
        ".",
        ".",
        ",K. The weight associated by T to path pi is the generalised product ?",
        "of the weights of the individual transitions:",
        "If P(q) denotes the set of all paths in T starting from an initial state in I and ending in state q, then the shortest distance d[q] is defined as the generalised sum ?",
        "of the weights of all paths leading to",
        "For some semirings, such as the tropical semiring, the shortest distance is the weight of the shortest path.",
        "For other semirings, the shortest distance is associated with multiple paths (Mohri, 2002); for these semirings there are shortest distances but need not any be shortest paths.",
        "That will be the case in what follows.",
        "However, the shortest distance algorithms rely only on general properties of semirings, and once the semiring is specified, the general shortest distance algorithms can be directly employed.",
        "Sokolov and Yvon (2011) define the MERT semiring based on operations described in the previous section.",
        "The extend operation is used for the generalised product ?.",
        "The union operation followed by an application of the SweepLine algorithm becomes the generalised sum ?.",
        "The word lattice is then transformed for an initial parameter ?M1 and direction dM1 .",
        "The weight of edge is mapped from a word specific feature function hM1 (e, f) to a word specific linear function `e(?).",
        "The weight of each path is the generalised product ?",
        "of the word specific feature linear functions.",
        "The upper envelope is the shortest distance of all the paths in the WFST."
      ]
    },
    {
      "heading": "3 The Tropical Polynomial Semiring",
      "text": [
        "In this section we introduce the tropical polynomial semiring (Speyer and Sturmfels, 2009) as a replacement for the MERT semiring (Sokolov and Yvon, 2011).",
        "We then provide a full description and a worked example of our MERT algorithm."
      ]
    },
    {
      "heading": "3.1 Tropical Polynomials",
      "text": [
        "A polynomial is a linear combination of a finite number of non-zero monomials.",
        "A monomial consists of a real valued coefficient multiplied by one or more variables, and these variables may have exponents that are non-negative integers.",
        "In this section we limit ourselves to a description of a polynomial in a single variable.",
        "A polynomial function is defined by evaluating a polynomial:",
        "A useful property of these polynomials is that they form a ring2 (Cox et al., 2007) and therefore are candidates for use as weights in WFSTs.",
        "Speyer and Sturmfels (2009) apply the definition of a classical polynomial to the formulation of a tropical polynomial.",
        "The tropical semiring uses summation for the generalised product ?",
        "and a min operation for the generalised sum ?.",
        "In this form, let ?",
        "be a variable that represents an element in the tropical semiring weight set R ?",
        "{??,+?}.",
        "We can write a monomial of ?",
        "raised to an integer exponent as",
        "where i is a non-negative integer.",
        "The monomial can also have a constant coefficient: a?",
        "?i, a ?",
        "R. We can define a function that evaluates a tropical monomial for a particular value of ?.",
        "For example, the tropical monomial a?",
        "?i is evaluated as: f(?)",
        "= a?",
        "?i = a+ i?",
        "This shows that a tropical monomial is a linear function with the coefficient a as its y-intercept and the integer exponent i as its gradient.",
        "A tropical polynomial is the generalised sum of tropical monomials where the generalised sum is evaluated using the min operation.",
        "For example: f(?)",
        "= (a?",
        "?i)?",
        "(b?",
        "?j) = min(a+ i?, b+ j?)",
        "Evaluating tropical polynomials in classical arithmetic gives the minimum of a finite collection of linear functions.",
        "Tropical polynomials can also be multiplied by a monomial to form another tropical polynomial.",
        "For example:",
        "Our reformulation of Eq.",
        "(4) negates the feature function weights and replaces the argmax by an argmin.",
        "This allows us to keep the usual formulation of tropical polynomials in terms of the min operation when converting Eq.",
        "(4) to a tropical representation.",
        "What remains to be addressed is the role of integer exponents in the tropical polynomial."
      ]
    },
    {
      "heading": "3.2 Integer Realisations for Tropical Monomials",
      "text": [
        "In the previous section we noted that the function defined by the upper envelope in Eq.",
        "(4) is similar to the function represented by a tropical polynomial.",
        "A significant difference is that the formal definition of a polynomial only allows integer exponents, whereas the gradients in Eq.",
        "(4) are real numbers.",
        "The upper envelope therefore encodes a larger set of model parameters than a tropical polynomial.",
        "To create an equivalence between the upper envelope and tropical polynomials we can approximate the linear functions {`e(?)",
        "= a(e, f s)+?",
        "?",
        "b(e, f s)} that compose segments of the upper envelope.",
        "We define a?",
        "(e, f s) = [a(e, f s) ?",
        "10n]int and b?",
        "(e, f s) = [b(e, f s)?10n]int where [x]int denotes the integer part of x.",
        "The approximation to `e(?)",
        "is:",
        "The result of this operation is to approximate the y-intercept and gradient of `e(?)",
        "to n decimal places.",
        "We can now represent the linear function ?`e(?)",
        "as the tropical monomial?a?",
        "(e, fs)???b?(e,fs).",
        "Note that a?",
        "(e, fs) and b?",
        "(e, fs) are negated since tropical polynomials define the lower envelope as opposed to the upper envelope defined by Eq.",
        "(4).",
        "The linear function represented by the tropical monomial is a scaled version of `e(?",
        "), but the upper envelope is unchanged (to the accuracy allowed by n).",
        "If for a particular value of ?, `ei(?)",
        "> `ej (?",
        "), then ?`ei(?)",
        "> ?`ej (?).",
        "Similarly, the boundary points are unchanged: if `ei(?)",
        "= `ej (?",
        "), then ?`ei(?)",
        "= ?`ej (?).",
        "Setting n to a very large value removes numerical differences between the upper envelope and the tropical polynomial representation, as shown by the identical results in Table 1.",
        "Using a scaled version of `e(?)",
        "as the basis for a tropical monomial may cause negative exponents to be created.",
        "Following Speyer and Sturmfels (2009),",
        "this case (a??i)?(b??j)?(c?",
        "?k) = (a??i)?(c??k).",
        "we widen the definition of a tropical polynomial to allow for these negative exponents."
      ]
    },
    {
      "heading": "3.3 Canonical Form of a Tropical Polynomial",
      "text": [
        "We noted in Section 2.1 that linear functions induced by some hypotheses do not contribute to the upper envelope and can be discarded.",
        "Terms in a tropical polynomial can have similar behaviour.",
        "Figure 2 plots the lines associated with the three terms of the example polynomial function f(?)",
        "= (a??i)?",
        "(b??j)?(c??k).",
        "We note that the piecewise linear function can also be described with the polynomial f(?)",
        "= (a??i)?(c??k).",
        "The latter representation is simpler but equivalent.",
        "Having multiple representations of the same polynomial causes problems when implementing the shortest distance algorithm defined by Mohri (2002).",
        "This algorithm performs an equality test between values in the semiring used to weight the WFST.",
        "The behaviour of the equality test is ambiguous when there are multiple polynomial representations of the same piecewise linear function.",
        "We therefore require a canonical form of a tropical polynomial so that a single polynomial represents a single function.",
        "We define the canonical form of a tropical polynomial to be the tropical polynomial that contains only the monomial terms necessary to describe the piecewise linear function it represents.",
        "We remove redundant terms from a tropical polynomial after computing the generalised sum.",
        "For a tropical polynomial of one variable we can take advantage of the equivalence with Lattice MERT and compute the canonical form using the SweepLine algorithm (Bentley and Ottmann, 1979).",
        "Each term",
        "corresponds to a linear function; linear functions that do not contribute to the upper envelope are discarded.",
        "Only monomials which correspond to the remaining linear functions are kept in the canonical form.",
        "The canonical form of a tropical polynomial thus corresponds to a unique and minimal representation of the upper envelope."
      ]
    },
    {
      "heading": "3.4 Relationship to the Tropical Semiring",
      "text": [
        "Tropical monomial weights can be transformed into regular tropical weights by evaluating the tropical monomial for a specific value of ?.",
        "For example, a tropical polynomial evaluated at ?",
        "= 1 corresponds to the tropical weight:",
        "Each monomial term in the tropical polynomial shortest distance represents a linear function.",
        "The intersection points of these linear functions define intervals of ?",
        "(as in Fig. 1).",
        "This suggests an alternate explanation for what the shortest distance computed using the tropical polynomial semiring represents.",
        "Conceptually, there is a continuum of lattices which have identical edges and vertices but with varying, real-valued edge weights determined by values of ?",
        "?",
        "R, so that each lattice in the continuum is indexed by ?.",
        "The tropical polynomial shortest distance agrees with the shortest distance through each lattice in the continuum.",
        "Our alternate explanation is consistent with the Theorem of Macherey (Section 2.3), as there could never be more paths than edges in the lattice.",
        "Therefore the upper bound for the number of monomial terms in the tropical polynomial shortest distance is the number of edges in the input lattice.",
        "We can use the mapping to the tropical semiring to compute the error surface.",
        "Let us assume we have n + 1 intervals separated by n interval boundaries.",
        "We use the midpoint of each interval to transform the lattice of tropical monomial weights into a lattice of tropical weights.",
        "The sequence of words that label the shortest path through the transformed lattice is the MAP hypothesis for the interval.",
        "The shortest path can be extracted using the WFST shortest path algorithm (Mohri and Riley, 2002).",
        "As a technical matter, the midpoints of the first interval [?",
        "?, ?1) and last interval [?n,?)",
        "are not defined.",
        "We therefore evaluate the tropical polynomial at ?",
        "= ?1 ?",
        "1 and ?",
        "= ?n + 1 to find the MAP hypothesis in the first and last intervals, respectively."
      ]
    },
    {
      "heading": "3.5 The TGMERT Algorithm",
      "text": [
        "We now describe an alternative algorithm to Lattice MERT that is formulated using the tropical polynomial shortest distance in one variable.",
        "We call the algorithm TGMERT, for Tropical Geometry MERT.",
        "As input to this procedure we use a word lattice weighted with word specific feature functions",
        "hM1 (e, f), a starting point ?M1 , and a direction dM1 in parameter space.",
        "1.",
        "Convert the word specific feature functions hM1 (e, f) to a linear function `e(?)",
        "using ?M1 and dM1 , as in Eq.",
        "(3).",
        "2.",
        "Convert `e(?)",
        "to ?`e(?)",
        "by approximating y-intercepts and gradients to n decimal places, as in Eq.",
        "(7).",
        "3.",
        "Convert ?`e(?)",
        "in Eq.",
        "(7) to the tropical monomial ?a?",
        "(e, fs)?",
        "??b?(e,fs).",
        "4.",
        "Compute the WFST shortest distance to the exit states (Mohri, 2002) with generalised sum ?",
        "and generalised product ?",
        "defined by the tropical polynomial semiring.",
        "The resulting tropical polynomial represents the upper envelope of the lattice.",
        "5.",
        "Compute the intersection points of the linear",
        "functions corresponding to the monomial terms of the tropical polynomial shortest distance.",
        "These intersection points define intervals of ?",
        "in which the MAP hypothesis does not change.",
        "6.",
        "Using the midpoint of each interval convert the tropical monomial?a?",
        "(e, fs)???b?",
        "(e,fs) to a regular tropical weight.",
        "Find the MAP hypothesis for this interval by extracting the shortest path using the WFST shortest path algorithm (Mohri and Riley, 2002)."
      ]
    },
    {
      "heading": "3.6 TGMERT Worked Example",
      "text": [
        "This section presents a worked example showing how we can use the TGMERT algorithm to compute the upper envelope of a lattice.",
        "We start with a three state lattice with a two dimensional feature vector shown in the upper part of Figure 3.",
        "We want to optimise the parameters along a line in two-dimensional feature space.",
        "Suppose the initial parameters are ?21 = [0.7, 0.4] and the direction",
        "dimensional log feature vector weights hM1 (e, f) where M = 2.",
        "The lower part is the lattice from the upper part with weights transformed into tropical monomials.",
        "is d21 = [0.3, 0.5].",
        "Step 1 of the TGMERT algorithm (Section 3.5) maps each edge weight to a word specific linear function.",
        "For example, the weight of the edge labelled ?x?",
        "between states 0 and 1 is transformed as follows:",
        "= ?0.86?",
        "0.27?",
        "Step 2 of the TGMERT algorithm converts the word specific linear functions into tropical monomial weights.",
        "Since all y-intercepts and gradients have a precision of two decimal places, we scale the linear functions `e(?)",
        "by 102 and negate them to create tropical monomials (Step 3).",
        "The edge labelled ?x?",
        "now has the monomial weight of 86?",
        "?27.",
        "The transformed lattice with weights mapped to the tropical polynomial semiring is shown in the lower part of Figure 3.",
        "We can now compute the shortest distance (Mohri, 2002) from the transformed example lattice with tropical monomial weights.",
        "There are three unique paths through the lattice corresponding to three distinct hypotheses.",
        "The weights associated with these hypotheses are:",
        "formed to regular tropical weights: ?",
        "= ?0.4 (top) and ?",
        "= ?1.4 (bottom).",
        "The shortest distance from initial to final state is the generalised sum of the path weights: (24??7)?",
        "(133?",
        "?103).",
        "The monomial term 122?",
        "?63 corresponding to ?x z?",
        "can be dropped because it is not part of the canonical form of the polynomial (Section 3.3).",
        "The shortest distance to the exit state can be represented as the minimum of two linear functions: min(24 + 7?, 133 + 103?).",
        "We now wish to find the hypotheses that define the error surface by performing Steps 5 and 6 of the TGMERT algorithm.",
        "These two linear functions define two intervals of ?.",
        "The linear functions intersect at ?",
        "?",
        "?1.4; at this value of ?",
        "the MAP hypothesis changes.",
        "Two lattices with regular tropical weights are created using ?",
        "= ?0.4 and ?",
        "= ?2.4.",
        "These are shown in Figure 4.",
        "For the lattice shown in the upper part the value for the edge labelled ?x?",
        "is computed as 86?",
        "?0.427 = 86 + 0.4 ?",
        "27 = 75.2.",
        "When ?",
        "= ?0.4 the lattice in the upper part in Figure 4 shows that the shortest path is associated with the hypothesis ?z z?, which is the MAP hypothesis for the range ?",
        "< 1.4.",
        "The lattice in the lower part of Figure 4 shows that when ?",
        "= ?2.4 the shortest path is associated with the hypothesis ?y z?, which is the MAP hypothesis when ?",
        "> 1.4."
      ]
    },
    {
      "heading": "3.7 TGMERT Implementation",
      "text": [
        "TGMERT is implemented using the OpenFst Toolkit (Allauzen et al., 2007).",
        "A weight class is added for tropical polynomials which maintains them in canonical form.",
        "The ?",
        "and ?",
        "operations are implemented for piecewise linear functions, with the SweepLine algorithm included as discussed.",
        "by MERT iteration.",
        "BLEU scores at the initial and final points of each iteration are shown for the Tune sets."
      ]
    },
    {
      "heading": "4 Experiments",
      "text": [
        "We compare feature weight optimisation using k-best MERT (Och, 2003), lattice MERT (Macherey et al., 2008), and tropical geometry MERT.",
        "We refer to these as MERT, LMERT, and TGMERT, resp.",
        "We investigate MERT performance in the context of the Arabic-to-English GALE P4 and Chinese-to-English GALE P3 evaluations3.",
        "For Arabic-to-English translation, word alignments are generated over around 9M sentences of GALE P4 parallel text.",
        "Following de Gispert et al. (2010b), word alignments for Chinese-to-English translation are trained from a subset of 2M sentences of GALE P3 parallel text.",
        "Hierarchical rules are extracted from alignments using the constraints described in (Chiang, 2007) with additional count and pattern filters (Igle",
        "sias et al., 2009b).",
        "We use a hierarchical phrase-based decoder (Iglesias et al., 2009a; de Gispert et al., 2010a) which directly generates word lattices from recursive translation networks without any intermediate hypergraph representation (Iglesias et al., 2011).",
        "The LMERT and TGMERT optimisation algorithms are particularly suitable for this realisation of hiero in that the lattice representation avoids the need to use the hypergraph formulation of MERT given by Kumar et al. (2009).",
        "MERT optimises the weights of the following features: target language model, source-to-target and target-to-source translation models, word and rule penalties, number of usages of the glue rule, word deletion scale factor, source-to-target and target-to-source lexical models, and three count-based features that track the frequency of rules in the parallel data (Bender et al., 2007).",
        "In both Arabic-to-English and Chinese-to-English experiments all MERT implementations start from a flat feature weight initialization.",
        "At each iteration new lattices and k-best lists are generated from the best parameters at the previous iteration, and each subsequent iteration includes 100 hypotheses from the previous iteration.",
        "For Arabic-to-English we consider an additional twenty random starting parameters at every iteration.",
        "All translation scores are reported for the IBM implementation of BLEU using case-insensitive matching.",
        "We report BLEU scores for the Tune set at the start and end of each iteration.",
        "The results for Arabic-to-English and Chinese-to-English are shown in Table 1.",
        "Both TGMERT and LMERT converge to a small gain over MERT in fewer iterations, consistent with previous reports (Macherey et al., 2008)."
      ]
    },
    {
      "heading": "5 Discussion",
      "text": [
        "We have described a lattice-based line optimisation algorithm which can be incorporated into MERT for parameter tuning of SMT systems and systems based on log-linear models.",
        "Our approach recasts the optimisation procedure used in MERT in terms of Tropical Geometry; given this formulation implementation is relatively straightforward using standard WFST operations and algorithms."
      ]
    }
  ]
}
