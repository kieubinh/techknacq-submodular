{
  "info": {
    "authors": [
      "Wide R. Hogenhout",
      "Yuji Matsumoto"
    ],
    "book": "International Conference on Computational Linguistics",
    "id": "acl-C96-1095",
    "title": "Towards a More Careful Evaluation of Broad Coverage Parsing Systems",
    "url": "https://aclweb.org/anthology/C96-1095",
    "year": 1996
  },
  "references": [
    "acl-E93-1006",
    "acl-E93-1040",
    "acl-H91-1060",
    "acl-P92-1017",
    "acl-P93-1005",
    "acl-P95-1037"
  ],
  "sections": [
    {
      "heading": "Abstract",
      "text": [
        "Since treebanks have become available to researchers a wide variety of techniques has been used to make broad coverage parsing systems.",
        "This makes quantitative evaluation very important, but the current evaluation methods have a number of drawbacks such as arbitrary choices in the treebank and the difficulty in measuring statistical significance.",
        "We suggest a more detailed method for testing a parsing system using constituent boundaries, with a number of measures that give more information than current measures, and evaluate the quality of the test.",
        "We also show that statistical significance cannot be calculated in a straightforward way, and suggest a calculation method for the case of Bracket Recall."
      ]
    },
    {
      "heading": "1 Introduction",
      "text": [
        "During the last few years large treebanks have become available to many researchers, which has resulted in researches applying a range of new techniques for parsing systems.",
        "Most of the methods that are being suggested include some kind of Machine Learning, such as history based grammars and decision tree models (Black et al., 1993; Magerman, 1995), training or inducing statistical grammars (Black, Garside and Leech, 1993; Pereira and Schabes, 1992; Schabes et al., 1993), or other techniques (Bod, 1993).",
        "Consequently, syntactical analysis has become an area with a wide variety of (a) algorithms and methods for learning and parsing, and (b) type of information used for learning and parsing (sometimes referred to as feature set).",
        "These methods only could become popular through evaluation methods for parsing systems, such as Bracket Accuracy, Bracket Recall, Sentence Accuracy and Viterbi Score.",
        "Some of them were introduced in (Black et al., 1991; Harrison et al., 1991).",
        "These evaluation metrics have a number of problems, and in this paper we argue that they need to be reconsidered, and give a number of suggestions either to overcome those problems or to gain a better understanding of those problems.",
        "Particular problems we look at are arbitrary choices in the treebank, errors in the treebank, types of errors made by parsers, and the statistical significance of differences in test scores by parsers."
      ]
    },
    {
      "heading": "2 Problems with Evaluation Metrics",
      "text": [
        "Until now a number of problems with evaluation have been pointed out.",
        "One well known problem is that measures based only on the absence of crossing errors on sentence level, such as Sentence Accuracy and Viterbi Consistency, are not usable for parsing systems that apply a partial bracketing, since a sparse bracketing improves the score.",
        "For example (Lin, 1995) discusses some other problems, but suggests an alternative that is difficult to apply.",
        "It is based on transferring constituency trees to dependency trees, but that introduces many ad hoc choices, and treebanks with dependency trees are hardly available.",
        "Also, a treebank usually contains arbitrary choices (besides errors) made by humans, in cases where it was not clear what brackets correctly reflect the syntactical structure of the sentence.",
        "We also mention some less discussed problems.",
        "First of all, given a test result such as Bracket Accuracy, it is necessary to know the confidante interval.",
        "In other words, if a parsing system scores 81.2% on a test, in what range should we assume the estimate to be?",
        "Basically the same problem arises with the statistical significance of the difference between the test score of two different parsers.",
        "If one scores 81.2% and the other 82.5%, should we conclude the second one is really doing better?",
        "This is particularly important when developing a parsing system by trying various modifications, and choosing the one that performs the best on a test set.",
        "If the differences between scores become too small in relation to the test set, one will just",
        "be making a parser for the test set and the performance will drop as soon as other data is used.",
        "There are several problems for deciding significance for Bracket Accuracy and Bracket Recall.",
        "There is a strong variation between brackets, because some brackets are very easy and some are very hard.",
        "Also one mistake may lead other mistakes, making them not independent.",
        "As an example of the last problem, think of the indicated bracket pair in the sentence \"The dog waited for [his master on the bridge].\" This would probably produce a crossing error, since the treebank would probably contain the pair \"The dog [waited for his master] on the bridge.\" The parser is now almost certain to make a second mistake, namely \"The dog waited [for his master on the bridge].\" Consequently two crossing errors are counted, whereas correcting one would imply correcting the other.",
        "In this article we will show that this makes it impossible to calculate the significance in a straightforward way and suggest two solutions.",
        "Another problem is that we only get a very general picture, whereas it would be interesting to know much more details.",
        "For example, how many of the bracket-pairs that constituted a crossing error when compared to the treebank would be acceptable to a human?",
        "(In other words, how often do arbitrary choices influence the result?)",
        "And, how many brackets that the parser produces are not in the treehank nor constitute a crossing error, and how many of those are not acceptable to humans?",
        "Bracket Accuracy is often lower than it should be when the treebank does not indicate all brackets (so-called skeleton parsing).",
        "This may also make Bracket Recall seem too low.",
        "In this paper we suggest giving more specific information about test results, and develop methods to estimate the statistical significance for test scores."
      ]
    },
    {
      "heading": "3 More Careful Measures",
      "text": [
        "The data resulting from the test may be (a) general data from all bracket pairs, or (b) data on specific structures (i.e. prepositional phrases).",
        "The measures we give can be applied to either one.",
        "We suggest performing two types of tests: regular tests and tests with a human check.",
        "The regular test should include a number of figures that we describe below, which are much more informative than the usual Bracket Recall or Bracket Precision.",
        "The more elaborate one includes a human check on certain items, which not only gives more exact information on the test result, but in particular shows the quality of the regular test.",
        "This is particularly useful if the parsing system was made independently from the treebank.",
        "The items for the regular test are listed here.",
        "The last four items only apply to a comparison of two parsing systems (for example two modifications of the same system), here referred to as A and B.",
        "• TTB: Total Treebank Brackets, number of brackets in the treebank.",
        "• TPB: Total Parse Brackets, number of brackets produced by the parsing system.",
        "• EM: Exact Match, the number of bracket-pairs produced by the parsing system that are equal to a pair in the treebank.",
        "• CE: Crossing Error, the number of bracket-pairs produced by the parsing system that constitute a crossing error against the treebank.",
        "• SP: Spurious, number of bracket pairs produced by the parsing system that were not in the treebank but also do not constitute a crossing error.",
        "• HMI: Parse-error Inherited, the number of bracket-pairs produced by the parsing system that constitute a crossing error and have a direct parent bracket-pair that also constitutes a crossing error.",
        "• PNINH: Parse-error Non-Inherited, the mun-ber of bracket-pairs produced by the parsing system that constitute a crossing error, but were not counted for PINH.",
        "• TINH: Treebank Inherited, the number of bracket-pairs in the treebank that were reproduced by the parsing system and have a direct parent bracket-pair in the treebank that was also reproduced.",
        "• TNINH: Treebank Non-Inherited, the number of bracket-pairs in the treebank that were reproduced by the parsing system but were not counted for TINH.",
        "• YY: Number of brackets in the treehank that were reproduced by A and B.",
        "• YN: Number of brackets in the treebank that were reproduced by A but not by B.",
        "• NY: Number of brackets in the treehank that were reproduced by B but not by A.",
        "• NN: Number of brackets in the treehank that were not reproduced by both A and B.",
        "As an example, we take this 2 sentence test: Treebank: [He [walks to [the house]]] [[The president] [gave [a long speech]]] Parser: [He [walks [to [the house]]]] [The [[president gave] [a [long speech]]]] The number of exactly matching brackets (EM) is 3+2 = 5.",
        "The number of crossing errors (CE) is",
        "2, both in the second sentence.",
        "The rest, 1+1 = 2 is spurious (SP).",
        "Further, TTB is 7, TPB is 9, PINH is 1 and PNINH is 1, TINII is 1 and TNINH is 4.",
        "This already gives more detailed information, but we can take things a step further by having a human evaluate the most important brackets.",
        "If the test set is large, it would be undesirable or impossible to have a human evaluate every single bracket, but we can seriously reduce the workload by not considering the exact matching bracket pairs; they are simply marked as 'accepted.' The only result of evaluating these brackets would be a few errors in the treebank, which is often not really worth the trouble (unless the treebank is suspected to contain many errors).",
        "This leaves only the crossing errors and spurious brackets to he evaluated.",
        "This leaves a much smaller amount of work, especially if there are many exact matches.",
        "Nevertheless we suggest doing a human check only on important tests, such as final evaluations.",
        "In the human evaluation, crossing error and spurious bracket pairs are to be counted as 'acceptable' if they would fit into the correct interpretation using the style of bracketing that the parsing system aims at, ignoring the style of bracketing of the treebank.",
        "The result of this process is that EM, CE and SP will be divided in accepted and rejected, giving six groups.",
        "We will refer to them as EMA, EMR, CEA, CER, SPA and SPR.",
        "If the check on EM is not performed, as we suggest, EMR will be 0.",
        "If YN and NY are both relatively high, this shows that there are structures on which A is better than B and vice versa (the systems 'complement' each other).",
        "In that case we would recommend testing on (more) specific structures, because otherwise the general result will be misleading."
      ]
    },
    {
      "heading": "4 A Practical Example",
      "text": [
        "To show the difference between the usual evaluation and our evaluation method we give the results for two parsing systems we evaluated in the course of our research.",
        "We do not intend to make any particular claims about these parsing systems, nor about the treebank we used (the test was not designed to draw conclusions about the treebank), we only use it to discuss the issues involved in evaluation.",
        "The treebank we used was the EDR corpus (EDR, 1995), a Japanese treebank with mainly newspaper sentences.",
        "We compared two versions of a grammar based parsing system developed at our laboratory, using a stochastical grammar to select one parse for every sentence.",
        "Having two variations of the same parser, we were interested in the difference between them.",
        "We performed a test on 600 sentences from the corpus (which were not used for training).",
        "Our evaluation was as follows:",
        "1.",
        "Unrelevant elements such as punctuation are eliminated from both the treebank tree and the parse tree.",
        "2.",
        "Next, all (resulting) empty bracket-pairs are removed.",
        "This was done recursively, therefore, if removing an empty bracket-pair caused its parent to become empty, the parent is also removed.",
        "3.",
        "Double bracket-pairs are removed.",
        "For example \"The [fold manTh is turned into \"The fold man] \".",
        "4.",
        "The crossing error bracket-pairs and spurious bracket-pairs were evaluated by hand.",
        "This took about three person-hours.",
        "In this process one step is missing, we namely wanted to remove trivial brackets before evaluating.",
        "In English there is a simple strategy for this: remove all brackets that enclose only one word.",
        "In Japanese this is not so easy.",
        "Since Japanese is an agglutinating language and words are not separated, it is difficult to say what the 'words' are in the first place.",
        "We decided on a certain level to permit brackets, and the tree from the treebank also stopped at some level so that remaining, more precise bracket-pairs were amongst those counted as spurious.",
        "The resulting figures are in table 1 and table 2 gives the comparative items."
      ]
    },
    {
      "heading": "5 New Measures",
      "text": [
        "We claim that the items listed in the previous paragraph allows a more flexible framework for evaluation.",
        "In this paragraph we will show some examples of measures that can be used.",
        "They can be calculated with these items so there is no need to discuss every one of them all the time.",
        "Table 3 gives the measures and table 4 gives the results in percentages.",
        "The measures in the lower part of this table are more directed at the test than at the parsers.",
        "The generation rate shows that both systems are rather modest in producing brackets.",
        "We give two types of recall.",
        "We suggest using recall-hard, but when the treebank does not indicate all brackets recall-soft may give an indication of the proper recall.",
        "We also present two types of precision.",
        "B scores better on precision-soft, but there is not much difference for precision-hard.",
        "This shows that B is better at recall but also generates more spurious brackets.",
        "The spuriousness also indicates this.",
        "The other measures tell us more about the test itself.",
        "A would have been treated slightly favorable without a human check, since relatively more errors go 'undetected.' False Error shows that almost 1 out of 4 crossing errors is not really wrong, which indicates there is much difference in bracketing-style between the treebank and the parsing system.",
        "Test Noise shows how many bracket-pairs were not tested properly.",
        "Problem Rate shows the real 'myopia' of the test.",
        "The inheritance data shows that in our test crossing errors are often related (P-inheritance).",
        "Also, reproducing a particular bracket-pair from the treebank increases the chances on reproducing its parent (T-inheritance)."
      ]
    },
    {
      "heading": "6 Significance",
      "text": [
        "Things would be easy if we could assume that the chance of applying a bracket is correctly modeled as a binomial experiment.",
        "We begin by mentioning two reasons why that is not possible.",
        "• Errors that are related, such a S one wrong attachment that causes a number of crossing errors, as was shown in our test by P-inheritance.",
        "• For a binomial process we must assume that the chance on success is the same for every bracket pair.",
        "It is not, in fact there are both very easy and very hard bracket pairs, with chances varying from very small to very high.",
        "The significance levels of all differences are worth knowing, but our main interest is the difference between A and B in recall and precision.",
        "Because of space limitations we only discuss a strategy for estimating the significance level of the measure recall-hard.",
        "Significance for Recall-Hard First we will check whether the distribution can be modeled properly with a binomial experiment.",
        "We do this by looking at the comparative items YY, YN, NY and NN.",
        "From these values the problem is intuitively clear: there are many easy bracket pairs that both always produce correctly, and many that both almost never produce because they are too hard, or the parsing systems simply never produce a certain type of bracket pair.",
        "Also, we have tested two rather similar parsing systems often giving the same answer, after all that is often just what one is interested in because one wants to measure improvement.",
        "We will use statistical distributions to confirm this problem occurs, and to find a solution to the significance problem.",
        "We do not have the space to go into the details of the relations between the distributions, but if A and B would behave like a binomial variable with test size N, with Pa and Pi, as respective chance on success, the distribution of YY should again be a binomial variable for test size N, with chance Py y = Pa Pb The expected value and variance of YY would be",
        "For NN the distribution is the same with the opposite probabilities, a binomial variable for test size N and P„,,, = (1 – Pa)(1 – Pb).",
        "If we take Pa = 1 – Pa and Pb = 1 - Pb, the expected value and variance of NN become",
        "We will later put this to more use, but for now we just use it to conclude that YY is expected to he around 9063, and NN is expected to be around 1851.",
        "Using the variation we find that the observed values are both extremely rare, so we can reject the hypothesis that we are comparing two binomial variables.",
        "Our strategy to solve this problem is assuming there are three types of brackets, namely brackets that are almost always reproduced, those that are almost never reproduced, and those that are sometimes reproduced and therefore constitute the 'real test' between the two parsing systems.",
        "Note that the first two types do not tell us anything about the difference between the parsing systems.",
        "By assuming the rest is similar to a binomial distribution, we can calculate the significance.",
        "Of course this assumption simplifies the situation, but it is closer to the truth than assuming the whole test can be modeled by a binominal distribution.",
        "And, if this assumption is not justified the whole test is not appropriate without testing on more specific phenomena.",
        "Guessing the Real Test Size The idea behind this method is that some brackets are almost always produced, and some are never, and those should be discarded so the real test remains.",
        "Ignoring certain bracket pairs corresponds with the fact that some constituents relate to little and some to much ambiguity, making some suitable for comparison and others not.",
        "We look at the number of equal answers to estimate the number of bracket-pairs that were not too easy or too hard.",
        "This is a theoretical operation, thus there is no need to do this in practice.",
        "We only need to estimate two parameters: M1 being the number of bracket-pairs that is discarded because they are always reproduced, and M2 being the number of bracket-pairs discarded because they are not reproduced.",
        "We reduce YY by M1, and NN by M2 (the test size is thus reduced by M1 + M2).",
        "This indicates an imaginary real test, namely the part of the test that really served to compare the parsing systems.",
        "We calculate these quantities by assuming a binomial distribution for the real test, and making sure that the corrected values for YY and NN become equal to their expected value.",
        "Let observed YY in real test = E(YY) in real test = real test size x Pain real test x Pb in real test then we get",
        "We do not give the derivation, but when doing the same for NN and combining the equations the following relation between M 1 and M2 holds:",
        "There are usually many values for M1 and M2 that satisfy this condition.",
        "In practice M1 and M2 have to be discrete values, so they often are not satisfying the condition exactly, but are close enough.",
        "It may seem logical to find the proper values for M1 and M2 as a next step, in other words deciding how many brackets were 'too easy' and how many were 'too hard.' But our experience is that there is no need to do that, because we are only interested in the significance level of the difference between A and B, and the significance level is practically the same for all values of Ml and M2 that satisfy the condition.",
        "As for our test, M1 and M2 can be, for example, 6234 and 4027 respectively.",
        "Whatever value we take, the significance level of the difference between A and B corresponds to being 4.7 standard variations away from the expected value.",
        "This means that we can safely conclude that B really performs better than A.",
        "The real test is a lot smaller, only 1139 bracket pairs, but that is still enough to be meaningful.",
        "(If the number of equal answers would be extremely high, the real test size may become too small, indicating the test is meaningless.)"
      ]
    },
    {
      "heading": "7 Conclusion",
      "text": [
        "We have pointed out that the measures which are currently in use have a number of weaknesses.",
        "To list the most important ones, a number of aspects of parsing systems are not measured, treebanks contain arbitrary choices, some errors are not detected and discovering statistical significance is difficult.",
        "The test items and measures we have suggested give a better picture of the specific behaviors of parsing systems.",
        "Although not solving the problem of arbitrary choices in the treebank, we can at least find out how much influence this has on the test results by using a human check on important tests.",
        "The same goes for other problems, such as errors that are not detected by comparison with the treebank.",
        "We suggest giving the regular items on every test, and sometimes doing a human check to discover the quality of the regular test.",
        "The amount of work in the human check can be made small when the recall of the parsing systems is high, by assuming the exact matches are correct.",
        "We have also given a strategy for calculating the significance level of differences in scores on one particular measure, namely recall-hard.",
        "This strategy makes it possible to calculate the significance level right away from the test items, not requiring a human check.",
        "This discussion will certainly not be the last on this subject.",
        "We have not mentioned some quantities such as the number of sentences with 1 crossing error, 2 crossing errors, and those with many crossing errors.",
        "These are of course also useful tools for evaluation.",
        "We have also not mentioned the Parse Base (calculated as the geometric mean over all sentences of i■rp, where n is the number of words in the sentence and p the number of parses for the sentence), because that relates to a grammar rather than a parsing system.",
        "Nevertheless we feel this will help to improve the evaluation of broad coverage parsing systems."
      ]
    }
  ]
}
